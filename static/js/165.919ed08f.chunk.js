"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[165],{7150:function(e,t,n){n.d(t,{a:function(){return o},y:function(){return d}});var s=n(3872),r=n(4384),i=(n(7406),n(5789)),a=n(1340),c=n(7457),l=["instance"],o=function(e){var t=e.instance,n=(0,r.Z)(e,l);return(0,c.jsxs)(a.pu,{renderHeader:function(){return(0,c.jsx)("div",{className:"text-md p-1",children:"Le client a t'il re\xe7u le produit?"})},renderFooter:function(e){var s=e.setOpen;return(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,c.jsx)(a.zx,{onClick:function(){return s(!1)},children:"Pas encore"}),(0,c.jsx)(a.zx,{onClick:function(){return t.mark_delivered().then((function(e){var t;null===n||void 0===n||null===(t=n.onSuccess)||void 0===t||t.call(n,e)})).catch((function(e){var t;null===n||void 0===n||null===(t=n.onFailure)||void 0===t||t.call(n,e)}))},className:"btn-primary fw-bold",children:"Oui"})]})},render:function(){return(0,c.jsx)("div",{className:"p-3"})},className:"btn-primary btn-md fw-bold w-50 d-flex align-items-center justify-content-center",children:[null!==t&&void 0!==t&&t.is_delivered?(0,c.jsx)(a.PJ._D,{}):(0,c.jsx)(a.PJ.NW,{}),!(null!==n&&void 0!==n&&n.icon)&&(0,c.jsx)("span",{className:"ms-1",children:"Confirmer la livraison"})]})},d=function(e){return(0,c.jsx)(i.ZP.Link,(0,s.Z)((0,s.Z)({title:"Modifier cette commande"},e),{},{to:"/staff/sales/orders/".concat(e.instance.slug,"/"),requiredPerms:["sales.change_order"],children:e.children}))}},4034:function(e,t,n){n.d(t,{K:function(){return o}});var s=n(5561),r=n(1253),i=n(4733),a=n(2562),c=n(5789),l=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"mark_delivered",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.is_delivered?Promise.resolve({data:this.data}):this.post("".concat(this._path,"deliver/"),{},{timeout:5e3})}},{key:"postDiscount",value:function(e){return this.post("".concat(this._path,"discount/"),e)}},{key:"deliveredDt",get:function(){var e;return this.formatDt(null===(e=this.data)||void 0===e?void 0:e.dt_delivered)}},{key:"updatedDt",get:function(){var e;return this.formatDt(null===(e=this.data)||void 0===e?void 0:e.updated)}},{key:"createdDt",get:function(){var e;return this.formatDt(null===(e=this.data)||void 0===e?void 0:e.created)}},{key:"formatDt",value:function(e){return e?new Date(e).toLocaleDateString(void 0,{day:"2-digit",weekday:"short",month:"short",year:"2-digit"}):null}}]),n}(c.x5),o=(0,c.QY)("orders",l)},1165:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var s=n(3251),r=n(3872),i=n(7406),a=n(5789),c=n(9450),l=n(9474),o=n(3088),d=n(1340),u=n(4034),m=n(7150),v=n(2988),h=n(9157),f=n(810),x=n(7457);function p(){(0,l.jr)("Orders - Sales");var e=i.useContext(c.h2),t=e.total||{},n=t.amount,s=t.count;return(0,x.jsxs)(a.ZP.View,{title:"Commandes",back:"/staff/sales/",footer:e.pagination&&(0,x.jsx)("div",{children:(0,x.jsx)(d.tl,(0,r.Z)((0,r.Z)({},e.pagination),{},{component:a.ZP.Link,to:!0}))}),className:"sales-orders-view",headerCN:"miq-container",children:[(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)(v.nk,(0,r.Z)({},n)),(0,x.jsxs)("span",{className:"text-muted ms-1",children:["(",s," commandes)"]})]}),(0,x.jsxs)("div",{className:"d-grid grid-lg-6 gap-2",children:[(0,x.jsx)("div",{className:"span-lg-4",children:(0,x.jsx)(j,{items:e.orders})}),(0,x.jsx)("div",{className:"d-none d-lg-block span-lg-2",children:(0,x.jsx)(_,{top_cats:e.top_cats})})]})]})}var j=function(e){var t=e.items,n=void 0===t?[]:t;return n?(0,x.jsx)(x.Fragment,{children:n.map((function(e){var t=(0,u.K)(e);return(0,x.jsx)(d.Zb,{style:{marginBottom:12},actions:(0,x.jsx)("div",{className:"d-flex",children:(0,x.jsx)(m.y,{instance:t,className:"btn btn-round btn-primary-3 ms-1",children:(0,x.jsx)(d.PJ.I8,{})})}),title:(0,x.jsx)("div",{className:"",children:"".concat(t.customer_name)}),className:"cart-list-item-card mb-1",children:(0,x.jsxs)("ul",{className:"text-sm",children:[(0,x.jsxs)("li",{className:"d-flex align-items-center justify-content-between",children:[(0,x.jsxs)("span",{className:"",children:[t.items_count," produit(s)"]}),(0,x.jsx)("span",{className:"fw-bold",children:(0,x.jsx)(o._S,{retail_price_data:(null===e||void 0===e?void 0:e.total)||(null===e||void 0===e?void 0:e.subtotal)})})]}),(0,x.jsx)("li",{className:"text-sm text-muted",children:t.createdDt})]})},e.slug)}))}):null},_=function(e){var t=(0,h.lr)(),n=(0,s.Z)(t,2),r=n[0],i=n[1],c=e.top_cats,l=void 0===c?[]:c;return(0,x.jsx)(x.Fragment,{children:l&&(0,x.jsx)(a.ZP.Section,{title:"Top Categories",children:(0,x.jsx)("ol",{className:"ps-3",children:l.map((function(e){return(0,x.jsxs)("li",{onClick:function(){return(t=e.product__category__slug)&&r.get("cat")!==t?r.set("cat",t):r.delete("cat"),void i(r);var t},className:"mb-1",children:[(0,x.jsx)("span",{className:(0,f.UT)(["me-1",e.product__category__slug===r.get("cat")&&"bg-blue-50"]),children:"".concat(e.product__category__name)}),"(".concat(e.total,")")]},e.product__category__slug)}))})})})}}}]);
//# sourceMappingURL=165.919ed08f.chunk.js.map