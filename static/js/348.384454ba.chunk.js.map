{"version":3,"file":"static/js/348.384454ba.chunk.js","mappings":"2SAUaA,EAAoB,SAAC,GAAqB,oBAAC,IACtD,GAA4BC,EAAAA,EAAAA,MAA5B,eAAOC,EAAP,KAAeC,EAAf,KACA,EAAkBC,EAAAA,SAAuBF,EAAOG,IAAI,MAAQ,IAA5D,eAAOC,EAAP,UAEA,OACE,iBACEC,OAAO,IACPC,OAAO,MACPC,SAAU,SAACC,GACTA,EAAEC,iBAEGL,EACAJ,EAAOU,IAAI,IAAKN,GADbJ,EAAOW,OAAO,KAEtBX,EAAOW,OAAO,QAEdV,EAAUD,OAMH,SAASY,IACtB,OAAkBb,EAAAA,EAAAA,MAAlB,eAAOc,EAAP,KAAUC,EAAV,KACA,GAAyBC,EAAAA,EAAAA,MAAjBC,EAAR,EAAQA,IAAKC,EAAb,EAAaA,QAEPC,EAAI,IAAIC,EAAAA,GAASH,GAEvB,OAAIC,GAAgB,SAAC,KAAD,IAEfC,EAAEE,WAGL,SAAC,IAAD,CACEC,QACE,+BACG,OAAIR,EAAES,QAAQC,KAAI,SAACC,GAAD,OACjB,mBACEC,UAAU,WAEVC,QAAS,WACPb,EAAEF,OAAOa,GACTV,EAAKD,IALT,mBAQMA,EAAEV,IAAIqB,GARZ,OAEOA,QANf,SAkBGN,EAAES,MAAMJ,KAAI,SAACK,GACZ,IAAQC,EAA+BD,EAA/BC,SAAUC,EAAqBF,EAArBE,KAAMC,EAAeH,EAAfG,WACxB,OACE,iBAAkBN,UAAU,OAA5B,WACE,0BACE,mBACEC,QAAS,WACPb,EAAEH,IAAI,OAAQoB,GACdhB,EAAKD,IAHT,SAMGiB,OAIL,yBAAMF,EAAII,MACV,yBAAMJ,EAAIK,MACTJ,IACC,0BACE,mBACEH,QAAS,WACPb,EAAEH,IAAI,MAAOmB,GACbf,EAAKD,IAHT,SAMGgB,MAINA,IACC,0BACE,mBACEH,QAAS,WACPb,EAAEH,IAAI,KAAMqB,GACZjB,EAAKD,IAHT,SAMGkB,SAlCCG,EAAAA,EAAAA,YAxBO","sources":["../../../../packages/miq-staffjs/src/analytics/views.HitList.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { Response, uuid } from '@miq/utiljs';\nimport { Loading } from '@miq/componentjs';\n\nimport StaffView from '../Views';\n\nimport { useHitListRequest } from './utils';\n\nexport const HitListFilterForm = ({ ...props }: {}) => {\n  const [params, setParams] = useSearchParams();\n  const [q, setQ] = React.useState<string>(params.get('q') || '');\n\n  return (\n    <form\n      action=\".\"\n      method=\"GET\"\n      onSubmit={(e) => {\n        e.preventDefault();\n\n        if (!q) params.delete('q');\n        else params.set('q', q);\n        params.delete('page');\n\n        setParams(params);\n      }}\n    ></form>\n  );\n};\n\nexport default function HitListView() {\n  const [p, setP] = useSearchParams();\n  const { res, loading } = useHitListRequest();\n\n  const r = new Response(res);\n\n  if (loading) return <Loading />;\n\n  if (!r.isSuccess) return null;\n\n  return (\n    <StaffView\n      header={\n        <>\n          {[...p.keys()].map((k) => (\n            <button\n              className=\"me-1 btn\"\n              key={k}\n              onClick={() => {\n                p.delete(k);\n                setP(p);\n              }}\n            >\n              {`${p.get(k)} x`}\n            </button>\n          ))}\n        </>\n      }\n    >\n      {r.items.map((hit) => {\n        const { referrer, path, user_agent } = hit;\n        return (\n          <div key={uuid()} className=\"mb-2\">\n            <div>\n              <button\n                onClick={() => {\n                  p.set('path', path);\n                  setP(p);\n                }}\n              >\n                {path}\n              </button>\n            </div>\n\n            <div>{hit.ip}</div>\n            <div>{hit.url}</div>\n            {referrer && (\n              <div>\n                <button\n                  onClick={() => {\n                    p.set('ref', referrer);\n                    setP(p);\n                  }}\n                >\n                  {referrer}\n                </button>\n              </div>\n            )}\n            {referrer && (\n              <div>\n                <button\n                  onClick={() => {\n                    p.set('ua', user_agent);\n                    setP(p);\n                  }}\n                >\n                  {user_agent}\n                </button>\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </StaffView>\n  );\n}\n"],"names":["HitListFilterForm","useSearchParams","params","setParams","React","get","q","action","method","onSubmit","e","preventDefault","set","delete","HitListView","p","setP","useHitListRequest","res","loading","r","Response","isSuccess","header","keys","map","k","className","onClick","items","hit","referrer","path","user_agent","ip","url","uuid"],"sourceRoot":""}