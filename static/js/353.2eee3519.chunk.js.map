{"version":3,"file":"static/js/353.2eee3519.chunk.js","mappings":"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","sources":["shop/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Routes, Route, useSearchParams } from 'react-router-dom';\n\nimport './shop.scss';\n\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Img, View, BreadCrumbs, Pagination } from '@miq/componentjs';\nimport { CategoryLinks, PresaleStarIcon, ProductPrice, ProductSearchForm, ProductType, Views } from '@shopy/shopjs';\nimport { ShopyClientProductDetailSharedDataState, ShopyClientProductListSharedDataState } from '@shopy/shopjs';\n\nimport { truncateStr } from '@miq/utiljs';\n\nconst ShopProductDetailView = () => {\n  const ctx = React.useContext<ShopyClientProductDetailSharedDataState>(SharedDataCtx);\n\n  const { product, similar, breadcrumbs } = ctx;\n\n  const { cover, images } = product;\n  const pImages = [cover!, ...images!];\n\n  return (\n    <>\n      <Views.ProductDetailView\n        product={product}\n        header={<BreadCrumbs items={breadcrumbs} className=\"my-3 px-2\" />}\n        images={\n          <div className=\"p-images mb-2\" style={{ position: 'sticky', top: 0 }}>\n            <Views.ProductDetailView.HorizontalGallery images={pImages} mobileOnly={false} />\n          </div>\n        }\n        body={\n          <div className=\"p-details p-1\">\n            {/* <div className=\"mb-3\">\n              <div className=\"text-md\">Porter avec</div>\n            </div> */}\n          </div>\n        }\n        footer={\n          <>\n            {similar && (\n              <div className=\"p-2\">\n                <p className=\"text-md mb-2\">Vous aimerez peut-être</p>\n\n                <Views.ProductGridView.Grid>\n                  {similar.map((i) => (\n                    <ProductGridItem item={i} key={i.meta_slug} />\n                  ))}\n                </Views.ProductGridView.Grid>\n              </div>\n            )}\n          </>\n        }\n        className=\"product-detail-view\"\n      />\n    </>\n  );\n};\n\nconst ShopProductGridView = () => {\n  const [params] = useSearchParams();\n  const ctx = React.useContext<ShopyClientProductListSharedDataState & { pagination: any }>(SharedDataCtx);\n\n  const { object_list = [], page_label, breadcrumbs, pagination } = ctx;\n\n  const q = params.get('q');\n\n  return (\n    <View\n      className=\"p-listview p-1 pb-4\"\n      header={\n        <header className=\"p-listview-header\">\n          <div className=\"miq-container center\">\n            <div className=\"mb-3\">\n              <ProductSearchForm />\n            </div>\n          </div>\n          <BreadCrumbs items={breadcrumbs} className=\"mb-2\" />\n          {!q || (q && object_list.length === 0) ? <CategoryLinks showCover /> : null}\n        </header>\n      }\n    >\n      {q && object_list.length === 0 && (\n        <div className=\"text-center\">\n          <div className=\"my-4\">\n            Votre recherche ne correspond à aucun résultat.\n            <p className=\"text-muted\">Veuillez vérifier l'orthographe ou réessayez avec des termes plus généraux.</p>\n          </div>\n          <div className=\"my-4\">\n            <a href=\"/shop/\" className=\"btn btn-md btn-primary-3 fw-bold\">\n              Visiter la boutique\n            </a>\n          </div>\n        </div>\n      )}\n      <Views.ProductGridView\n        title={page_label}\n        viewCN=\"miq-container-lg\"\n        items={object_list}\n        renderItem={(i) => <ProductGridItem showName item={i} key={i.meta_slug} />}\n      />\n      <div className=\"mt-3\">{pagination && <Pagination {...pagination} />}</div>\n    </View>\n  );\n};\n\nconst ProductGridItem = ({ item, showName, ...props }: { item: ProductType; showName?: boolean }) => {\n  const { url, cover, name, is_oos } = item;\n\n  return (\n    <a href={`${url}`}>\n      <div>\n        <Img.Picture {...cover} className=\"rounded\" style={{ aspectRatio: '4/5', objectFit: 'cover' }} />\n\n        <div className=\"product-grid-info\">\n          {is_oos && <span className=\"bg-red-100 px-1 rounded\">En rupture de stock</span>}\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <ProductPrice {...item} />\n            {item.is_pre_sale && <PresaleStarIcon width={16} height={16} />}\n          </div>\n\n          {showName && <div className=\"product-grid-name\">{truncateStr(name)}</div>}\n        </div>\n      </div>\n    </a>\n  );\n};\n\nexport default function ShopPublicRoutes() {\n  return (\n    <Routes>\n      <Route path=\":catMetaSlug/:prodMetaSlug/\" element={<ShopProductDetailView />} />\n      <Route path=\":catMetaSlug/\" element={<ShopProductGridView />} />\n      <Route index element={<ShopProductGridView />} />\n    </Routes>\n  );\n}\n"],"names":["ShopProductDetailView","ctx","React","SharedDataCtx","product","similar","breadcrumbs","cover","images","pImages","header","items","className","style","position","top","mobileOnly","body","footer","map","i","ProductGridItem","item","meta_slug","ShopProductGridView","useSearchParams","params","object_list","page_label","pagination","q","get","length","showCover","href","title","viewCN","renderItem","showName","url","name","is_oos","aspectRatio","objectFit","is_pre_sale","width","height","truncateStr","ShopPublicRoutes","path","element","index"],"sourceRoot":""}