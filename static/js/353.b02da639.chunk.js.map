{"version":3,"file":"static/js/353.b02da639.chunk.js","mappings":"0TAYMA,EAAwB,WAC5B,IAAMC,EAAMC,EAAAA,WAA0DC,EAAAA,IAE9DC,EAAkCH,EAAlCG,QAASC,EAAyBJ,EAAzBI,QAASC,EAAgBL,EAAhBK,YAElBC,EAAkBH,EAAlBG,MAAOC,EAAWJ,EAAXI,OACTC,EAAO,CAAIF,GAAJ,eAAeC,IAE5B,OACE,+BACE,SAAC,QAAD,CACEJ,QAASA,EACTM,QAAQ,SAAC,KAAD,CAAaC,MAAOL,EAAaM,UAAU,cACnDJ,QACE,gBAAKI,UAAU,gBAAgBC,MAAO,CAAEC,SAAU,SAAUC,IAAK,GAAjE,UACE,SAAC,0BAAD,CAA2CP,OAAQC,EAASO,YAAY,MAG5EC,MACE,gBAAKL,UAAU,kBAMjBM,QACE,8BACGb,IACC,iBAAKO,UAAU,MAAf,WACE,cAAGA,UAAU,eAAb,wCAEA,SAAC,aAAD,UACGP,EAAQc,KAAI,SAACC,GAAD,OACX,SAACC,EAAD,CAAiBC,KAAMF,GAAQA,EAAEG,qBAO7CX,UAAU,2BAMZY,EAAsB,WAC1B,OAAiBC,EAAAA,EAAAA,MAAVC,GAAP,eACMzB,EAAMC,EAAAA,WAA8EC,EAAAA,IAE1F,EAAkEF,EAA1D0B,YAAAA,OAAR,MAAsB,GAAtB,EAA0BC,EAAwC3B,EAAxC2B,WAAYtB,EAA4BL,EAA5BK,YAAauB,EAAe5B,EAAf4B,WAE7CC,EAAIJ,EAAOK,IAAI,KAErB,OACE,UAAC,KAAD,CACEnB,UAAU,sBACVF,QACE,oBAAQE,UAAU,oBAAlB,WACE,gBAAKA,UAAU,uBAAf,UACE,gBAAKA,UAAU,OAAf,UACE,SAAC,KAAD,SAIJ,SAAC,KAAD,CAAaD,MAAOL,EAAaM,UAAU,UAEzCkB,IAAK,SAAC,KAAD,CAAeE,WAAS,OAZrC,WAgBE,SAAC,QAAD,CACEC,MAAOL,EACPM,OAAO,mBACPvB,MAAOgB,EACPQ,WAAY,SAACf,GAAD,OAAO,SAACC,EAAD,CAAiBe,UAAQ,EAACd,KAAMF,GAAQA,EAAEG,eAG/D,gBAAKX,UAAU,OAAf,SAAuBiB,IAAc,SAAC,MAAD,UAAgBA,UAKrDR,EAAkB,SAAC,GAA6E,IAA3EC,EAA0E,EAA1EA,KAAMc,EAAoE,EAApEA,SACvBC,IAD2F,YAC9Df,EAA7Be,KAAK9B,EAAwBe,EAAxBf,MAAO+B,EAAiBhB,EAAjBgB,KAAMC,EAAWjB,EAAXiB,OAE1B,OACE,cAAGC,KAAI,UAAKH,GAAZ,UACE,4BACE,SAAC,cAAD,kBAAiB9B,GAAjB,IAAwBK,UAAU,UAAUC,MAAO,CAAE4B,YAAa,MAAOC,UAAW,aAEpF,iBAAK9B,UAAU,oBAAf,UACG2B,IAAU,iBAAM3B,UAAU,0BAAhB,kCACX,SAAC,MAAD,UAAkBU,IACjBc,IAAY,gBAAKxB,UAAU,oBAAf,UAAoC+B,EAAAA,EAAAA,IAAYL,cAOxD,SAASM,IACtB,OACE,UAAC,KAAD,YACE,SAAC,KAAD,CAAOC,KAAK,8BAA8BC,SAAS,SAAC9C,EAAD,OACnD,SAAC,KAAD,CAAO6C,KAAK,gBAAgBC,SAAS,SAACtB,EAAD,OACrC,SAAC,KAAD,CAAOuB,OAAK,EAACD,SAAS,SAACtB,EAAD","sources":["shop/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Routes, Route, useSearchParams } from 'react-router-dom';\n\nimport './shop.scss';\n\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Img, View, BreadCrumbs, Pagination } from '@miq/componentjs';\nimport { CategoryLinks, ProductPrice, ProductSearchForm, ProductType, Views } from '@shopy/shopjs';\nimport { ShopyClientProductDetailSharedDataState, ShopyClientProductListSharedDataState } from '@shopy/shopjs';\n\nimport { truncateStr } from '@miq/utiljs';\n\nconst ShopProductDetailView = () => {\n  const ctx = React.useContext<ShopyClientProductDetailSharedDataState>(SharedDataCtx);\n\n  const { product, similar, breadcrumbs } = ctx;\n\n  const { cover, images } = product;\n  const pImages = [cover!, ...images!];\n\n  return (\n    <>\n      <Views.ProductDetailView\n        product={product}\n        header={<BreadCrumbs items={breadcrumbs} className=\"my-3 px-2\" />}\n        images={\n          <div className=\"p-images mb-2\" style={{ position: 'sticky', top: 0 }}>\n            <Views.ProductDetailView.HorizontalGallery images={pImages} mobileOnly={false} />\n          </div>\n        }\n        body={\n          <div className=\"p-details p-1\">\n            {/* <div className=\"mb-3\">\n              <div className=\"text-md\">Porter avec</div>\n            </div> */}\n          </div>\n        }\n        footer={\n          <>\n            {similar && (\n              <div className=\"p-2\">\n                <p className=\"text-md mb-2\">Vous aimerez peut-Ãªtre</p>\n\n                <Views.ProductGridView.Grid>\n                  {similar.map((i) => (\n                    <ProductGridItem item={i} key={i.meta_slug} />\n                  ))}\n                </Views.ProductGridView.Grid>\n              </div>\n            )}\n          </>\n        }\n        className=\"product-detail-view\"\n      />\n    </>\n  );\n};\n\nconst ShopProductGridView = () => {\n  const [params] = useSearchParams();\n  const ctx = React.useContext<ShopyClientProductListSharedDataState & { pagination: any }>(SharedDataCtx);\n\n  const { object_list = [], page_label, breadcrumbs, pagination } = ctx;\n\n  const q = params.get('q');\n\n  return (\n    <View\n      className=\"p-listview p-1 pb-4\"\n      header={\n        <header className=\"p-listview-header\">\n          <div className=\"miq-container center\">\n            <div className=\"mb-3\">\n              <ProductSearchForm />\n            </div>\n          </div>\n\n          <BreadCrumbs items={breadcrumbs} className=\"mb-2\" />\n\n          {!q && <CategoryLinks showCover />}\n        </header>\n      }\n    >\n      <Views.ProductGridView\n        title={page_label}\n        viewCN=\"miq-container-lg\"\n        items={object_list}\n        renderItem={(i) => <ProductGridItem showName item={i} key={i.meta_slug} />}\n      />\n\n      <div className=\"mt-3\">{pagination && <Pagination {...pagination} />}</div>\n    </View>\n  );\n};\n\nconst ProductGridItem = ({ item, showName, ...props }: { item: ProductType; showName?: boolean }) => {\n  const { url, cover, name, is_oos } = item;\n\n  return (\n    <a href={`${url}`}>\n      <div>\n        <Img.Picture {...cover} className=\"rounded\" style={{ aspectRatio: '4/5', objectFit: 'cover' }} />\n\n        <div className=\"product-grid-info\">\n          {is_oos && <span className=\"bg-red-100 px-1 rounded\">En rupture de stock</span>}\n          <ProductPrice {...item} />\n          {showName && <div className=\"product-grid-name\">{truncateStr(name)}</div>}\n        </div>\n      </div>\n    </a>\n  );\n};\n\nexport default function ShopPublicRoutes() {\n  return (\n    <Routes>\n      <Route path=\":catMetaSlug/:prodMetaSlug/\" element={<ShopProductDetailView />} />\n      <Route path=\":catMetaSlug/\" element={<ShopProductGridView />} />\n      <Route index element={<ShopProductGridView />} />\n    </Routes>\n  );\n}\n"],"names":["ShopProductDetailView","ctx","React","SharedDataCtx","product","similar","breadcrumbs","cover","images","pImages","header","items","className","style","position","top","mobileOnly","body","footer","map","i","ProductGridItem","item","meta_slug","ShopProductGridView","useSearchParams","params","object_list","page_label","pagination","q","get","showCover","title","viewCN","renderItem","showName","url","name","is_oos","href","aspectRatio","objectFit","truncateStr","ShopPublicRoutes","path","element","index"],"sourceRoot":""}