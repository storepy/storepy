{"version":3,"file":"static/js/365.6fd53369.chunk.js","mappings":"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","sources":["../../../../shopy/shopy-shopjs/src/forms.tsx","../../../../shopy/shopy-shopjs/src/services.ts","../../../../shopy/shopy-shopjs/src/components.tsx","../../../../shopy/shopy-shopjs/src/Views.tsx","shop/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport './forms.scss';\n\nimport { getCN } from '@miq/utiljs';\nimport { Button } from '@miq/componentjs';\nimport Form, { Inputs, useForm } from '@miq/formjs';\nimport { CustomerFields, TCart, TCustomer, TOrderItem } from '@shopy/orderjs';\nimport { SizeQuantityField, SizeSelectField } from '@shopy/storejs';\n\nimport { patchOrderItem, postCustomer, postOrderItem } from './services';\nimport { ProductType } from './types';\n\nexport const CartForm = ({ product, cart, ...props }: { product: ProductType; cart?: TCart }) => {\n  const { sizes } = product || {};\n\n  console.log(sizes);\n\n  const form = useForm<TCart>({});\n  return <Form context={form}></Form>;\n};\n\nexport const OrderItemForm = ({\n  product,\n  cart,\n  fields,\n  onSuccess,\n  children,\n  ...props\n}: {\n  product: ProductType;\n  onSuccess: (p: TCart) => void;\n  fields: string[];\n  cart?: TCart;\n  children?: React.ReactNode;\n}) => {\n  let { sizes = [], meta_slug: productSlug } = product || {};\n  const { products = [], items = [] } = cart || {};\n\n  const item = items.find((i: TOrderItem) => i?.product?.meta_slug === productSlug);\n  // console.log(cart, items, item);\n\n  console.log(item);\n\n  const form = useForm<TOrderItem>({\n    quantity: 1,\n    size: item ? item.size : '',\n\n    //# customer\n    first_name: '',\n    last_name: '',\n    email: '',\n    phone: '',\n  });\n\n  const { errors, values } = form;\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (!values.size) {\n      form.setError('size', 'Veuillez choisir votre taille');\n      return;\n    }\n\n    const fd: any = { quantity: values.quantity, size: values.size };\n\n    if (item && item.slug) {\n      patchOrderItem(item.slug!, fd).then(({ data }) => {\n        onSuccess?.(data);\n      });\n    } else {\n      fd['customer'] = form.values;\n      postOrderItem(productSlug!, fd).then(({ data }) => {\n        onSuccess?.(data);\n      });\n    }\n  };\n\n  sizes = sizes?.filter((i) => i.quantity > 0);\n\n  return (\n    <Form context={form} onSubmit={handleSubmit} className=\"order-item-form\">\n      <>\n        {fields.includes('size') && <SizeSelectField required label=\"Taille\" error={errors.size} sizes={sizes} />}\n\n        {fields.includes('quantity') && (\n          <SizeQuantityField\n            error={errors.quantity}\n            max={sizes.find((i) => i.slug === form.values.size)?.quantity || 0}\n            min={1}\n          />\n        )}\n      </>\n\n      {!Boolean(cart?.customer) && form.values.size && (\n        <div className=\"\">\n          <CustomerFields.LName error={errors.lastst_name} />\n          <CustomerFields.FName error={errors.first_name} />\n          <CustomerFields.Phone error={errors.phone} />\n          <CustomerFields.Email error={errors.email} />\n        </div>\n      )}\n\n      {children}\n    </Form>\n  );\n};\n\nexport const CustomerForm = ({ onCancel }: { onCancel?: (p?: any) => void }) => {\n  const form = useForm<TCustomer>({ first_name: 'john', last_name: 'mickowi', email: '', phone: '32443443343' });\n  const sharedProps = {};\n  const { errors } = form;\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    postCustomer(form.values)\n      .then(({ data }) => {\n        console.log(data);\n      })\n      .catch((err) => {\n        form.setErrors(err);\n      });\n  };\n\n  return (\n    <Form context={form} onSubmit={handleSubmit}>\n      <CustomerFields.LName error={errors.lastst_name} {...sharedProps} />\n      <CustomerFields.FName error={errors.first_name} {...sharedProps} />\n      <CustomerFields.Phone error={errors.phone} {...sharedProps} />\n      <CustomerFields.Email error={errors.email} {...sharedProps} />\n\n      <div className=\"d-flex justify-content-between\">\n        <div>{onCancel && <Button onClick={onCancel}>Annuler</Button>}</div>\n        <Form.Submit value={'Envoyer message >>'} />\n      </div>\n    </Form>\n  );\n};\n\nexport const ProductSearchForm = (props: { className?: string }) => {\n  const [search, setSearch] = useSearchParams();\n\n  return (\n    <form {...props} className={getCN(['p-search-form', props.className])}>\n      <Inputs.SearchInput\n        // required\n        value={search.get('q') || ''}\n        onChange={(e) => {\n          setSearch({ q: e.target.value });\n        }}\n        placeholder=\"Cherchez un produit ...\"\n      />\n    </form>\n  );\n};\n","import { HTTP } from '@miq/utiljs';\n\nexport const patchOrderItem = (itemSlug: string, values: { size: string; quantity: number }) => {\n  return HTTP.post(`api/order/item/${itemSlug}/`, { ...values, redirect: true });\n};\n\nexport const postOrderItem = (productSlug: string, values: { size: string; quantity: number }) => {\n  return HTTP.post(`api/order/cart/${productSlug}/`, { ...values, redirect: true });\n};\n\nexport const postCustomer = (\n  values: { first_name: string; last_name: string; phone: string; email?: string },\n  cartSlug?: string\n) => {\n  return HTTP.post('api/order/customer/', { ...values, cartSlug });\n};\n","import * as React from 'react';\n\nimport './components.scss';\n\nimport { getCN } from '@miq/utiljs';\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Img, HorizontalGalleryProps } from '@miq/componentjs';\n\nimport { TAttribute } from './types';\nimport { TPriceData } from '@shopy/storejs';\n\nexport type ProductPriceProps = {\n  retail_price: TPriceData;\n  sale_price?: TPriceData;\n  is_on_sale?: boolean;\n};\n\nexport const ProductPrice: React.FC<ProductPriceProps> = (props) => {\n  const { is_on_sale, retail_price, sale_price } = props;\n  const isSale = is_on_sale && sale_price?.amountWithSymbol != null;\n\n  return (\n    <div className={getCN(['p-price', isSale && 'sale'])}>\n      {isSale && <div className=\"p-price-sale text-danger me-1\">{sale_price.amountWithSymbol}</div>}\n      <div className={getCN(['p-price-retail', isSale && 'text-line-through'])}>{retail_price.amountWithSymbol}</div>\n    </div>\n  );\n};\n\nexport interface ProductGridProps extends React.ComponentPropsWithoutRef<'div'> {}\n\nexport type CategoryLinksProps = {\n  showCover?: boolean | string;\n};\n\nexport const CategoryLinks = (props: CategoryLinksProps) => {\n  const { categories } = React.useContext(SharedDataCtx);\n\n  if (!categories) return null;\n\n  return (\n    <div className=\"p-category-links pb-2\">\n      {categories?.map((cat) => {\n        return (\n          <div className=\"item w-25 w-md-15\" key={cat.meta_slug}>\n            <a href={cat.url} className=\"\" title={cat.name}>\n              {props.showCover && cat?.cover && (\n                <Img.Picture {...cat.cover} src_mobile={cat?.cover?.thumb_sq || cat?.cover?.src_mobile} />\n              )}\n              <div className=\"info\">{cat.name_truncated}</div>\n            </a>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport type ProductImagesHorizontalGalleryProps = HorizontalGalleryProps & {};\n\nexport const ProductImagesHorizontalGallery = (props: ProductImagesHorizontalGalleryProps) => {\n  return <Img.HorizontalGallery {...props} className={getCN(['p-imgs-hgallery', props.className])} />;\n};\n\nexport const Video = ({ src }: { src: string }) => {\n  src = 'https://cdn.accentuate.io/6648217338049/1633654669010/170T_812B_ERB_V2.mp4?v=0';\n\n  return (\n    <video\n      className=\"intrinsic__item lazy entered loaded\"\n      data-src={src}\n      poster=\"\"\n      autoPlay={true}\n      playsInline={false}\n      muted={true}\n      loop={true}\n      data-ll-status=\"loaded\"\n      src={src}\n      width=\"100%\"\n    >\n      <source data-src={src} type=\"video/mp4\" src={src} />\n    </video>\n  );\n};\n\nexport const ProductAttributeList = ({ attributes }: { attributes: TAttribute[] }) => {\n  if (!attributes) return null;\n\n  return (\n    <ul className=\"product-attr-list\">\n      {attributes?.map((attr) => {\n        return (\n          <li className=\"attr\" key={attr.name}>\n            <span className=\"attr-label\">{attr.name} : </span>\n            <span className=\"attr-value\">{attr.value}</span>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n","import * as React from 'react';\n\nimport './views.scss';\n\nimport Form from '@miq/formjs';\nimport { getCN } from '@miq/utiljs';\nimport { TCart } from '@shopy/orderjs';\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Icons, IPaginationProps, IViewProps, Pagination, View } from '@miq/componentjs';\n\nimport { OrderItemForm } from './forms';\nimport { ProductType, ShopyClientProductDetailSharedDataState } from './types';\nimport { ProductAttributeList, ProductGridProps, ProductImagesHorizontalGallery, ProductPrice } from './components';\n\nexport interface IProductDetailViewProps extends IViewProps {\n  product: ProductType;\n  header?: React.ReactNode;\n  images?: React.ReactNode;\n  body?: React.ReactNode;\n  footer?: React.ReactNode;\n  readonly clsPrefix?: string;\n}\n\nexport const ProductDetailView = ({ product, ...props }: IProductDetailViewProps) => {\n  const ctx = React.useContext<ShopyClientProductDetailSharedDataState & { cart?: TCart }>(SharedDataCtx);\n  const { cart, updateKey } = ctx;\n\n  const { clsPrefix = 'miq-shop-product-detail-view', images, children, body, ...rest } = props;\n  const { is_oos, is_pre_sale, is_pre_sale_text } = product;\n\n  const successPath = `./?r=1&source=site&medium=shopbtn&campaign=web`;\n\n  const handleSuccess = (p: TCart) => {\n    updateKey('cart', p);\n    window.location.href = successPath;\n    // navigate(successPath);\n    // if (msg_link) navigate(msg_link, {});\n  };\n\n  return (\n    <View {...rest} className={getCN([clsPrefix, props.className])}>\n      <div className={`${clsPrefix}-grid d-grid grid-md-12`}>\n        {/* media */}\n        <div className={`${clsPrefix}-grid-media span-md-8`}>{images}</div>\n        {/* product */}\n        <div className={`${clsPrefix}-grid-product span-md-4 p-1`}>\n          {is_oos && (\n            <div className=\"my-2\">\n              <span className=\"bg-red-100 px-1 rounded\">En rupture de stock</span>\n            </div>\n          )}\n\n          <>\n            <h1 className=\"p-name fw-lighter\">{product.name}</h1>\n          </>\n\n          <>\n            <ProductPrice {...product} retail_price={product.retail_price!} />\n          </>\n\n          <>\n            {/* <div className=\"mb-3\"><ProductPreSaleDate product={product} /></div> */}\n            {is_pre_sale && is_pre_sale_text && <div className=\"p-presale-text mb-3\">{is_pre_sale_text}</div>}\n          </>\n\n          <div className=\"text-muted\">\n            <p className=\"\">Pour commander, choisissez votre taille et envoyez-nous un message sur whatsapp.</p>\n\n            <p className=\"mb-2\">Nous livrons sur Cotonou 🇧🇯 et alentours.</p>\n          </div>\n\n          <OrderItemForm product={product} cart={cart} fields={['size']} onSuccess={(d: TCart) => handleSuccess(d)}>\n            <Form.Submit className=\"w-submit btn btn-md\">\n              <Icons.Whatsapp />\n              <span className=\"ms-1\">Envoyer message</span>\n            </Form.Submit>\n          </OrderItemForm>\n\n          {/* {whatsapp_number && (\n            <div className=\"mb-3 text-center\">\n              <a\n                href={successPath}\n                className=\"d-block btn btn-md btn-primary px-2 fw-bold\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Acheter\n              </a>\n            </div>\n          )} */}\n\n          {product.description && <div className=\"p-description mb-3\">{product.description}</div>}\n\n          <ul className=\"p-extra my-3\">\n            {product?.has_attributes && (\n              <>\n                <li className=\"p-extra-title mb-1 fw-bold\">Détails</li>\n                <li className=\"p-extra-content\">\n                  <ProductAttributeList attributes={product.attributes || []} />\n                </li>\n              </>\n            )}\n\n            <li className=\"p-extra-title my-1 fw-bold\">Livraison</li>\n            <li className=\"p-extra-content\">\n              <p className=\"mb-1\">\n                Livraison standard gratuite sur Cotonou pour toutes commandes de 50000 CFA et plus.\n              </p>\n              <div className=\"text-sm text-muted\">\n                *Le délai de traitement de la livraison standard pour cet article est estimé à 1 à 5 jours ouvrables.\n              </div>\n              {/* <a href=\".\" className=\"text-underline\">\n                  Consultez notre page Livraison\n                </a> */}\n            </li>\n          </ul>\n\n          {body}\n        </div>\n\n        {children}\n\n        <>\n          <ProductDetailView.HorizontalGallery />\n          <ProductImagesHorizontalGallery />\n        </>\n      </div>\n    </View>\n  );\n};\n\nProductDetailView.HorizontalGallery = ProductImagesHorizontalGallery;\n\nexport interface IProductGridViewProps extends Omit<IViewProps, 'footer'> {\n  items: any[];\n  viewCN?: string;\n  renderItem: (i: any) => JSX.Element | null;\n  pagination?: IPaginationProps;\n}\n\nexport const ProductGridView = (props: IProductGridViewProps) => {\n  const { viewCN, pagination, className, children, items, renderItem, ...rest } = props;\n\n  return (\n    <View {...rest} className={viewCN} footer={pagination && <Pagination {...pagination} />}>\n      <ProductGridView.Grid>{children || items.map((i) => renderItem(i))}</ProductGridView.Grid>\n    </View>\n  );\n};\n\nProductGridView.Grid = ({\n  className = 'grid-2 grid-md-3 grid-lg-4 grid-xl-6 gap-2',\n  children,\n}: ProductGridProps & { children: React.ReactNode; className?: string }) => (\n  <div className={getCN([className, 'miq-product-grid d-grid'])}>{children}</div>\n);\n\nexport interface IProductListViewProps {}\n\nexport const ProductListView: React.FC<IProductListViewProps> = (props) => {\n  return <View {...props} />;\n};\n","import * as React from 'react';\nimport { Routes, Route, useSearchParams } from 'react-router-dom';\n\nimport './shop.scss';\n\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Img, View, BreadCrumbs, Pagination } from '@miq/componentjs';\nimport { CategoryLinks, ProductPrice, ProductSearchForm, ProductType, Views } from '@shopy/shopjs';\nimport { ShopyClientProductDetailSharedDataState, ShopyClientProductListSharedDataState } from '@shopy/shopjs';\n\nimport { truncateStr } from '@miq/utiljs';\n\nconst ShopProductDetailView = () => {\n  const ctx = React.useContext<ShopyClientProductDetailSharedDataState>(SharedDataCtx);\n\n  const { product, similar, breadcrumbs } = ctx;\n\n  const { cover, images } = product;\n  const pImages = [cover!, ...images!];\n\n  return (\n    <>\n      <Views.ProductDetailView\n        product={product}\n        header={<BreadCrumbs items={breadcrumbs} className=\"my-3 px-2\" />}\n        images={\n          <div className=\"p-images mb-2\" style={{ position: 'sticky', top: 0 }}>\n            <Views.ProductDetailView.HorizontalGallery images={pImages} mobileOnly={false} />\n          </div>\n        }\n        body={\n          <div className=\"p-details p-1\">\n            {/* <div className=\"mb-3\">\n              <div className=\"text-md\">Porter avec</div>\n            </div> */}\n          </div>\n        }\n        footer={\n          <>\n            {similar && (\n              <div className=\"p-2\">\n                <p className=\"text-md mb-2\">Vous aimerez peut-être</p>\n\n                <Views.ProductGridView.Grid>\n                  {similar.map((i) => (\n                    <ProductGridItem item={i} key={i.meta_slug} />\n                  ))}\n                </Views.ProductGridView.Grid>\n              </div>\n            )}\n          </>\n        }\n        className=\"product-detail-view\"\n      />\n    </>\n  );\n};\n\nconst ShopProductGridView = () => {\n  const [params] = useSearchParams();\n  const ctx = React.useContext<ShopyClientProductListSharedDataState & { pagination: any }>(SharedDataCtx);\n\n  const { object_list = [], page_label, breadcrumbs, pagination } = ctx;\n\n  const q = params.get('q');\n\n  return (\n    <View\n      className=\"p-listview p-1 pb-4\"\n      header={\n        <header className=\"p-listview-header\">\n          <div className=\"miq-container center\">\n            <div className=\"mb-3\">\n              <ProductSearchForm />\n            </div>\n          </div>\n\n          <BreadCrumbs items={breadcrumbs} className=\"mb-2\" />\n\n          {!q && <CategoryLinks showCover />}\n        </header>\n      }\n    >\n      <Views.ProductGridView\n        title={page_label}\n        viewCN=\"miq-container-lg\"\n        items={object_list}\n        renderItem={(i) => <ProductGridItem showName item={i} key={i.meta_slug} />}\n      />\n\n      <div className=\"mt-3\">{pagination && <Pagination {...pagination} />}</div>\n    </View>\n  );\n};\n\nconst ProductGridItem = ({ item, showName, ...props }: { item: ProductType; showName?: boolean }) => {\n  const { url, cover, name, is_oos } = item;\n\n  return (\n    <a href={`${url}`}>\n      <div>\n        <Img.Picture {...cover} className=\"rounded\" />\n\n        <div className=\"product-grid-info\">\n          {is_oos && <span className=\"bg-red-100 px-1 rounded\">En rupture de stock</span>}\n          <ProductPrice {...item} />\n          {showName && <div className=\"product-grid-name\">{truncateStr(name)}</div>}\n        </div>\n      </div>\n    </a>\n  );\n};\n\nexport default function ShopPublicRoutes() {\n  return (\n    <Routes>\n      <Route path=\":catMetaSlug/:prodMetaSlug/\" element={<ShopProductDetailView />} />\n      <Route path=\":catMetaSlug/\" element={<ShopProductGridView />} />\n      <Route index element={<ShopProductGridView />} />\n    </Routes>\n  );\n}\n"],"names":["OrderItemForm","product","cart","fields","onSuccess","children","sizes","productSlug","meta_slug","products","items","item","find","i","console","log","form","useForm","quantity","size","first_name","last_name","email","phone","errors","values","filter","context","onSubmit","e","preventDefault","fd","slug","itemSlug","HTTP","redirect","patchOrderItem","then","data","postOrderItem","setError","className","includes","required","label","error","max","min","Boolean","customer","lastst_name","ProductSearchForm","props","useSearchParams","search","setSearch","getCN","value","get","onChange","q","target","placeholder","ProductPrice","is_on_sale","retail_price","sale_price","isSale","amountWithSymbol","CategoryLinks","categories","React","SharedDataCtx","map","cat","href","url","title","name","showCover","cover","src_mobile","thumb_sq","name_truncated","ProductImagesHorizontalGallery","ProductAttributeList","attributes","attr","ProductDetailView","ctx","updateKey","clsPrefix","images","body","rest","is_oos","is_pre_sale","is_pre_sale_text","d","window","location","description","has_attributes","HorizontalGallery","ProductGridView","viewCN","pagination","renderItem","footer","Grid","ShopProductDetailView","similar","breadcrumbs","pImages","header","style","position","top","mobileOnly","ProductGridItem","ShopProductGridView","params","object_list","page_label","showName","truncateStr","ShopPublicRoutes","path","element","index"],"sourceRoot":""}