{"version":3,"file":"static/js/367.72f80b9f.chunk.js","mappings":"iNAQMA,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,EAAAA,MAAAA,KAAAA,UAAAA,CASH,OATGA,EAAAA,EAAAA,GAAAA,EAAAA,CAAAA,CAAAA,IAAAA,WAAAA,MACJ,SAASC,GACP,OAAOC,KAAKC,IAAL,UAAYD,KAAKE,MAAjB,aAAmC,CAAEH,OAAAA,GAC7C,2BACD,SAAWA,GACT,OAAOC,KAAKC,IAAL,UAAYD,KAAKE,MAAjB,eAAqC,CAAEH,OAAAA,GAC/C,qBACD,SAAKA,GACH,OAAOC,KAAKC,IAAL,UAAYD,KAAKE,MAAjB,SAA+B,CAAEH,OAAAA,GACzC,OATGD,CAAuBK,EAAAA,IAYhBC,EAAU,WAA0B,IAAzBC,EAAwB,uDAAP,CAAC,EACxC,OAAOC,EAAAA,EAAAA,IAAqCD,EAAM,iBAAkBP,EACrE,C,kKCZc,SAASS,EAAT,GAAyE,IAArCC,EAAoC,EAApCA,UACjD,GAAiBC,EAAAA,EAAAA,MAAVV,GAAP,eACMW,GAAMC,EAAAA,EAAAA,KAAW,kBAAMP,EAAAA,EAAAA,GAAQ,CAAEQ,KAAMJ,IAAaK,SAASd,EAA5C,GAAqD,CAC1Ee,YAAa,CAACf,EAAOE,IAAI,QAASF,EAAOE,IAAI,eAEzCc,EAAM,IAAIC,EAAAA,GAAgBN,EAAIK,KACpC,OAAKA,EAAIE,WAGP,SAAC,UAAD,CACEC,OAAO,SAAC,KAAD,CAAsBC,QAAS,CAAC,QAAS,MAAO,SAAU,UAAW,aAC5EC,KAAK,eACLC,QAAQ,SAAC,MAAD,kBAAgBN,EAAIO,YAApB,IAAgCC,UAAWC,EAAAA,GAAAA,KAAYC,IAAE,KAHnE,UAKE,SAAC,KAAD,CACEC,MAAOX,EAAIW,MACXC,QACE,iCACE,SAAC,QAAD,KACA,SAAC,QAAD,wBACA,SAAC,QAAD,sBACA,SAAC,QAAD,qBACA,SAAC,QAAD,0BAGJC,WAAY,SAACC,GACX,OACE,UAAC,QAAD,YACE,SAAC,QAAD,CAAUC,UAAU,SAApB,UACE,gBAAKA,UAAU,gBAAf,SAAgCD,EAAKE,UAEvC,SAAC,QAAD,UAAWF,EAAKG,aAChB,SAAC,QAAD,UAAWH,EAAKI,YAChB,SAAC,QAAD,UAAWJ,EAAKK,YAChB,SAAC,QAAD,UAAWL,EAAKM,YAPHN,EAAKE,KAUvB,MA/BoB,IAmC5B,C","sources":["../../../../shopy/shopy-storejs/src/insights/utils.ts","../../../../shopy/shopy-storejs/src/insights/views.Product.tsx"],"sourcesContent":["import { StaffModel, StaffService } from '@miq/staffjs';\nimport { URLSearchParamsInit } from 'react-router-dom';\n\nexport type TInsight =\n  | { path: string; ip_count: number; msg_count: number; id_count: number; x_count: number }\n  | { slug: string }\n  | {};\n\nclass InsightService extends StaffService<TInsight> {\n  products(params?: URLSearchParamsInit) {\n    return this.get(`${this._path}products/`, { params });\n  }\n  categories(params?: URLSearchParamsInit) {\n    return this.get(`${this._path}categories/`, { params });\n  }\n  hits(params?: URLSearchParamsInit) {\n    return this.get(`${this._path}hits/`, { params });\n  }\n}\n\nexport const Insight = (data: TInsight = {}) => {\n  return StaffModel<TInsight, InsightService>(data, 'shopy-insights', InsightService);\n};\n\nexport type TInsightInstance = ReturnType<typeof Insight>;\n\nexport type TInsightOrInstance = TInsight | TInsightInstance;\n","import * as React from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport Staff, { HitWindowSearchField } from '@miq/staffjs';\n\nimport { useRequest, ResultsResponse } from '@miq/hookjs';\nimport { Pagination, Table } from '@miq/componentjs';\n\nimport { Insight, TInsight } from './utils';\n\nexport default function StoreInsightsProductView({ storeSlug }: { storeSlug: string }) {\n  const [params] = useSearchParams();\n  const req = useRequest(() => Insight({ slug: storeSlug }).products(params), {\n    refreshDeps: [params.get('page'), params.get('__window')],\n  });\n  const res = new ResultsResponse(req.res);\n  if (!res.isSuccess) return null;\n\n  return (\n    <Staff.View\n      title={<HitWindowSearchField options={['today', 'yst', 'last_7', 'last_14', 'last_30']} />}\n      text=\"Top products\"\n      footer={<Pagination {...res.pagination} component={Staff.Link} to />}\n    >\n      <Table<TInsight>\n        items={res.items}\n        header={\n          <>\n            <Table.Th></Table.Th>\n            <Table.Th>Messages</Table.Th>\n            <Table.Th>Unique</Table.Th>\n            <Table.Th>Total</Table.Th>\n            <Table.Th>External</Table.Th>\n          </>\n        }\n        renderItem={(item) => {\n          return (\n            <Table.Tr key={item.path}>\n              <Table.Td className=\"d-grid\">\n                <div className=\"text-ellipsis\">{item.path}</div>\n              </Table.Td>\n              <Table.Td>{item.msg_count}</Table.Td>\n              <Table.Td>{item.ip_count}</Table.Td>\n              <Table.Td>{item.id_count}</Table.Td>\n              <Table.Td>{item.x_count}</Table.Td>\n            </Table.Tr>\n          );\n        }}\n      />\n    </Staff.View>\n  );\n}\n"],"names":["InsightService","params","this","get","_path","StaffService","Insight","data","StaffModel","StoreInsightsProductView","storeSlug","useSearchParams","req","useRequest","slug","products","refreshDeps","res","ResultsResponse","isSuccess","title","options","text","footer","pagination","component","Staff","to","items","header","renderItem","item","className","path","msg_count","ip_count","id_count","x_count"],"sourceRoot":""}