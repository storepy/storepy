"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[378,644],{3644:function(e,t,n){n.r(t),n.d(t,{Hit:function(){return r._},HitListItem:function(){return l.HitListItem},default:function(){return u},useHitListRequest:function(){return r.j}});var s=n(7497),a=n(866),i=n(9009),r=n(8057),l=n(989),c=s.lazy((function(){return Promise.resolve().then(n.bind(n,989))}));function u(){return(0,i.jsx)(a.Z5,{children:(0,i.jsx)(a.AW,{index:!0,element:(0,i.jsx)(c,{})})})}},8057:function(e,t,n){n.d(t,{_:function(){return v},j:function(){return d}});var s=n(1135),a=n(7411),i=n(2518),r=n(2485),l=n(6113),c=n(265),u=n(4390),o=n(4116),d=function(e){var t=(0,u.lr)(e),n=(0,l.Z)(t,1)[0],s=n.get("__public"),a=n.get("__starts_with"),i=n.get("__q"),r=n.get("__path"),o=n.get("__url"),d=n.get("__ref"),h=n.get("__ip"),m=n.get("__bot"),f=n.get("__ua"),x=n.get("__status"),_=n.get("__dt"),j=n.get("page");return(0,c.QT)((function(){return v({}).list({params:n})}),{refreshDeps:[i,r,o,d,h,m,f,x,_,s,a,j]})},h=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"img",get:function(){var e,t;return null===(e=this.data)||void 0===e||null===(t=e.session_data)||void 0===t?void 0:t.img}},{key:"deleteSlugs",value:function(e){return this.post("".concat(this._endpoint,"batch/"),{slugs:e,action:"destroy"})}},{key:"getSummary",value:function(e){return this.get("".concat(this._endpoint,"summary/"),{params:e})}}]),n}(o.x5),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.eR)(e,"hits",h)}},989:function(e,t,n){n.r(t),n.d(t,{HitListItem:function(){return P},default:function(){return M}});var s=n(8312),a=n(8519),i=n(7497),r=n(715),l=n(265),c=n(5927),u=n(9309),o=n(8057),d=n(6113),h=n(4390),v=n(9009),m=["name","value","children"],f=["hit"],x=["hit","search"],_=["hit","search"],j=["hit","search","children"],N=["hit","search"],p=["hit","search"],g=["hit","search"],b=["hit"],Z=["hit"],k=function(e){var t=(0,h.lr)(),n=(0,d.Z)(t,2),r=n[0],l=n[1],u=e.name,o=e.value,v=e.children,f=(0,s.Z)(e,m);return(0,i.createElement)("button",(0,a.Z)((0,a.Z)({},f),{},{className:(0,c.UT)(["btn-link",r.has(u)&&"bg-red-100",null===e||void 0===e?void 0:e.className]),key:u,onClick:function(){r.has(u)?r.delete(u):o&&r.set(u,o),l(r)}}),v||"".concat(r.has(u)?"[x] ".concat(u):u," x"))},y=function(e){var t,n=e.hit,s=null===n||void 0===n||null===(t=n.session_data)||void 0===t?void 0:t.img;return s?(0,v.jsx)(u.Ei.Square,{src:"".concat(s),className:"rounded"}):null},w=function(e){var t=e.hit,n=(0,s.Z)(e,f);return t.created?(0,v.jsx)("span",{className:null===n||void 0===n?void 0:n.className,title:"Date created",children:new Date(null===t||void 0===t?void 0:t.created).format({dateStyle:"medium",timeStyle:"medium"})}):null},L=function(e){var t=e.hit,n=e.search,a=(0,s.Z)(e,x),i=t.referrer;if(!i)return null;var r="Referrer: ".concat(i);return n?(0,v.jsx)(k,{name:"__ref",value:i,className:null===a||void 0===a?void 0:a.className,title:r,children:(0,c.bI)(i)}):(0,v.jsx)("span",{className:null===a||void 0===a?void 0:a.className,title:r,children:i})},H=function(e){var t=e.hit,n=e.search,a=(0,s.Z)(e,_),i=t.user_agent;if(!i)return null;var r="user agent: ".concat(i);return n?(0,v.jsx)(k,{name:"__ua",value:i,className:null===a||void 0===a?void 0:a.className,title:r,children:(0,c.bI)(i,0,45)}):(0,v.jsx)("span",{className:null===a||void 0===a?void 0:a.className,title:r,children:i})},S=function(e){var t=e.hit,n=e.search,a=e.children,i=(0,s.Z)(e,j),r=t.url;if(!r)return null;var l="url: ".concat(r);return n?(0,v.jsx)(k,{name:"__url",value:"".concat(r),className:null===i||void 0===i?void 0:i.className,title:l,children:a||r}):(0,v.jsx)("span",{className:(0,c.UT)([null===i||void 0===i?void 0:i.className]),title:l,children:a||r})},I=function(e){var t=e.hit,n=e.search,a=(0,s.Z)(e,N),i=t.path;if(!i)return null;var r="path: ".concat(i);return n?(0,v.jsx)(k,{name:"__path",value:"".concat(i),className:null===a||void 0===a?void 0:a.className,title:r,children:i}):(0,v.jsx)("span",{className:(0,c.UT)([null===a||void 0===a?void 0:a.className]),title:r,children:i})},T=function(e){var t=e.hit,n=e.search,a=(0,s.Z)(e,p),i=t.response_status;if(!i)return null;var r="response status",l=(0,c.UT)([i>299?"text-danger":"text-success","bg-white",null===a||void 0===a?void 0:a.className]);return n?(0,v.jsx)(k,{name:"__status",value:"".concat(i),className:l,title:r,children:i}):(0,v.jsx)("span",{className:l,title:r,children:i})},U=function(e){var t=e.hit,n=e.search,a=(0,s.Z)(e,g),i=t.ip,r=t.session_data,l=void 0===r?{}:r,c=t.customer_data,u=void 0===c?{}:c,o=l||{},d=o.username,h=o._cus,m=null!==u&&void 0!==u&&u.first_name?"".concat(null===u||void 0===u?void 0:u.first_name," ").concat(null===u||void 0===u?void 0:u.last_name):null;d&&(d="@".concat(d));var f=m||h||d||i,x="user: ".concat(f);return n?(0,v.jsx)(k,{name:"__ip",value:i,className:null===a||void 0===a?void 0:a.className,title:x,children:f}):(0,v.jsx)("span",{className:null===a||void 0===a?void 0:a.className,title:x,children:f})},D=function(e){var t=e.hit,n=(0,s.Z)(e,b),a=((null===t||void 0===t?void 0:t.session_data)||{})._cart;return a?(0,v.jsx)("a",{href:"/staff/sales/cart/".concat(a,"/"),className:null===n||void 0===n?void 0:n.className,target:"_blank",children:"view cart"}):null},E=function(e){var t=e.hit,n=((0,s.Z)(e,Z),t.parsed_data),a=void 0===n?{}:n,i=["path","url","sdt","atc"];return(0,v.jsx)(v.Fragment,{children:Object.entries(a).map((function(e){var t=(0,d.Z)(e,2),n=t[0],s=t[1],a=void 0===s?"":s;return n&&a?i.includes(n)?null:(0,v.jsxs)("span",{className:"text-sm text-muted me-1 bg-blue-50 rounded",title:a,children:[n,": ",(0,c.bI)(a)]},(0,c.Vj)()):null}))})},V=n(1187),C=["hit"],q=[{label:"Views",link:{to:"."}},{label:"Bots",link:{to:"./?__bot=1"}},{label:"Errors",link:{to:"./?__err=1"}}];function M(){(0,l.jr)("Hits - Analytics");var e=u.Zv.useView(),t=(0,o.j)({__public:"1"}),n=t.res;if(t.loading)return(0,v.jsx)(u.gb,{});var s=new c.HM(n);return s.isSuccess?(0,v.jsx)(u.Zv,{context:e,children:(0,v.jsx)(r.ZP.View,{title:(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(V.f9,{navLinks:q})}),footer:(0,v.jsx)(u.tl,(0,a.Z)((0,a.Z)({},s.data),{},{component:r.ZP.Link,to:!0})),children:(0,v.jsx)(u.Zv.List,{className:"text-sm",itemCN:"border-1 rounded p-1 mb-1",items:s.items,renderItem:function(e){var t=e.data;return(0,v.jsx)(P,{hit:t})}})})}):null}var P=function(e){var t=e.hit,n=(0,s.Z)(e,C);return(0,v.jsxs)("div",{className:(0,c.UT)(["d-flex",null===n||void 0===n?void 0:n.className]),children:[(0,v.jsx)("div",{style:{width:48,minWidth:48},children:(0,v.jsx)(y,{hit:t})}),(0,v.jsxs)("div",{className:"d-grid ms-1",children:[(0,v.jsxs)("div",{className:"text-ellipsis",children:[(0,v.jsx)(U,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(D,{hit:t,className:"me-1 bg-green-100"})," | ",(0,v.jsx)(w,{time:!0,hit:t,className:"me-1"})]}),(0,v.jsxs)("div",{className:"text-ellipsis",children:[(0,v.jsx)(T,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(I,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(S,{search:!0,hit:t,className:"bg-white color-blue-400",children:" \xab url \xbb "}),(0,v.jsxs)("div",{className:"text-muted",title:t.user_agent,children:[(0,v.jsx)(H,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(L,{search:!0,hit:t})]})]}),(0,v.jsx)("div",{className:"",children:(0,v.jsx)(E,{hit:t})})]})]})}},6378:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var s=n(622),a=n(6113),i=(n(7497),n(4089)),r=n(265),l=n(5927),c=n(866),u=n(4390),o=n(9514),d=n(4181),h=n(3644),v=n(9309),m=n(9009);function f(){var e,t,n=(0,c.UO)().libSlug,f=(0,u.lr)(),x=(0,a.Z)(f,1)[0],_=(0,i.cI)({}),j=(0,s.Z)(x.keys()).length,N=(0,r.QT)((function(){return(0,d.L)({slug:n}).hitList(x)}),{refreshDeps:[n,j],onSuccess:function(e){e.data},onError:function(e){e.response}}),p=N.res,g=N.loading,b=(0,r.QT)((function(){return(0,d.L)({slug:n}).retrieve()}),{refreshDeps:[n],onSuccess:function(e){var t=e.data;return _.setValues(t)},onError:function(e){e.response}}).res,Z=new l.HM(b);if(!Z.isSuccess)return null;var k=(0,d.L)(Z.data),y=k.name;return(0,m.jsxs)(o.Z,{back:"../",title:k.name,text:"p/".concat(y,"/"),children:[(0,m.jsx)("div",{}),(0,m.jsx)("div",{className:"",children:g?(0,m.jsx)(v.gb,{}):null===(e=new l.HM(p))||void 0===e||null===(t=e.items)||void 0===t?void 0:t.map((function(e){return(0,m.jsx)(h.HitListItem,{hit:e,className:"mb-2"},e.slug)}))})]})}}}]);
//# sourceMappingURL=378.acda6635.chunk.js.map