"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[44],{324:function(e,r,n){n.d(r,{CB:function(){return m},V5:function(){return v}});var t=n(8519),i=n(8312),s=(n(2411),n(2145)),a=n(5603),c=n(2898),l=n(8136),o=["instance","fields","children"],u=["onSuccess","onError","onWillSubmit"],d=["label","error"],m=function(e){var r=(0,a.cI)({name:""});return(0,l.jsxs)(x,{context:r,onSubmit:function(n){return n.preventDefault(),(0,c.D)().create(r.values).then((function(r){var n;return null===e||void 0===e||null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,r)})).catch((function(n){var t;r.handleError(n),null===e||void 0===e||null===(t=e.onError)||void 0===t||t.call(e,n)}))},children:[(0,l.jsx)("div",{className:"",children:(0,l.jsx)(x.NameField,{error:r.errors.name})}),(0,l.jsx)("div",{className:"my-3",children:(0,l.jsx)(a.ZP.Submit,{value:"Save category",className:"btn btn-primary"})})]})},v=function(e){var r,n,a,c=e.instance,d=void 0===c?(0,s.q9)("Category instance"):c,m=e.fields,v=void 0===m?[]:m,p=e.children,j=(0,i.Z)(e,o),f=j.onSuccess,h=j.onError,g=j.onWillSubmit,b=(0,i.Z)(j,u),S=b.context;return(0,l.jsxs)(x,(0,t.Z)((0,t.Z)({},b),{},{onSubmit:function(e){e.preventDefault(),null===g||void 0===g||g();var r={};return v.forEach((function(e){var n=S.values[e];null!=n&&(r[e]=n)})),d.update(r).then((function(e){return null===f||void 0===f?void 0:f(e)})).catch((function(e){var r;return h?h(e):null===S||void 0===S||null===(r=S.handleError)||void 0===r?void 0:r.call(S,e)}))},children:[v.includes("name")&&(0,l.jsx)(x.NameField,{label:"Nom de la cat\xe9gorie",error:null===S||void 0===S||null===(r=S.errors)||void 0===r?void 0:r.name,text:"Ajoutez un nom qui d\xe9crit cette cat\xe9gorie.\nNous recommandons 65 caract\xe8res au max."}),v.includes("description")&&(0,l.jsx)(x.DescriptionField,{label:"Description",error:null===S||void 0===S||null===(n=S.errors)||void 0===n?void 0:n.description,text:"D\xe9crivez cet cat\xe9gorie."}),v.includes("position")&&(0,l.jsx)(x.PositionField,{label:"Position",error:null===S||void 0===S||null===(a=S.errors)||void 0===a?void 0:a.position}),p]}))},x=function(e){return(0,l.jsx)(a.ZP,(0,t.Z)({},e))};x.NameField=function(e){return(0,l.jsx)(a.wd,(0,t.Z)((0,t.Z)({placeholder:"Entrez le nom de la cat\xe9gorie ..."},e),{},{required:!0}))},x.DescriptionField=function(e){return(0,l.jsx)(a.F$,(0,t.Z)({},e))},x.PositionField=function(e){var r=e.label,n=e.error,s=(0,i.Z)(e,d);return(0,l.jsx)(a.ZP.Field,{label:r,error:n,children:(0,l.jsx)(a.ZP.Text,(0,t.Z)({name:"position",type:"number",min:0},s))})}},2898:function(e,r,n){n.d(r,{D:function(){return u}});var t=n(8519),i=n(1135),s=n(7411),a=n(2518),c=n(2485),l=n(1096),o=function(e){(0,a.Z)(n,e);var r=(0,c.Z)(n);function n(){return(0,i.Z)(this,n),r.apply(this,arguments)}return(0,s.Z)(n,[{key:"publish",value:function(){return this.update({is_published:!0})}},{key:"unpublish",value:function(){return this.update({is_published:!1})}}]),n}(l.x5),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.dt_published;return r&&(r=new Date(r)),(0,l.eR)((0,t.Z)((0,t.Z)({},e),{},{dt_published:r}),"categories",o)}},5044:function(e,r,n){n.r(r),n.d(r,{default:function(){return j}});var t=n(8519),i=n(6520),s=n(1096),a=n(5603),c=n(2145),l=n(2134),o=n(2379),u=n(6574),d=n(9097),m=n(2898),v=n(324),x=n(8136),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:e.name||"",description:e.description||"",is_published:e.is_published||!1,meta_title:e.meta_title||"",meta_slug:(null===e||void 0===e?void 0:e.meta_slug)||"",meta_description:(null===e||void 0===e?void 0:e.meta_description)||""}};function j(){var e=(0,i.UO)().catSlug,r=(0,a.cI)(p()),n=(0,l.QT)((function(){return(0,m.D)({slug:e}).retrieve()}),{refreshDeps:[e],onSuccess:function(e){var n=e.data;return r.setValues(p(n))},onError:function(e){e.response}}),t=n.res,o=n.updateData,d=new c.HM(t);if(!d.isSuccess)return null;var j=(0,m.D)(d.data),h=function(e){var r=e.data;return o(r)},g=r.errors;return(0,x.jsx)(s.ZP.View,{title:"Modifier cette cat\xe9gorie",back:"../",requiredPerms:["store.change_category"],className:"cat-staff-update-view",children:(0,x.jsxs)("div",{className:"d-grid grid-md-4",children:[(0,x.jsx)("div",{className:"p-md-1",children:(0,x.jsx)("div",{className:"p-1",children:(0,x.jsx)(f,{instance:j,updateData:o})})}),(0,x.jsxs)("div",{className:"span-md-3 span-lg-2",children:[(0,x.jsx)(s.ZP.Section,{title:"Details",children:(0,x.jsx)(v.V5,{context:r,instance:j,fields:["name","description"],onSuccess:h,children:(0,x.jsx)("div",{className:"d-flex justify-content-center",children:(0,x.jsx)(a.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3 min-w-25"})})})}),(0,x.jsx)(s.ZP.Section,{title:"SEO",children:(0,x.jsxs)(v.V5,{context:r,instance:j,fields:["meta_title","meta_description","meta_slug"],onSuccess:h,children:[(0,x.jsx)(a.lm,{error:g.meta_title}),(0,x.jsx)(a.uV,{error:g.meta_slug}),(0,x.jsx)(a.bA,{error:g.meta_description}),(0,x.jsx)("div",{className:"d-flex justify-content-center",children:(0,x.jsx)(a.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3 min-w-25"})})]})})]}),(0,x.jsx)("div",{className:"span-lg-1",children:(0,x.jsx)("div",{style:{top:0,position:"sticky"},children:j.is_published?(0,x.jsx)(u.Ko,{instance:j,onSuccess:function(e){var r=e.data;return o(r)},children:"D\xe9publier cette cat\xe9gorie"}):(0,x.jsx)(u.H5,{instance:j,onSuccess:function(e){var r=e.data;return o(r)},onError:function(e){return r.handleError(e)},children:"Publier cette cat\xe9gorie"})})})]})})}var f=function(e){var r=e.updateData,n=e.instance,i=(0,a.cI)({view:"src"}),c=s.ZP.Img((null===n||void 0===n?void 0:n.cover_data)||{});if(null===c||void 0===c||!c.slug)return(0,x.jsx)("div",{className:"d-flex align-items-center justify-content-center flex-column text-center border-1 rounded p-3",children:(0,x.jsx)(s.CD,{onSuccess:function(e){var t=e.data;n.update({cover:t.slug}).then((function(e){var n=e.data;return r(n)})).catch((function(e){}))},label:"Ajouter une image",className:"btn-primary-3 btn-md"})});var l=(0,d.ex)(i.values.view);return(0,x.jsx)(a.ZP,{context:i,className:"p-cover-update-form",children:(0,x.jsx)(s.ZP.Section,{border:!0,title:(0,x.jsx)(s.RC,{onSuccess:function(){return r({cover_data:null,cover:null})},instance:c,className:"btn-danger-3",children:(0,x.jsx)(o.PJ.rF,{})}),actions:(0,x.jsx)(s.K7,{required:!0,name:"view"}),className:"p-image-card",children:(0,x.jsx)(s.Cz,{instance:c,field:i.values.view,onSuccess:function(e){var n=e.data;return r({cover:n.slug,cover_data:n})},children:(0,x.jsx)(l,(0,t.Z)({},c))})})})}},9097:function(e,r,n){n.d(r,{wQ:function(){return D},W2:function(){return E},EJ:function(){return w},CW:function(){return F},ex:function(){return C}});var t=n(8312),i=n(8519),s=n(6009),a=n(2379),c=n(5603),l=n(1096),o=n(2411),u=n(8136),d=["data","productInstance"],m=["productInstance"],v=["label","text","error","placeholder"],x=["label","text","error","placeholder"],p=["data","productInstance"],j=["onSuccess","onError"],f=function(e){var r=e.data,n=e.productInstance,i=(0,t.Z)(e,d),s=(0,c.cI)({name:r.name||"",value:r.value||""});if(null===r||void 0===r||!r.slug||null===n||void 0===n||!n.slug)return null;var a=i.onSuccess,l=i.onError;return(0,u.jsx)(c.ZP,{context:s,onSubmit:function(e){e.preventDefault(),n.patchAttribute(r.slug,s.values).then((function(e){return null===a||void 0===a?void 0:a(e)})).catch((function(e){return s.handleError(e),null===l||void 0===l?void 0:l(e)}))},children:(0,u.jsxs)("div",{className:"d-grid grid-md-6 gap-1",children:[(0,u.jsx)("div",{className:"span-md-2",children:(0,u.jsx)(b,{error:s.errors.name})}),(0,u.jsx)("div",{className:"span-md-3",children:(0,u.jsx)(S,{error:s.errors.value,className:""})}),(0,u.jsxs)("div",{className:"span-md-1",children:[(0,u.jsx)(c.ZP.Submit,{value:"Save",className:"btn-primary-2 me-2"}),(0,u.jsx)(Z,{productInstance:n,data:r,onSuccess:a,onError:l})]})]})})},h={name:"",value:""},g=function(e){var r=e.productInstance,n=(0,t.Z)(e,m),i=(0,c.cI)(h);return null!==r&&void 0!==r&&r.slug?(0,u.jsx)(c.ZP,{context:i,onSubmit:function(e){e.preventDefault(),r.postAttribute(i.values).then((function(e){var r;return i.setValues(h),null===n||void 0===n||null===(r=n.onSuccess)||void 0===r?void 0:r.call(n,e)})).catch((function(e){var r;return i.handleError(e),null===n||void 0===n||null===(r=n.onError)||void 0===r?void 0:r.call(n,e)}))},children:(0,u.jsxs)("div",{className:"d-grid grid-md-6 gap-1",children:[(0,u.jsx)("div",{className:"span-md-2",children:(0,u.jsx)(b,{error:i.errors.name})}),(0,u.jsx)("div",{className:"span-md-3",children:(0,u.jsx)(S,{error:i.errors.value,className:""})}),(0,u.jsx)("div",{className:"span-md-1",children:(0,u.jsx)(c.ZP.Submit,{value:"Save",className:"btn-primary-2"})})]})}):null},b=function(e){var r=e.label,n=e.text,s=e.error,a=e.placeholder,l=void 0===a?"Entrez le nom de l'attribut ...":a,o=(0,t.Z)(e,v);return(0,u.jsx)(c.ZP.Field,{label:r,text:n,error:s,children:(0,u.jsx)(c.ZP.Text,(0,i.Z)((0,i.Z)({},o),{},{required:!0,name:"name",placeholder:l,maxLength:30,minLength:2}))})},S=function(e){var r=e.label,n=e.text,s=e.error,a=e.placeholder,l=void 0===a?"Entrez la valuer de l'attribut ...":a,o=(0,t.Z)(e,x);return(0,u.jsx)(c.ZP.Field,{label:r,text:n,error:s,children:(0,u.jsx)(c.ZP.Text,(0,i.Z)((0,i.Z)({},o),{},{required:!0,name:"value",placeholder:l,maxLength:99,minLength:2}))})},Z=function(e){var r=e.data,n=e.productInstance,s=(0,t.Z)(e,p);if(null===r||void 0===r||!r.slug||null===n||void 0===n||!n.slug)return null;var c=s.onSuccess,l=s.onError,o=(0,t.Z)(s,j);return(0,u.jsx)(a.pu,(0,i.Z)((0,i.Z)({},o),{},{renderHeader:function(){return(0,u.jsx)("div",{children:"Supprimer un attribut"})},renderFooter:function(e){var t=e.setOpen;return(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,u.jsx)(a.zx,{onClick:function(){return t(!1)},children:"Annuler"}),(0,u.jsx)(a.zx,{onClick:function(){return n.deleteAttribute(r.slug).then((function(e){return t(!1),null===c||void 0===c?void 0:c(e)})).catch((function(e){return null===l||void 0===l?void 0:l(e)}))},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,u.jsxs)("div",{className:"p-3",children:["Are you sure you want to delete this attribute:",(0,u.jsx)("div",{className:"fw-bold",children:r.name})]})},className:"attr-delete-button btn-danger-3",children:(0,u.jsx)(a.PJ.rF,{})}))},_=n(421),N=n(5223),P=n(8430),y=["img","actions"],D=function(e){var r=e.form,n=e.instance,t=e.categories,i=e.onUpdate,s=r.errors,a=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(N.HG.NameField,{label:"Nom",error:s.name,text:"Ajoutez un nom qui d\xe9crit cet article. Les noms peuvent contenir jusqu\u2019\xe0 99 caract\xe8res.\nNous recommandons 65 caract\xe8res au max."}),(0,u.jsxs)("div",{className:"d-grid grid-md-2 gap-1",children:[(0,u.jsx)(N.HG.CategoryField,{label:"Cat\xe9gorie",categories:t,error:s.category}),(0,u.jsx)(N.HG.RetailPriceField,{label:"Prix",error:s.retail_price})]}),(0,u.jsx)(N.HG.PresaleCheckboxField,{label:"Pr\xe9-vente",error:s.is_pre_sale}),r.values.is_pre_sale&&(0,u.jsx)(N.HG.PresaleTextField,{text:"Ajouter un text de pr\xe9-vente.(facultatif)",error:s.is_pre_sale_text}),(0,u.jsx)(N.HG.OnSaleCheckboxField,{label:"Cet article est en solde",error:s.is_on_sale}),r.values.is_on_sale&&(0,u.jsx)(N.HG.SalePriceField,{label:"Prix r\xe9duit",error:s.sale_price}),(0,u.jsx)(N.HG.DescriptionField,{label:"Description",error:s.description,text:"Ajoutez les caract\xe9ristiques uniques qui d\xe9crivent cet article."}),(0,u.jsx)("div",{className:"my-4",children:(0,u.jsx)(N.HG.OosCheckboxField,{error:s.is_oos})}),(0,u.jsx)("div",{className:"my-4",children:(0,u.jsx)(N.HG.IsExplicitCheckboxField,{error:s.is_explicit})})]});return(0,u.jsxs)(l.ZP.Section,{children:[(0,u.jsx)(N.Eh,{context:r,instance:n,fields:["name","category","description","retail_price","is_pre_sale","is_pre_sale_text","is_pre_sale_dt","is_on_sale","sale_price","is_oos","is_explicit"],onSuccess:function(e){var r=e.data;return i(r)},children:(0,u.jsx)(l.ZP.Section,{border:!0,title:"Details",text:"Modifier les informations de ce produit.",footer:(0,u.jsx)("div",{className:"d-flex justify-content-center",children:(0,u.jsx)(c.ZP.Submit,{value:"Sauvegarder",className:"btn-primary min-w-25"})}),children:a})}),(0,u.jsx)(l.ZP.Section,{border:!0,title:"Seo",children:(0,u.jsxs)(N.Eh,{context:r,instance:n,fields:["meta_title","meta_description","meta_slug"],onSuccess:function(e){var r=e.data;return i(r)},children:[(0,u.jsx)(c.lm,{error:s.meta_title}),(0,u.jsx)(c.uV,{error:s.meta_slug}),(0,u.jsx)(c.bA,{error:s.meta_description}),(0,u.jsx)("div",{className:"d-flex justify-content-center",children:(0,u.jsx)(c.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3 min-w-25"})})]})})]})},E=function(e){var r=e.instance,n=e.onUpdate,t=o.useState(!1),i=(0,s.Z)(t,2),c=i[0],d=i[1],m=o.useState(!1),v=(0,s.Z)(m,2),x=v[0],p=v[1];return(0,u.jsx)(l.ZP.Section,{title:"Inventory",children:(0,u.jsxs)("div",{className:"d-grid grid-md-3 gap-1",children:[(0,u.jsxs)("div",{className:"span-md-2",children:[(0,u.jsxs)(l.ZP.Section,{title:"Tailles",text:"Ajouter des tailles",actions:(0,u.jsx)(a.zx,{onClick:function(){return p(!x)},className:"btn-primary-3",children:"Ajouter une taille"}),children:[x&&(0,u.jsx)(l.ZP.Section,{text:"Ajouter une taille",children:(0,u.jsx)(P.T9,{productInstance:r,onSuccess:function(e){var r=e.data;return n(r)}})}),r.sizes.map((function(e){return(0,u.jsx)(P.dh,{data:e,productInstance:r,onSuccess:function(e){var r=e.data;return n(r)}},e.slug)}))]}),(0,u.jsxs)(l.ZP.Section,{title:"Attributs",actions:(0,u.jsx)(a.zx,{onClick:function(){return d(!c)},className:"btn-primary-3",children:"Ajouter un attribut"}),children:[c&&(0,u.jsx)(l.ZP.Section,{text:"Ajouter un attribut au produit.",children:(0,u.jsx)(g,{productInstance:r,onSuccess:function(e){var r=e.data;return n(r)}})}),r.attributes.map((function(e){return(0,u.jsx)("div",{className:"mb-1",children:(0,u.jsx)(f,{data:e,productInstance:r,onSuccess:function(e){var r=e.data;return n(r)}})},e.slug)}))]})]}),(0,u.jsx)("div",{className:"mt-3"})]})})},F=function(e){var r=e.instance,n=e.listRes,t=e.navigate;return(0,u.jsx)(l.ZP.Section,{title:"Settings",children:(0,u.jsx)(l.ZP.Section,{title:"Supprimer ce produit",actions:(0,u.jsx)(_.sq,{instance:r,onSuccess:function(){return n.refresh(),t(e.back)},onError:function(e){404===e.status&&t("../")}})})})},w=function(e){var r=e.instance,n=e.onUpdate,t=r.cover_data;return(0,u.jsx)(l.ZP.Section,{title:"Media",actions:(0,u.jsx)(_.n9,{productInstance:r,onSuccess:function(e){return null===n||void 0===n?void 0:n(e.data)}}),children:(0,u.jsxs)("div",{className:"d-grid grid-md-3 grid-lg-4 gap-2",children:[(0,u.jsx)(I,(0,i.Z)((0,i.Z)({},e),{},{img:(0,l.pB)(t),onDeleteSuccess:function(){return n({cover_data:null,cover:null})}})),r.images_data.map((function(t){var s=(0,l.pB)(t);return(0,o.createElement)(k,(0,i.Z)((0,i.Z)({},e),{},{img:s,actions:(0,u.jsx)(l.ZP.Button,{onClick:function(){return r.swapCover(s.slug).then((function(e){var r=e.data;return n(r)}))},children:"Set as cover"}),onDeleteSuccess:function(){return n({images_data:r.images_data.filter((function(e){return e.slug!==s.slug})),images:r.images.filter((function(e){return e!==s.slug}))})},key:s.slug}))}))]})})},C=function(e){switch(e){case"mobile":return l.pB.Mobile;case"square":return l.pB.Square;case"thumb":return l.pB.Thumb;case"picture":return l.pB.Picture;default:return l.pB.Image}},I=function(e){var r=e.img,n=e.onUpdate,t=e.instance,s=(0,c.cI)({view:"src"});if(!r.slug)return(0,u.jsxs)("div",{className:"p-cover-add-btn d-flex align-items-center justify-content-center flex-column text-center border-1 rounded p-3",children:[(0,u.jsx)("p",{className:"text-sm text-muted mb-3",children:"Ce produit n'a pas d'image principale"}),(0,u.jsx)(l.CD,{onSuccess:function(e){var r=e.data;t.update({cover:r.slug}).then((function(e){var r=e.data;return n(r)})).catch((function(e){}))},label:"Ajouter une image",className:"btn-primary-3 btn-md"})]});var a=C(s.values.view);return(0,u.jsx)(c.ZP,{context:s,className:"p-cover-update-form",children:(0,u.jsx)(l.ZP.Section,{border:!0,title:(0,u.jsx)(A,(0,i.Z)((0,i.Z)({},e),{},{img:r})),actions:(0,u.jsx)(l.K7,{required:!0,name:"view"}),className:"p-image-card",children:(0,u.jsx)(l.Cz,{instance:r,field:s.values.view,onSuccess:function(e){var r=e.data;return n({cover:r.slug,cover_data:r})},children:(0,u.jsx)(a,(0,i.Z)({},r))})})})},k=function(e){var r=e.img,n=e.actions,s=(0,t.Z)(e,y);return(0,u.jsx)(l.ZP.Section,{border:!0,title:(0,u.jsx)(A,(0,i.Z)((0,i.Z)({},s),{},{img:r})),actions:n,className:"p-image-card",children:(0,u.jsx)(l.pB.Image,(0,i.Z)({},r))})},A=function(e){var r=e.img,n=e.onDeleteSuccess;return r&&r.slug?(0,u.jsx)(l.RC,{onSuccess:n,instance:r,className:"btn-danger-3",children:(0,u.jsx)(a.PJ.rF,{})}):null}}}]);
//# sourceMappingURL=44.119b3a5b.chunk.js.map