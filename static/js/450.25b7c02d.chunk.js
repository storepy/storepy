"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[450],{8450:function(e,t,i){i.r(t),i.d(t,{default:function(){return G}});var r=i(8312),n=i(6113),s=i(8519),a=i(7497),l=i(4390),o=i(866),d=i(243),c=i(715),u=i(4089),p=i(265),_=i(9544),x=i(5927),b=i(3830),m=i(6012),f=i(4980),v=i(208),j=i(761),h=i(974),Z=i(9009),w=window.i18n;function g(e){var t=e.form,i=e.instance,r=e.onUpdate,n=t.errors;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"border-bottom mb-4",children:(0,Z.jsx)(y,(0,s.Z)({},e))}),(0,Z.jsx)(c.ZP.Section,{title:w(d.Z,"SeoTab.title"),children:(0,Z.jsxs)(h.Eh,{context:t,instance:i,fields:["meta_title","meta_description","meta_slug"],onSuccess:function(e){var t=e.data;return r(t)},children:[(0,Z.jsx)(u.lm,{error:n.meta_title}),(0,Z.jsx)(u.uV,{error:n.meta_slug}),(0,Z.jsx)(u.bA,{error:n.meta_description}),(0,Z.jsx)("div",{className:"d-flex justify-content-center",children:(0,Z.jsx)(u.ZP.Submit,{value:w(d.Z,"Btn.saveLabel"),className:"btn-primary-3 btn-md min-w-25 fw-bold"})})]})})]})}var S=["name","category","description","retail_price","is_pre_sale","is_pre_sale_text","is_pre_sale_dt","is_on_sale","sale_price","is_oos","is_explicit"],y=function(e){var t=e.form,i=e.instance,r=e.categories,n=e.onUpdate,a=t.errors,l={title:w(d.Z,"InfoTab.title"),text:w(d.Z,"InfoTab.text")};return(0,Z.jsx)(h.Eh,{context:t,instance:i,fields:S,onSuccess:function(e){var t=e.data;return n(t)},children:(0,Z.jsxs)(c.ZP.Section,(0,s.Z)((0,s.Z)({},l),{},{footer:(0,Z.jsx)("div",{className:"d-flex justify-content-center",children:(0,Z.jsx)(u.ZP.Submit,{value:w(d.Z,"Btn.saveLabel"),className:"btn-md btn-primary min-w-25 fw-bold"})}),children:[(0,Z.jsx)(h.HG.NameField,{error:a.name,label:window.i18n(j.Z,"NField.label"),text:window.i18n(j.Z,"NField.text")}),(0,Z.jsxs)("div",{className:"d-grid grid-md-2 gap-1",children:[(0,Z.jsx)(h.HG.CategoryField,{error:a.category,categories:r,label:window.i18n(j.Z,"CatField.label")}),(0,Z.jsx)(h.HG.RetailPriceField,{label:window.i18n(j.Z,"RetailPField.label"),error:a.retail_price})]}),(0,Z.jsx)(h.HG.PresaleCheckboxField,{error:a.is_pre_sale,label:window.i18n(j.Z,"PresaleField.label")}),t.values.is_pre_sale&&(0,Z.jsx)(h.HG.PresaleTextField,{text:window.i18n(j.Z,"PresaleTextField.text"),error:a.is_pre_sale_text}),(0,Z.jsx)(h.HG.OnSaleCheckboxField,{error:a.is_on_sale,label:window.i18n(j.Z,"OnsaleField.label")}),t.values.is_on_sale&&(0,Z.jsx)(h.HG.SalePriceField,{label:window.i18n(j.Z,"SalePField.label"),error:a.sale_price}),(0,Z.jsx)(h.HG.DescriptionField,{error:a.description,label:window.i18n(j.Z,"DField.label"),text:window.i18n(j.Z,"DField.text")}),(0,Z.jsx)("div",{className:"my-4",children:(0,Z.jsx)(h.HG.OosCheckboxField,{error:a.is_oos})}),(0,Z.jsx)("div",{className:"my-4",children:(0,Z.jsx)(h.HG.IsExplicitCheckboxField,{error:a.is_explicit})})]}))})},F=["res","setRes","loading"],T=a.lazy((function(){return i.e(891).then(i.bind(i,2891))})),P=a.lazy((function(){return i.e(837).then(i.bind(i,1837))})),N=a.lazy((function(){return i.e(750).then(i.bind(i,1750))})),k=function(e){return window.i18n(d.Z,e)},H=[].concat(["name","category","description","retail_price","is_pre_sale","is_pre_sale_text","is_pre_sale_dt","is_oos","is_on_sale","sale_price","is_explicit"],["cost","color_group_pk","stage"],["supplier_name","supplier_item_id","supplier_item_sn","supplier_item_category","supplier_item_url","supplier_item_cost","supplier_item_cost_currency","supplier_order_id"],["meta_title","meta_description","meta_slug"]),I={retail_price:0,is_pre_sale:!1,sale_price:0,is_on_sale:!1,is_published:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return H.forEach((function(i){var r,n=null===e||void 0===e?void 0:e[i];null!=n?t[i]=n:t[i]=null!==(r=I[i])&&void 0!==r?r:""})),(0,s.Z)((0,s.Z)({},I),t)};function G(e){var t,i=e.back,a=(0,o.UO)().prodSlug,d=(0,l.lr)(),j=(0,n.Z)(d,1)[0],h=(0,o.s0)(),w=(0,u.cI)(L()),S=(0,p.QT)((function(){return(0,m.Z)({slug:a}).retrieve()}),{refreshDeps:[a],onSuccess:function(e){var t=e.data;document.title="".concat(null===t||void 0===t?void 0:t.name," - Update product"),w.setValues(L(t))},onError:function(e){var t=e.response;if(404===(null===t||void 0===t?void 0:t.status))return h("../")}}),y=S.res,k=(S.setRes,S.loading),H=(0,r.Z)(S,F),I=new x.HM(y);if(!I.isSuccess)return null;if(k)return(0,Z.jsx)(_.gb,{});var G=(0,m.Z)(I.data),A=function(e){H.updateData(e),b.u.update(e)};return(0,Z.jsx)(c.ZP.View,{className:"product-staff-update-view",requiredPerms:["store.change_product"],title:(0,Z.jsx)(v.wP,{data:(0,s.Z)({},G.export())}),back:"".concat((0,x.Xs)(i)).concat("".concat(j)?"?".concat(j):""),actions:G.is_published?(0,Z.jsx)(f.Ko,{instance:G,onSuccess:function(e){var t=e.data;return A(t)},children:"D\xe9publier"}):(0,Z.jsx)(f.H5,{instance:G,onSuccess:function(e){var t=e.data;return A(t)},onFailure:function(e){return w.handleError(e)},children:"Publier"}),children:(0,Z.jsx)(c.ZP.Section,{title:(0,Z.jsx)("div",{className:"mb-1",children:K}),children:(0,Z.jsxs)(_.KZ,{children:[(0,Z.jsx)(_.KZ.Tab,{index:!0,children:(0,Z.jsx)(g,{form:w,instance:G,categories:null===I||void 0===I||null===(t=I.data)||void 0===t?void 0:t.categories,onUpdate:A})}),(0,Z.jsx)(_.KZ.Tab,{value:"media",children:(0,Z.jsx)(T,{instance:G,onUpdate:A})}),(0,Z.jsx)(_.KZ.Tab,{value:"inventory",children:(0,Z.jsx)(N,{instance:G,onUpdate:A})}),(0,Z.jsx)(_.KZ.Tab,{value:"settings",children:(0,Z.jsx)(P,{instance:G,onUpdate:A,to:i})})]})})})}var K=(0,Z.jsxs)("div",{className:"query-buttons",children:[(0,Z.jsx)(_.KZ.Button,{index:!0,target:"__tab",className:"btn-md",children:"Info"}),(0,Z.jsx)(_.KZ.Button,{target:"__tab",value:"media",className:"btn-md",children:k("MediaTab.title")}),(0,Z.jsx)(_.KZ.Button,{target:"__tab",value:"inventory",className:"btn-md",children:k("InventoryTab.title")}),(0,Z.jsx)(_.KZ.Button,{target:"__tab",value:"settings",className:"btn-md",children:k("SettingsTab.title")})]})},243:function(e,t){t.Z={"InfoTab.title":{fr:"D\xe9tails",en:"Details"},"InfoTab.text":{fr:"Modifier les informations de ce produit",en:"Update product's info"},"SeoTab.title":{fr:"Seo",en:"Seo"},"InventoryTab.title":{fr:"Inventaire",en:"Inventory"},"MediaTab.title":{fr:"M\xe9dia",en:"Media"},"SettingsTab.title":{fr:"Param\xe8tres",en:"Settings"},"SettingsTab.deleteSectionTitle":{fr:"Supprimer ce produit",en:"Delete product"},"CreateView.title":{fr:"Ajouter un produit",en:"Add product"},"ListView.title":{fr:"Produits",en:"Products"},"ListView.actionLinkLabel":{fr:"Ajouter",en:"Add product"},"ListView.noItemText":{fr:"Ajouter un produit pour commencer",en:"Add products to your shop to get started"},"ListView.addProductLinkLabel":{fr:"Ajouter un produit",en:"Add a new product"},"Btn.saveLabel":{fr:"Sauvegarder",en:"Save"}}}}]);
//# sourceMappingURL=450.25b7c02d.chunk.js.map