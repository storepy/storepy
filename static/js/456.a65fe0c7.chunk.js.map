{"version":3,"file":"static/js/456.a65fe0c7.chunk.js","mappings":"0TAYe,SAASA,KACtBC,EAAAA,EAAAA,IAAiB,2BAEjB,MAA0BC,EAAAA,UAAe,GAAzC,eAAOC,EAAP,KAAeC,EAAf,KACA,EAIIF,EAAAA,WAAyDG,EAAAA,IAJ7D,IACEC,cAAAA,OADF,MACkB,CAAC,EADnB,EAEEC,EAFF,EAEEA,SACAC,EAHF,EAGEA,UAGF,IAAKD,EAAU,OAAO,SAAC,KAAD,IAEtB,IAAME,GAAOC,EAAAA,EAAAA,GAASJ,GAEtB,OACE,SAAC,UAAD,CACEK,OAAO,SAAC,IAAD,CAAcC,KAAMN,IAC3BO,SAAS,gBACTC,SACE,SAAC,YAAD,CAAcC,QAAS,kBAAMX,GAASD,EAAf,EAAwBQ,MAAM,WAAWK,UAAU,gBAA1E,sBAIFC,KAAK,0BARP,SAUGd,GACC,SAAC,IAAD,CACEe,SAAUT,EACVU,OAAQ,CAAC,aAAc,YAAa,QAAS,SAC7CC,SAAU,YAAkB,IAAfC,EAAc,EAAdA,EAAGC,EAAW,EAAXA,KACdD,EAAEE,iBACFd,EACGe,OAAOF,EAAKG,QACZC,MAAK,SAACC,GACLnB,EAAU,gBAAiBmB,EAAIf,MAC/BR,GAAQ,EACT,IACAwB,OAAM,SAACC,GACNP,EAAKQ,YAAYD,EAClB,GACJ,EAdH,UAgBE,gBAAKb,UAAU,qEAAf,UACE,SAAC,YAAD,CAAae,KAAK,SAASf,UAAU,6BAArC,yBAMJ,iBAAKA,UAAU,yBAAf,WACE,SAACgB,EAAD,CAAuBpB,KAAM,CAAC,KAC9B,SAACqB,EAAD,CAAsBrB,KAAMN,QAKrC,CAED,IAAM2B,EAAuB,SAAC,GAAuC,IAAD,EAApCrB,EAAoC,EAApCA,MAAoC,YAClE,OACE,SAAC,aAAD,CAAeI,UAAU,gBAAzB,UACE,2BACE,gBAAIA,UAAU,OAAd,0BACc,iBAAMA,UAAU,UAAhB,mBAGd,gBAAIA,UAAU,OAAd,WACE,gBAAKA,UAAU,GAAf,6BACA,gBAAIA,UAAU,OAAd,WACE,eAAIA,UAAU,UAAd,gBACA,eAAIA,UAAU,UAAd,sBAIJ,gBAAIA,UAAU,OAAd,4BACgB,iBAAMA,UAAU,UAAhB,mBAGhB,gBAAIA,UAAU,OAAd,kCACsB,iBAAMA,UAAU,UAAhB,gBAA2BJ,QAA3B,IAA2BA,GAA3B,UAA2BA,EAAMsB,0BAAjC,aAA2B,EAA0BC,uBAG3E,eAAInB,UAAU,aAIrB,EAEKgB,EAAwB,SAAC,GAAsC,EAApCpB,MAAoC,YACnE,OACE,SAAC,aAAD,CAAeD,MAAO,YAAaK,UAAU,YAA7C,UACE,kBAGL,C","sources":["../../../../shopy/shopy-salejs/src/customer/views.Update.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport Form from '@miq/formjs';\nimport Staff from '@miq/staffjs';\nimport { Loading } from '@miq/componentjs';\nimport { useDocumentTitle } from '@miq/hookjs';\nimport { SharedDataCtx, TSDState } from '@miq/contextjs';\n\nimport { CustomerForm } from './forms';\nimport { CustomerCard } from './components';\nimport { Customer, TCustomer } from './utils';\n\nexport default function CustomerUpdateView() {\n  useDocumentTitle('Update customer - Sales');\n\n  const [isEdit, setEdit] = React.useState(false);\n  const {\n    customer_data = {},\n    isLoaded,\n    updateKey,\n  } = React.useContext<TSDState<{ customer_data: TCustomer }>>(SharedDataCtx);\n\n  if (!isLoaded) return <Loading />;\n\n  const inst = Customer(customer_data);\n\n  return (\n    <Staff.View\n      title={<CustomerCard data={customer_data} />}\n      headerCN=\"miq-container\"\n      actions={\n        <Staff.Button onClick={() => setEdit(!isEdit)} title=\"Modifier\" className=\"btn-primary-3\">\n          [ Edit ]\n        </Staff.Button>\n      }\n      back=\"/staff/sales/customers/\"\n    >\n      {isEdit ? (\n        <CustomerForm\n          instance={inst}\n          fields={['first_name', 'last_name', 'phone', 'email']}\n          onSubmit={({ e, form }) => {\n            e.preventDefault();\n            inst\n              .update(form.values)\n              .then((res) => {\n                updateKey('customer_data', res.data);\n                setEdit(false);\n              })\n              .catch((err) => {\n                form.handleError(err);\n              });\n          }}\n        >\n          <div className=\"d-flex flex-column justify-content-between align-items-center my-4\">\n            <Form.Submit type=\"submit\" className=\"btn-md btn-primary fw-bold\">\n              Update\n            </Form.Submit>\n          </div>\n        </CustomerForm>\n      ) : (\n        <div className=\"d-grid grid-md-4 gap-1\">\n          <CustomerOrdersSection data={{}} />\n          <CustomerStatsSection data={customer_data} />\n        </div>\n      )}\n    </Staff.View>\n  );\n}\n\nconst CustomerStatsSection = ({ data, ...props }: { data: any }) => {\n  return (\n    <Staff.Section className=\"span-md-2 p-1\">\n      <ul>\n        <li className=\"mb-1\">\n          Dress size: <span className=\"fw-bold\">_</span>\n        </li>\n\n        <li className=\"mb-1\">\n          <div className=\"\">Top categories</div>\n          <ol className=\"ms-4\">\n            <li className=\"fw-bold\">_</li>\n            <li className=\"fw-bold\">_</li>\n          </ol>\n        </li>\n\n        <li className=\"mb-1\">\n          Total orders: <span className=\"fw-bold\">_</span>\n        </li>\n\n        <li className=\"mb-1\">\n          Total amount spent: <span className=\"fw-bold\">{data?.total_amount_spent?.amountWithSymbol}</span>\n        </li>\n\n        <li className=\"mb-1\"></li>\n      </ul>\n    </Staff.Section>\n  );\n};\n\nconst CustomerOrdersSection = ({ data, ...props }: { data: any }) => {\n  return (\n    <Staff.Section title={'Commandes'} className=\"span-md-2\">\n      <p></p>\n    </Staff.Section>\n  );\n};\n"],"names":["CustomerUpdateView","useDocumentTitle","React","isEdit","setEdit","SharedDataCtx","customer_data","isLoaded","updateKey","inst","Customer","title","data","headerCN","actions","onClick","className","back","instance","fields","onSubmit","e","form","preventDefault","update","values","then","res","catch","err","handleError","type","CustomerOrdersSection","CustomerStatsSection","total_amount_spent","amountWithSymbol"],"sourceRoot":""}