"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[472],{472:function(e,i,t){t.r(i),t.d(i,{default:function(){return N}});var s=t(8129),d=t(5037),n=t(1036),r=t(9286);var o=t(8312),l=t(2411),c=t(9650),a=t(6676),v=t(9002),u=t(3896),m=t(9110),h=t(8136),x=["hits","itemKey"],j=["hits"],p=function(e){var i=e.data,t=e.top;return(0,h.jsxs)("div",{className:"d-flex align-items-center",title:"".concat(null===i||void 0===i?void 0:i.name,": ").concat(null===i||void 0===i?void 0:i.count),children:[i.img&&(0,h.jsx)("div",{className:"bg-gray-100 rounded",style:{width:48,maxWidth:48},children:(0,h.jsx)("img",{src:(0,u.wD)(i.img),alt:(0,u.bI)(null===i||void 0===i?void 0:i.name,0,4),className:"rounded",style:{objectFit:"cover",width:"100%",height:"auto",aspectRatio:"1/1"}})}),t&&(0,h.jsxs)("div",{className:"ms-1",children:[(0,h.jsx)("div",{className:"text-ellipsis fw-bold",children:null===i||void 0===i?void 0:i.name}),(0,h.jsxs)("div",{className:"text-muted text-sm",children:[null===i||void 0===i?void 0:i.count," vues"]})]})]})},g=function(e){var i,t=e.hits,l=void 0===t?{}:t,c=e.itemKey,v=void 0===c?"top_products":c,m=(0,o.Z)(e,x).title,j=void 0===m?"":m,g=(null===l||void 0===l?void 0:l[v])||[],b=(i=g,(0,s.Z)(i)||(0,d.Z)(i)||(0,n.Z)(i)||(0,r.Z)()),N=b[0],f=b.slice(1);return(0,h.jsxs)(a.vz,{border:!0,text:j,mainCN:"d-grid gap-2",children:[N&&(0,h.jsx)(p,{top:!0,data:N}),(0,h.jsx)(a.j6,{className:"mt-2",style:{gridAutoColumns:"min-content",gap:6},children:f&&f.map((function(e){return(0,h.jsx)(p,{data:e},(0,u.Vj)())}))})]})},b=function(e){var i=e.hits,t=void 0===i?{}:i,s=((0,o.Z)(e,j),t.views_count),d=void 0===s?0:s,n=t.visitors_count,r=void 0===n?0:n,l=t.sent_message,a=void 0===l?0:l;return(0,h.jsxs)(c.ZP.Section,{title:"Performance",children:[(0,h.jsxs)("div",{className:"d-grid gap-2 mb-3",children:[(0,h.jsxs)("div",{className:"",children:["Messages: ",a]}),(0,h.jsxs)("div",{className:"",children:["Visitors: ",r]}),(0,h.jsxs)("div",{className:"",children:["Page views: ",d]})]}),(0,h.jsxs)("div",{className:"d-grid grid-md-2 gap-2",children:[(0,h.jsx)(g,{hits:t,title:"Top viewed products",itemKey:"top_products"}),(0,h.jsx)(g,{hits:t,title:"Top viewed categories",itemKey:"top_cats"})]})]})};function N(){var e,i,t,s=l.useContext(v.h2);(0,m.jr)("Store");var d=s.isLoaded,n=s.products,r=s.orders,o=s.cats,u=s.shopy_settings,x=s.hits,j=void 0===x?{}:x;return d?(0,h.jsxs)(c.ZP.View,{title:"Commerce",className:"no-bg",back:"/staff/",actions:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(c.ZP.NavLink,{to:"notifications/",className:"btn btn-round btn-secondary-3",title:"Action needed",children:(0,h.jsx)(a.PJ.P_,{})}),(0,h.jsx)(c.ZP.NavLink,{to:"settings/",className:"btn btn-round btn-secondary-3",title:"Shop settings",children:(0,h.jsx)(a.PJ.lk,{})})]}),children:[(0,h.jsx)(c.ZP.Section,{children:(0,h.jsxs)("div",{className:"d-grid grid-2 grid-sm-3 grid-md-4 grid-lg-6",children:[(null===u||void 0===u||null===(e=u.config)||void 0===e?void 0:e.has_suppliers)&&(0,h.jsx)(f,{title:"Supplier Orders",tab:"./",link:{to:"orders/",text:"View all orders",perms:["store.view_supplierorder"]},children:(0,h.jsx)("h3",{children:(null===r||void 0===r?void 0:r.count)||0})}),(0,h.jsx)(f,{title:"Products",tab:"./?tab=products",link:{to:"products",text:"View all products",perms:["store.view_product"]},children:(0,h.jsx)("h3",{children:(null===n||void 0===n?void 0:n.count)||0})}),(0,h.jsx)(f,{tab:"./?tab=categories",title:"Categories",link:{to:"categories",text:"View all categories",perms:["store.view_category"]},children:(0,h.jsx)("h3",{children:(null===o||void 0===o?void 0:o.count)||0})})]})}),(0,h.jsx)(b,{hits:j}),(0,h.jsx)(c.ZP.Section,{title:"Products by category",className:"my-2",children:null===o||void 0===o||null===(i=o.cat_count)||void 0===i||null===(t=i.filter((function(e){return e.category__name})))||void 0===t?void 0:t.map((function(e,i){var t=e.category__name,s=e.count;return(0,h.jsxs)("div",{children:[t,": ",s]},i)}))})]}):null}var f=function(e){var i=e.children,t=e.title,s=e.link,d=e.tab,n=void 0===d?"./":d,r=s.to;return(0,h.jsxs)("div",{className:"card-link mb-3",children:[(0,h.jsxs)(c.ZP.NavLink,{to:n,children:[t&&(0,h.jsx)("div",{className:"card-link-title",children:t}),i]}),(0,h.jsx)(c.ZP.Link,{to:r,requiredPerms:s.perms,children:(null===s||void 0===s?void 0:s.text)&&"".concat(s.text," \xbb")})]})}}}]);
//# sourceMappingURL=472.1cf8232f.chunk.js.map