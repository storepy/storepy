"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[485],{3485:function(e,s,i){i.r(s),i.d(s,{ProductAddForm:function(){return g},default:function(){return N}});var n=i(8519),r=i(8312),t=i(6009),a=(i(2411),i(1408)),l=i(6520),c=i(1096),d=i(2134),o=i(840),u=i(2145),m=i(2379),x=i(6123),j=i(5603),h=i(4113),f=i(8136),v=["res","setRes","loading"],p=["item","onItemClick"];function N(){var e=(0,a.lr)(),s=((0,t.Z)(e,1)[0],(0,l.UO)().cartSlug),i=((0,j.cI)({q:""}),(0,h._P)(void 0,{published:"include",atc:1}).res),n=(0,d.QT)((function(){return(0,o.A)({slug:s}).retrieve()}),{refreshDeps:[s],onError:function(e){e.response}}),p=n.res,N=n.setRes,b=n.loading,Z=((0,r.Z)(n,v),new u.HM(p));if(!Z.isSuccess)return null;if(b)return(0,f.jsx)(m.gb,{});var P=(0,o.A)(Z.data),y=new u.HM(i).items||[];return console.log(Z.data),(0,f.jsxs)(c.ZP.View,{title:"Modifier une commande",children:[(0,f.jsx)(c.ZP.Section,{border:!0,title:"Client",actions:(0,f.jsx)(f.Fragment,{children:"Modifier"}),children:(0,f.jsx)(x.u,{data:P.customer_data})}),(0,f.jsx)(c.ZP.Section,{border:!0,title:"Produits",actions:(0,f.jsx)(f.Fragment,{children:"Ajouter des produits"})}),(0,f.jsxs)("div",{className:"d-grid grid-md-6 gap-2",children:[(0,f.jsx)("div",{className:"span-md-3",children:(0,f.jsx)(c.ZP.Section,{title:"Ajouter des produits",header:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(h.ir,{})}),children:y.filter((function(e){return!P.data.products.includes(e.slug)})).map((function(e){return(0,f.jsx)("div",{className:"",children:(0,f.jsx)(g,{item:e,onItemClick:function(e,s,i){return P.addItem(e.slug,s,i).then((function(e){return N(e),e}))}})},e.slug)}))})}),(0,f.jsx)("div",{className:"span-md-3",children:(0,f.jsx)("div",{className:"",children:(0,f.jsxs)(c.ZP.Section,{border:!0,title:"Panier",actions:P.items.length,footer:(0,f.jsx)(f.Fragment,{children:"Confirmer"}),children:[P.items.map((function(e){var s=e.product,i=e.size,n=e.quantity;return(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("div",{className:"p",children:s.name}),(0,f.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,f.jsx)("span",{className:"",children:i}),(0,f.jsx)("span",{className:"",children:n})]}),(0,f.jsx)("div",{className:""})]},e.slug)})),(0,f.jsxs)("div",{className:"mt-4",children:[(0,f.jsx)("div",{className:"",children:(0,f.jsx)("span",{className:"",children:"Subtotal"})}),(0,f.jsx)("div",{className:"",children:(0,f.jsx)("span",{className:"",children:"Total"})})]})]})})})]})]})}var g=function(e){var s,i=e.item,t=e.onItemClick,a=((0,r.Z)(e,p),(0,j.cI)({quantity:1,size:""}));if(null===i||void 0===i||!i.slug)return null;var l=i.sizes,d=void 0===l?[]:l,o=(i.is_oos,i.category_data,i.cover_data),m=i.name;i.size_count;return(0,f.jsx)(j.ZP,{context:a,onSubmit:function(e){e.preventDefault(),t(i,a.values.size,a.values.quantity).catch((function(e){a.handleError(e)}))},children:(0,f.jsx)(c.ZP.Section,{border:!0,header:(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)("div",{style:{minWidth:34,maxWidth:50},className:"me-1",children:(0,f.jsx)(c.ZP.Img.Thumb,(0,n.Z)((0,n.Z)({src:"src"},o),{},{className:"rounded"}))}),(0,f.jsxs)("div",{className:"flex-1",title:m,children:[(0,f.jsx)("div",{className:"text-ellipsis text-sm",children:(0,f.jsx)("span",{className:"me-1 fw-bold",children:(0,u.bI)(m,0,45)})}),(0,f.jsxs)("div",{className:"d-flex flex-column flex-md-ro justify-content-between",children:[(0,f.jsxs)("div",{className:"d-grid grid-md-2 gap-1 flex-1",children:[(0,f.jsx)(h.D8,{required:!0,sizes:d.filter((function(e){return e.quantity>0})),error:a.errors.size}),(0,f.jsx)(h.PI,{max:(null===(s=d.find((function(e){return e.slug===a.values.size})))||void 0===s?void 0:s.quantity)||0,min:1})]}),(0,f.jsx)("div",{className:"text-right",children:(0,f.jsx)(j.ZP.Submit,{className:"btn btn-primary-2 btn-md fw-bold",children:"Ajouter"})})]})]})]}),actions:(0,f.jsx)(h._S,(0,n.Z)((0,n.Z)({},i),{},{className:"d-flex flex-wrap"})),className:"mb-1"})})}}}]);
//# sourceMappingURL=485.57f2b7a0.chunk.js.map