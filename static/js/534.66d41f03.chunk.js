"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[534],{2534:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var i=t(6009),o=t(2411),r=t(1408),u=t(6520),s=t(2379),a=t(2134),l=t(1096),d=t(8519),c=t(1135),v=t(7411),_=function(){function n(e){(0,c.Z)(this,n),this._data={},this._data=e}return(0,v.Z)(n,[{key:"top_tagged_users",get:function(){var n={};return this.tagged_users.forEach((function(e){var t;n[null===e||void 0===e?void 0:e.id]=(0,d.Z)((0,d.Z)({},e),{},{t_count:((null===(t=n[null===e||void 0===e?void 0:e.id])||void 0===t?void 0:t.t_count)||0)+1})})),Object.values(n).sort((function(n,e){return n.t_count<e.t_count?1:-1}))}},{key:"tagged_users",get:function(){var n=[];return this.posts.forEach((function(e){n=n.concat(e.tagged_users)})),n}},{key:"top_hashtags",get:function(){var n={};return this.hashtags.forEach((function(e){n[e]=(n[e]||0)+1})),Object.entries(n).sort((function(n,e){return n[1]<e[1]?1:-1}))}},{key:"hashtags",get:function(){var n=[];return this.posts.forEach((function(e){n=n.concat(e.hashtags)})),n}},{key:"most_liked_post",get:function(){var n;return null===(n=this.posts.sort((function(n,e){return n.likes_count<e.likes_count?1:-1})))||void 0===n?void 0:n[0]}},{key:"least_liked_post",get:function(){var n;return null===(n=this.posts.sort((function(n,e){return n.likes_count>e.likes_count?1:-1})))||void 0===n?void 0:n[0]}},{key:"most_commented_post",get:function(){var n;return null===(n=this.posts.sort((function(n,e){return(null===n||void 0===n?void 0:n.comments_count)<(null===e||void 0===e?void 0:e.comments_count)?1:-1})))||void 0===n?void 0:n[0]}},{key:"least_commented_post",get:function(){var n;return null===(n=this.posts.sort((function(n,e){return(null===n||void 0===n?void 0:n.comments_count)>(null===e||void 0===e?void 0:e.comments_count)?1:-1})))||void 0===n?void 0:n[0]}},{key:"last_post",get:function(){var n,e=null===(n=this.media)||void 0===n?void 0:n[0];if(e)return new h(e)}},{key:"top_locations",get:function(){var n={};return this.posts.forEach((function(e){var t,i=null===(t=e.location)||void 0===t?void 0:t.slug;Object.keys(n).includes(i)||(n[i]=[]),n[i].push(e)})),Object.values(n).sort((function(n,e){return n.length>e.length?-1:1}))}},{key:"post_schedule",get:function(){var n={};return this.posts.forEach((function(e){var t=e.date,i=null===t||void 0===t?void 0:t.format({weekday:"long"});Object.keys(n).includes(i)||(n[i]=[]),n[i].push(e)})),n}},{key:"posts",get:function(){return this.media.map((function(n){return new h(n)}))}},{key:"avg_likes",get:function(){var n,e=0;return null===(n=this.media)||void 0===n||n.forEach((function(n){var t;e+=null===n||void 0===n||null===(t=n.edge_liked_by)||void 0===t?void 0:t.count})),e/this.media_length}},{key:"avg_comments",get:function(){var n,e=0;return null===(n=this.media)||void 0===n||n.forEach((function(n){var t;e+=null===n||void 0===n||null===(t=n.edge_media_to_comment)||void 0===t?void 0:t.count})),e/this.media_length}},{key:"captions",get:function(){var n;return null===(n=this.media)||void 0===n?void 0:n.map((function(n){var e,t,i,o;return null===n||void 0===n||null===(e=n.edge_media_to_caption)||void 0===e||null===(t=e.edges)||void 0===t||null===(i=t[0])||void 0===i||null===(o=i.node)||void 0===o?void 0:o.text}))}},{key:"locations",get:function(){var n;return null===(n=this.media)||void 0===n?void 0:n.map((function(n){return null===n||void 0===n?void 0:n.location}))}},{key:"media",get:function(){var n,e,t;return(null===(n=this._data)||void 0===n||null===(e=n.edge_owner_to_timeline_media)||void 0===e||null===(t=e.edges)||void 0===t?void 0:t.map((function(n){return null===n||void 0===n?void 0:n.node})))||[]}},{key:"media_count",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_owner_to_timeline_media)||void 0===e?void 0:e.count}},{key:"media_length",get:function(){return this.media.length}},{key:"saved_media",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_saved_media)||void 0===e?void 0:e.edges}},{key:"saved_media_count",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_saved_media)||void 0===e?void 0:e.count}},{key:"followers_count",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_followed_by)||void 0===e?void 0:e.count}},{key:"following_count",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_follow)||void 0===e?void 0:e.count}},{key:"hide_like_and_view_counts",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.hide_like_and_view_counts}},{key:"business_email",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.business_email}},{key:"external_url",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.external_url}},{key:"fbid",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.fbid}},{key:"id",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.id}},{key:"profile_pic_url",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.profile_pic_url}},{key:"business_phone_number",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.business_phone_number}},{key:"business_address_json",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.business_address_json}},{key:"is_joined_recently",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.is_joined_recently}},{key:"is_business_account",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.is_business_account}},{key:"is_professional_account",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.is_professional_account}},{key:"is_verified",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.is_verified}},{key:"is_private",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.is_private}},{key:"full_name",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.full_name}},{key:"biography",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.biography}},{key:"username",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.username}},{key:"isValid",get:function(){var n;return Boolean(null===(n=this._data)||void 0===n?void 0:n.fbid)}}]),n}(),h=function(){function n(e){var t;((0,c.Z)(this,n),this._data={},e)&&(null!==(t=e)&&void 0!==t&&t.node&&(e=e.node),this._data=e)}return(0,v.Z)(n,[{key:"hashtags",get:function(){var n=this.caption||"";return Array.from(n.matchAll(/(^|\s)(#[a-z\d-]+)/g)).map((function(n){var e,t;return null===n||void 0===n||null===(e=n[0])||void 0===e||null===(t=e.replace("\n",""))||void 0===t?void 0:t.replace(" ","")}))}},{key:"tagged_users",get:function(){var n,e,t;return null===(n=this._data)||void 0===n||null===(e=n.edge_media_to_tagged_user)||void 0===e||null===(t=e.edges)||void 0===t?void 0:t.map((function(n){var e;return null===n||void 0===n||null===(e=n.node)||void 0===e?void 0:e.user}))}},{key:"caption",get:function(){var n,e,t,i,o;return null===(n=this._data)||void 0===n||null===(e=n.edge_media_to_caption)||void 0===e||null===(t=e.edges)||void 0===t||null===(i=t[0])||void 0===i||null===(o=i.node)||void 0===o?void 0:o.text}},{key:"date",get:function(){var n,e=null===(n=this._data)||void 0===n?void 0:n.taken_at_timestamp;if(e)return new Date(1e3*e)}},{key:"comments_count",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_media_to_comment)||void 0===e?void 0:e.count}},{key:"likes_count",get:function(){var n,e;return null===(n=this._data)||void 0===n||null===(e=n.edge_liked_by)||void 0===e?void 0:e.count}},{key:"location_name",get:function(){var n;return null===this||void 0===this||null===(n=this.location)||void 0===n?void 0:n.name}},{key:"location",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.location}},{key:"is_video",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.is_video}},{key:"shortcode",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.shortcode}},{key:"id",get:function(){var n;return null===(n=this._data)||void 0===n?void 0:n.id}}]),n}(),m=t(2145),f=t(8136),g=function(n){var e=n.usr;return(0,f.jsxs)("div",{className:"d-grid grid-md-2 gap-2",children:[(0,f.jsx)(p,{usr:e}),(0,f.jsx)(k,{usr:e}),(0,f.jsx)(y,{usr:e}),(0,f.jsx)(j,{usr:e}),(0,f.jsx)(x,{usr:e})]})},p=function(n){var e,t,i=n.usr;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsx)("div",{className:"fw-bold mb-1",children:i.full_name}),(0,f.jsx)("div",{className:"",children:"followers: ".concat(i.followers_count," | following: ").concat(i.following_count," | posts: ").concat(i.media_count)}),(0,f.jsx)("div",{className:"mb-1",children:"avg likes: ".concat(0|i.avg_likes," | avg comments: ").concat(0|i.avg_comments," | last post: ").concat(null===(e=i.last_post)||void 0===e||null===(t=e.date)||void 0===t?void 0:t.format())}),(0,f.jsx)("div",{style:{whiteSpace:"pre"},children:i.biography}),i.external_url&&(0,f.jsx)("a",{href:i.external_url,className:"text-muted text-sm",target:"_blank",rel:"noopener noreferrer",children:(0,m.bI)(i.external_url)})]}),(0,f.jsx)("div",{children:(0,f.jsxs)("ul",{children:[(0,f.jsxs)("li",{children:["ID: ",i.id]}),(null===i||void 0===i?void 0:i.is_business_account)&&(0,f.jsx)("li",{children:"Business account "}),(null===i||void 0===i?void 0:i.is_professional_account)&&(0,f.jsx)("li",{children:"Professional account"}),(null===i||void 0===i?void 0:i.business_email)&&(0,f.jsxs)("li",{children:["business_email: ",null===i||void 0===i?void 0:i.business_email]}),(null===i||void 0===i?void 0:i.business_phone_number)&&(0,f.jsxs)("li",{children:["business_phone_number: ",null===i||void 0===i?void 0:i.business_phone_number]}),Boolean(i.saved_media_count)&&(0,f.jsxs)("li",{children:["Saved media: ",i.saved_media_count]})]})})]})},k=function(n){var e=n.usr;return(0,f.jsx)(b,{title:"Recent locations",children:e.top_locations.map((function(n){var e,t;return(0,f.jsx)("div",{children:null===n||void 0===n||null===(e=n[0])||void 0===e||null===(t=e.location)||void 0===t?void 0:t.name},(0,m.Vj)())}))})},y=function(n){var e=n.usr;return(0,f.jsx)(b,{title:"Top hashtags",children:e.top_hashtags.splice(0,10).map((function(n){return(0,f.jsx)("div",{children:null===n||void 0===n?void 0:n[0]},null===n||void 0===n?void 0:n[0])}))})},j=function(n){var e=n.usr;return(0,f.jsx)(b,{title:"Tagged users",children:e.top_tagged_users.map((function(n){return(0,f.jsxs)("div",{className:"mb-1",children:[(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("span",{className:"me-1",children:null===n||void 0===n?void 0:n.full_name}),(0,f.jsx)("a",{href:"/staff/partners/audit/?username=".concat(null===n||void 0===n?void 0:n.username),target:"_blank",rel:"noopener noreferrer",children:"[audit]"})]}),(0,f.jsx)("a",{href:"https://instagram.com/".concat(n.username,"/"),className:"text-muted text-sm",target:"_blank",rel:"noopener noreferrer",children:"".concat(null===n||void 0===n?void 0:n.username,"   ->")})]},(0,m.Vj)())}))})},x=function(n){var e=n.usr;return(0,f.jsx)(b,{title:"Schedule",children:Object.entries(e.post_schedule).map((function(n){var e=(0,i.Z)(n,2),t=e[0],o=e[1];return(0,f.jsxs)("div",{className:"mb-1",children:[(0,f.jsx)("div",{children:t}),(0,f.jsx)("div",{children:o.map((function(n){var e;return(0,f.jsxs)("div",{className:"ms-1 text-sm",children:[null===(e=n.date)||void 0===e?void 0:e.format({month:"long",day:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"})," - ".concat(n.likes_count," | ").concat(n.comments_count," "),(0,f.jsx)("a",{href:"http://instagram.com/p/".concat(n.shortcode,"/"),target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:" >> "})]},n.id)}))})]},t)}))})},b=function(n){var e=n.title,t=n.children,r=o.useState(!0),u=(0,i.Z)(r,2),s=u[0],a=u[1];return(0,f.jsx)(l.ZP.Section,{border:!0,title:e,actions:(0,f.jsx)("div",{onClick:function(){return a(!s)},children:s?"[-]":"[+]"}),className:"bg-white",children:s&&t})},w=function(){var n=(0,r.lr)(),e=(0,i.Z)(n,1)[0],t=e.get("username")||"",u=e.get("back")||void 0,d=o.useState(t),c=(0,i.Z)(d,2),v=c[0],h=c[1],m=(0,a.QT)((function(){return t?l.bl.get("partners/audit/",{params:{username:t}}):null}),{refreshDeps:[t]}),p=m.res,k=m.loading,y=new _(null===p||void 0===p?void 0:p.data);return(0,f.jsx)(l.ZP.View,{back:u,children:(0,f.jsx)(l.ZP.Section,{title:(0,f.jsx)("form",{method:"GET",children:(0,f.jsx)("input",{required:!0,name:"username",value:v,onChange:function(n){var e=n.target;return h(e.value)},placeholder:"Enter username to audit ...",className:"miq-form-input"})}),children:k?(0,f.jsx)(s.gb,{}):t&&!y.isValid?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"",children:(0,f.jsx)("div",{className:"text-md",children:"This username is invalid"})})}):t&&(0,f.jsx)(g,{usr:y})})})};function N(){return(0,f.jsx)(l.ZP.View,{title:"Account audit",back:"/staff/partners/",children:(0,f.jsx)(u.Z5,{children:(0,f.jsx)(u.AW,{path:"/*",element:(0,f.jsx)(w,{})})})})}}}]);
//# sourceMappingURL=534.66d41f03.chunk.js.map