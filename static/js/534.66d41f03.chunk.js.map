{"version":3,"file":"static/js/534.66d41f03.chunk.js","mappings":"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","sources":["miqpartnersjs/audit/usr.ts","miqpartnersjs/audit/profile.tsx","miqpartnersjs/audit/index.tsx"],"sourcesContent":["export default class Usr {\n  _data: any = {};\n  constructor(data: any) {\n    this._data = data;\n  }\n\n  get top_tagged_users() {\n    const us: any = {};\n    this.tagged_users.forEach((u: any) => {\n      us[u?.id] = { ...u, t_count: (us[u?.id]?.t_count || 0) + 1 };\n    });\n    return Object.values(us).sort((i: any, v: any) => (i.t_count < v.t_count ? 1 : -1));\n  }\n\n  get tagged_users() {\n    let usrs: any[] = [];\n    this.posts.forEach((p: Post) => {\n      usrs = usrs.concat(p.tagged_users);\n    });\n    return usrs;\n  }\n\n  get top_hashtags() {\n    const counts: any = {};\n    this.hashtags.forEach(function (x) {\n      counts[x] = (counts[x] || 0) + 1;\n    });\n    return Object.entries<number>(counts).sort((i: any, v: any) => (i[1] < v[1] ? 1 : -1));\n  }\n\n  get hashtags(): string[] {\n    let tags: string[] = [];\n    this.posts.forEach((p: Post) => {\n      tags = tags.concat(p.hashtags);\n    });\n    return tags;\n  }\n\n  get most_liked_post() {\n    return this.posts.sort((i: Post, v: Post) => (i.likes_count < v.likes_count ? 1 : -1))?.[0];\n  }\n  get least_liked_post() {\n    return this.posts.sort((i: Post, v: Post) => (i.likes_count > v.likes_count ? 1 : -1))?.[0];\n  }\n  get most_commented_post() {\n    return this.posts.sort((i: Post, v: Post) => (i?.comments_count < v?.comments_count ? 1 : -1))?.[0];\n  }\n  get least_commented_post() {\n    return this.posts.sort((i: Post, v: Post) => (i?.comments_count > v?.comments_count ? 1 : -1))?.[0];\n  }\n\n  get last_post() {\n    const p = this.media?.[0];\n    if (!p) return;\n    return new Post(p);\n  }\n\n  get top_locations() {\n    const locs: any = {};\n    this.posts.forEach((p: Post) => {\n      const _d = p.location?.slug;\n      if (!Object.keys(locs).includes(_d!)) locs[_d!] = [];\n\n      locs[_d!].push(p);\n    });\n    return Object.values(locs).sort((i: any, v: any) => {\n      //   console.log(i);\n      return i.length > v.length ? -1 : 1;\n    });\n  }\n\n  get post_schedule() {\n    const dt: any = {};\n    this.posts.forEach((p: Post) => {\n      const _d = p.date;\n      const k = _d?.format({ weekday: 'long' });\n      if (!Object.keys(dt).includes(k!)) dt[k!] = [];\n\n      dt[k!].push(p);\n    });\n    return dt;\n  }\n\n  get posts() {\n    return this.media.map((m: any) => new Post(m));\n  }\n\n  get avg_likes() {\n    let total = 0;\n    this.media?.forEach((m: any) => {\n      total += m?.edge_liked_by?.count;\n    });\n    return total / this.media_length;\n  }\n  get avg_comments() {\n    let total = 0;\n    this.media?.forEach((m: any) => {\n      total += m?.edge_media_to_comment?.count;\n    });\n    return total / this.media_length;\n  }\n\n  get captions() {\n    return this.media?.map((m: any) => m?.edge_media_to_caption?.edges?.[0]?.node?.text);\n  }\n  get locations() {\n    return this.media?.map((m: any) => m?.location);\n  }\n\n  get media() {\n    return this._data?.['edge_owner_to_timeline_media']?.['edges']?.map((i: any) => i?.node) || [];\n  }\n  get media_count() {\n    return this._data?.['edge_owner_to_timeline_media']?.['count'];\n  }\n  get media_length() {\n    return this.media.length;\n  }\n\n  get saved_media() {\n    return this._data?.['edge_saved_media']?.['edges'];\n  }\n  get saved_media_count() {\n    return this._data?.['edge_saved_media']?.['count'];\n  }\n  get followers_count() {\n    return this._data?.['edge_followed_by']?.['count'];\n  }\n  get following_count() {\n    return this._data?.['edge_follow']?.['count'];\n  }\n  get hide_like_and_view_counts() {\n    return this._data?.['hide_like_and_view_counts'];\n  }\n  get business_email() {\n    return this._data?.['business_email'];\n  }\n  //\n  get external_url() {\n    return this._data?.['external_url'];\n  }\n  get fbid() {\n    return this._data?.['fbid'];\n  }\n  get id() {\n    return this._data?.['id'];\n  }\n  get profile_pic_url() {\n    return this._data?.['profile_pic_url'];\n  }\n  get business_phone_number() {\n    return this._data?.['business_phone_number'];\n  }\n  get business_address_json() {\n    return this._data?.['business_address_json'];\n  }\n\n  get is_joined_recently() {\n    return this._data?.['is_joined_recently'];\n  }\n  get is_business_account() {\n    return this._data?.['is_business_account'];\n  }\n  get is_professional_account() {\n    return this._data?.['is_professional_account'];\n  }\n  get is_verified() {\n    return this._data?.['is_verified'];\n  }\n  get is_private() {\n    return this._data?.['is_private'];\n  }\n  get full_name() {\n    return this._data?.['full_name'];\n  }\n  get biography() {\n    return this._data?.['biography'];\n  }\n  get username() {\n    return this._data?.['username'];\n  }\n  get isValid() {\n    return Boolean(this._data?.fbid);\n  }\n}\n\nexport class Post {\n  _data: any = {};\n  constructor(data: any) {\n    if (data) {\n      if (data?.node) data = data.node;\n      this._data = data;\n    }\n  }\n\n  get hashtags() {\n    const cap: string = this.caption || '';\n    return Array.from(cap.matchAll(/(^|\\s)(#[a-z\\d-]+)/g)).map((h) => h?.[0]?.replace('\\n', '')?.replace(' ', ''));\n  }\n\n  get tagged_users() {\n    return this._data?.edge_media_to_tagged_user?.edges?.map((i: any) => i?.node?.user);\n  }\n  get caption() {\n    return this._data?.edge_media_to_caption?.edges?.[0]?.node?.text;\n  }\n\n  get date() {\n    const date = this._data?.taken_at_timestamp;\n    if (!date) return;\n    return new Date(date * 1000);\n  }\n\n  get comments_count() {\n    return this._data?.edge_media_to_comment?.count;\n  }\n  get likes_count() {\n    return this._data?.edge_liked_by?.count;\n  }\n  get location_name() {\n    return this?.location?.name;\n  }\n  get location() {\n    return this._data?.location;\n  }\n  get is_video() {\n    return this._data?.is_video;\n  }\n  get shortcode() {\n    return this._data?.shortcode;\n  }\n  get id() {\n    return this._data?.id;\n  }\n}\n","import * as React from 'react';\n\nimport Staff from '@miq/staffjs';\n\nimport Usr, { Post } from './usr';\nimport { truncateStr, uuid } from '@miq/utiljs';\n\ntype TProfileProps = { usr: Usr };\n\nexport const Profile = ({ usr }: TProfileProps) => {\n  return (\n    <div className=\"d-grid grid-md-2 gap-2\">\n      <Info usr={usr} />\n\n      <Locations usr={usr} />\n      <Hashtags usr={usr} />\n      <TaggedUser usr={usr} />\n      <Schedule usr={usr} />\n    </div>\n  );\n};\n\nconst Info = ({ usr }: TProfileProps) => {\n  return (\n    <>\n      <div className=\"mt-2\">\n        <div className=\"fw-bold mb-1\">{usr.full_name}</div>\n        <div className=\"\">{`followers: ${usr.followers_count} | following: ${usr.following_count} | posts: ${usr.media_count}`}</div>\n        <div className=\"mb-1\">{`avg likes: ${usr.avg_likes | 0} | avg comments: ${\n          usr.avg_comments | 0\n        } | last post: ${usr.last_post?.date?.format()}`}</div>\n        <div style={{ whiteSpace: 'pre' }}>{usr.biography}</div>\n        {usr.external_url && (\n          <a href={usr.external_url} className=\"text-muted text-sm\" target=\"_blank\" rel=\"noopener noreferrer\">\n            {truncateStr(usr.external_url)}\n          </a>\n        )}\n      </div>\n\n      <div>\n        <ul>\n          <li>ID: {usr.id}</li>\n          {usr?.is_business_account && <li>Business account </li>}\n          {usr?.is_professional_account && <li>Professional account</li>}\n          {usr?.business_email && <li>business_email: {usr?.business_email}</li>}\n          {usr?.business_phone_number && <li>business_phone_number: {usr?.business_phone_number}</li>}\n          {Boolean(usr.saved_media_count) && <li>Saved media: {usr.saved_media_count}</li>}\n        </ul>\n      </div>\n    </>\n  );\n};\n\nconst Locations = ({ usr }: TProfileProps) => {\n  return (\n    <Sect title=\"Recent locations\">\n      {usr.top_locations.map((loc: any) => {\n        return <div key={uuid()}>{loc?.[0]?.location?.name}</div>;\n      })}\n    </Sect>\n  );\n};\nconst Hashtags = ({ usr }: TProfileProps) => {\n  return (\n    <Sect title=\"Top hashtags\">\n      {usr.top_hashtags.splice(0, 10).map((h) => {\n        return <div key={h?.[0]}>{h?.[0]}</div>;\n      })}\n    </Sect>\n  );\n};\n\nconst TaggedUser = ({ usr }: { usr: Usr }) => {\n  return (\n    <Sect title=\"Tagged users\">\n      {usr.top_tagged_users.map((u: any) => {\n        return (\n          <div className=\"mb-1\" key={uuid()}>\n            <div className=\"\">\n              <span className=\"me-1\">{u?.full_name}</span>\n              <a href={`/staff/partners/audit/?username=${u?.username}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                [audit]\n              </a>\n            </div>\n            <a\n              href={`https://instagram.com/${u.username}/`}\n              className=\"text-muted text-sm\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {`${u?.username}   ->`}\n            </a>\n          </div>\n        );\n      })}\n    </Sect>\n  );\n};\n\nconst Schedule = ({ usr }: { usr: Usr }) => {\n  return (\n    <Sect title=\"Schedule\">\n      {Object.entries(usr.post_schedule).map(([k, v]: any) => {\n        return (\n          <div key={k} className=\"mb-1\">\n            <div>{k}</div>\n            <div>\n              {v.map((p: Post) => {\n                return (\n                  <div className=\"ms-1 text-sm\" key={p.id}>\n                    {p.date?.format({\n                      // weekday: 'short',\n                      month: 'long',\n                      day: 'numeric',\n                      year: '2-digit',\n                      hour: 'numeric',\n                      minute: 'numeric',\n                    })}\n                    {` - ${p.likes_count} | ${p.comments_count} `}\n\n                    <a\n                      href={`http://instagram.com/p/${p.shortcode}/`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"ms-2\"\n                    >{` >> `}</a>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        );\n      })}\n    </Sect>\n  );\n};\n\nconst Sect = ({ title, children }: { title: string; children: React.ReactNode }) => {\n  const [open, setOpen] = React.useState(true);\n  return (\n    <Staff.Section\n      border\n      title={title}\n      actions={<div onClick={() => setOpen(!open)}>{open ? '[-]' : '[+]'}</div>}\n      className=\"bg-white\"\n    >\n      {open && children}\n    </Staff.Section>\n  );\n};\n","import * as React from 'react';\nimport { Route, Routes, useSearchParams } from 'react-router-dom';\n\nimport { Loading } from '@miq/componentjs';\nimport { useRequest } from '@miq/hookjs';\nimport Staff, { API } from '@miq/staffjs';\n\nimport Usr from './usr';\nimport { Profile } from './profile';\n\nconst IndexView = () => {\n  const [params] = useSearchParams();\n  const username = params.get('username') || '';\n  const back = params.get('back') || undefined;\n  const [usn, setUsn] = React.useState<string>(username);\n\n  const { res, loading } = useRequest(\n    () => {\n      if (!username) return null;\n      return API.get(`partners/audit/`, { params: { username } });\n    },\n    { refreshDeps: [username] }\n  );\n\n  const usr = new Usr(res?.data);\n\n  return (\n    <Staff.View back={back}>\n      <Staff.Section\n        title={\n          <form method=\"GET\">\n            <input\n              required\n              name=\"username\"\n              value={usn}\n              onChange={({ target }) => setUsn(target.value)}\n              placeholder=\"Enter username to audit ...\"\n              className=\"miq-form-input\"\n            />\n          </form>\n        }\n      >\n        {loading ? (\n          <Loading />\n        ) : username && !usr.isValid ? (\n          <>\n            <div className=\"\">\n              <div className=\"text-md\">This username is invalid</div>\n            </div>\n          </>\n        ) : (\n          username && <Profile usr={usr} />\n        )}\n      </Staff.Section>\n    </Staff.View>\n  );\n};\n\nexport default function AuditRoutes() {\n  return (\n    <Staff.View title=\"Account audit\" back=\"/staff/partners/\">\n      <Routes>\n        <Route path=\"/*\" element={<IndexView />} />\n      </Routes>\n    </Staff.View>\n  );\n}\n"],"names":["Usr","data","_data","this","us","tagged_users","forEach","u","id","t_count","Object","values","sort","i","v","usrs","posts","p","concat","counts","hashtags","x","entries","tags","likes_count","comments_count","media","Post","locs","_d","location","slug","keys","includes","push","length","dt","date","k","format","weekday","map","m","total","edge_liked_by","count","media_length","edge_media_to_comment","edge_media_to_caption","edges","node","text","Boolean","fbid","cap","caption","Array","from","matchAll","h","replace","edge_media_to_tagged_user","user","taken_at_timestamp","Date","name","is_video","shortcode","Profile","usr","className","Info","Locations","Hashtags","TaggedUser","Schedule","full_name","followers_count","following_count","media_count","avg_likes","avg_comments","last_post","style","whiteSpace","biography","external_url","href","target","rel","truncateStr","is_business_account","is_professional_account","business_email","business_phone_number","saved_media_count","Sect","title","top_locations","loc","uuid","top_hashtags","splice","top_tagged_users","username","post_schedule","month","day","year","hour","minute","children","React","open","setOpen","border","actions","onClick","IndexView","useSearchParams","params","get","back","undefined","usn","setUsn","useRequest","API","refreshDeps","res","loading","method","required","value","onChange","placeholder","isValid","AuditRoutes","path","element"],"sourceRoot":""}