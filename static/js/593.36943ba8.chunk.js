"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[593],{4593:function(i,e,t){t.r(e),t.d(e,{default:function(){return m}});var s=t(4384),n=t(7406),l=t(5789),o=t(1340),d=t(9450),c=t(810),r=t(9474),a=t(7457),u=["settingSlug"],v=function(i){i.settingSlug,(0,s.Z)(i,u);var e=n.useContext(d.h2).stats;return e?(0,a.jsx)(l.ZP.Section,{title:"Insights",actions:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(l.oS,{options:["today","last_7","last_30"]}),(0,a.jsx)(l.ZP.Link,{to:"insights",className:"btn btn-primary-3 ms-1",children:"Insights>"})]}),children:(0,a.jsxs)("div",{className:"d-grid gap-2 mb-3",children:[(0,a.jsxs)("div",{className:"",children:["Messages: ",null===e||void 0===e?void 0:e.msg_count]}),(0,a.jsxs)("div",{className:"",children:["Visitors: ",null===e||void 0===e?void 0:e.visitor_count]}),(0,a.jsxs)("div",{className:"",children:["Page views: ",null===e||void 0===e?void 0:e.views_count]})]})}):null};function m(){var i,e,t,s,u;(0,r.jr)("Store");var m=n.useContext(d.h2),x=(m.isLoaded,m.products),g=m.orders,j=m.cats,p=m.shopy_settings,b=m.site,N=void 0===b?{}:b,f=m.stats,_=N.settings;return(0,a.jsxs)(l.ZP.View,{title:"Commerce",className:"no-bg",back:"/staff/",actions:(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)(l.ZP.NavLink,{to:"notifications/",className:"btn btn-round btn-secondary-3",title:"Action needed",children:(0,a.jsx)(o.PJ.P_,{})}),(0,a.jsx)(l.ZP.NavLink,{to:"settings/",className:"btn btn-round btn-secondary-3",title:"Shop settings",children:(0,a.jsx)(o.PJ.lk,{})})]}),children:[(0,a.jsx)(l.ZP.Section,{children:(0,a.jsxs)("div",{className:"d-grid grid-2 grid-sm-3 grid-md-4 grid-lg-6",children:[(0,a.jsx)(h,{title:"Products",tab:"./?tab=products",link:{to:"products/",text:"View all products",perms:["store.view_product"]},children:(0,a.jsx)("h3",{children:(null===x||void 0===x?void 0:x.count)||0})}),(0,a.jsx)(h,{tab:"./?tab=categories",title:"Categories",link:{to:"categories/",text:"View all categories",perms:["store.view_category"]},children:(0,a.jsx)("h3",{children:(null===j||void 0===j?void 0:j.count)||0})}),(null===p||void 0===p||null===(i=p.config)||void 0===i?void 0:i.has_suppliers)&&(0,a.jsx)(h,{title:"Supplier Orders",tab:"./",link:{to:"orders/",text:"View all orders",perms:["store.view_supplierorder"]},children:(0,a.jsx)("h3",{children:(null===g||void 0===g?void 0:g.count)||0})})]})}),_&&(0,a.jsx)(v,{settingSlug:_}),(0,a.jsx)(l.ZP.Section,{title:"Produits les plus vus",className:"my-2",children:(0,a.jsx)("div",{className:"d-grid grid-5 grid-md-10 gap-2",children:null===f||void 0===f||null===(e=f.prods)||void 0===e?void 0:e.map((function(i){var e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("img",{src:(0,c.wD)(null===i||void 0===i||null===(e=i.cover_data)||void 0===e?void 0:e.thumb_sq),title:"(".concat(null===i||void 0===i?void 0:i.count,") ").concat(null===i||void 0===i?void 0:i.name),alt:"".concat(null===i||void 0===i?void 0:i.name,":").concat(null===i||void 0===i?void 0:i.count),className:"rounded",style:{objectFit:"cover",width:"100%",height:"auto",aspectRatio:"1/1"}}),(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{position:"absolute",bottom:10,left:5,padding:"2px 4px",backgroundColor:"white",borderRadius:6},children:null===i||void 0===i?void 0:i.count})]}),(0,a.jsx)("div",{className:"text-sm text-ellipsis",children:null===i||void 0===i?void 0:i.name})]},i.name)}))})}),(0,a.jsx)(l.ZP.Section,{title:"Cat\xe9gories les plus vues",className:"my-2",children:(0,a.jsx)("div",{className:"d-grid grid-5 grid-md-10 gap-2",children:null===f||void 0===f||null===(t=f.cats)||void 0===t?void 0:t.map((function(i){var e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("img",{src:(0,c.wD)(null===i||void 0===i||null===(e=i.cover_data)||void 0===e?void 0:e.thumb_sq),title:"(".concat(null===i||void 0===i?void 0:i.count,") ").concat(null===i||void 0===i?void 0:i.name),alt:"".concat(null===i||void 0===i?void 0:i.name,":").concat(null===i||void 0===i?void 0:i.count),className:"rounded",style:{objectFit:"cover",width:"100%",height:"auto",aspectRatio:"1/1"}}),(0,a.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{position:"absolute",bottom:10,left:5,padding:"2px 4px",backgroundColor:"white",borderRadius:6},children:null===i||void 0===i?void 0:i.count})]}),(0,a.jsx)("div",{className:"text-sm text-ellipsis",children:null===i||void 0===i?void 0:i.name})]},i.name)}))})}),(0,a.jsx)(l.ZP.Section,{title:"Nombre de produits par categorie",className:"my-2",children:null===j||void 0===j||null===(s=j.cat_count)||void 0===s||null===(u=s.filter((function(i){return i.category__name})))||void 0===u?void 0:u.map((function(i,e){var t=i.category__name,s=i.count;return(0,a.jsxs)("div",{children:[t,": ",s]},e)}))})]})}var h=function(i){var e=i.children,t=i.title,s=i.link,n=i.tab,o=void 0===n?"./":n,d=s.to;return(0,a.jsxs)("div",{className:"card-link mb-3",children:[(0,a.jsxs)(l.ZP.NavLink,{to:o,children:[t&&(0,a.jsx)("div",{className:"card-link-title",children:t}),e]}),(0,a.jsx)(l.ZP.Link,{to:d,requiredPerms:s.perms,children:(null===s||void 0===s?void 0:s.text)&&"".concat(s.text," \xbb")})]})}}}]);
//# sourceMappingURL=593.36943ba8.chunk.js.map