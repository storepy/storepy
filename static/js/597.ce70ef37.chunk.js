"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[597,644],{3644:function(e,t,s){s.r(t),s.d(t,{Hit:function(){return r._},HitListItem:function(){return l.HitListItem},default:function(){return u},useHitListRequest:function(){return r.j}});var n=s(7497),a=s(866),i=s(9009),r=s(8057),l=s(989),c=n.lazy((function(){return Promise.resolve().then(s.bind(s,989))}));function u(){return(0,i.jsx)(a.Z5,{children:(0,i.jsx)(a.AW,{index:!0,element:(0,i.jsx)(c,{})})})}},8057:function(e,t,s){s.d(t,{_:function(){return v},j:function(){return d}});var n=s(1135),a=s(7411),i=s(2518),r=s(2485),l=s(6113),c=s(265),u=s(4390),o=s(4116),d=function(e){var t=(0,u.lr)(e),s=(0,l.Z)(t,1)[0],n=s.get("__public"),a=s.get("__starts_with"),i=s.get("__q"),r=s.get("__path"),o=s.get("__url"),d=s.get("__ref"),h=s.get("__ip"),m=s.get("__bot"),f=s.get("__ua"),_=s.get("__status"),x=s.get("__dt"),j=s.get("page");return(0,c.QT)((function(){return v({}).list({params:s})}),{refreshDeps:[i,r,o,d,h,m,f,_,x,n,a,j]})},h=function(e){(0,i.Z)(s,e);var t=(0,r.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"img",get:function(){var e,t;return null===(e=this.data)||void 0===e||null===(t=e.session_data)||void 0===t?void 0:t.img}},{key:"deleteSlugs",value:function(e){return this.post("".concat(this._endpoint,"batch/"),{slugs:e,action:"destroy"})}},{key:"getSummary",value:function(e){return this.get("".concat(this._endpoint,"summary/"),{params:e})}}]),s}(o.x5),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.eR)(e,"hits",h)}},989:function(e,t,s){s.r(t),s.d(t,{HitListItem:function(){return D},default:function(){return A}});var n=s(8312),a=s(8519),i=s(7497),r=s(715),l=s(265),c=s(5927),u=s(9309),o=s(8057),d=s(6113),h=s(4390),v=s(9009),m=["name","value","children"],f=["hit"],_=["hit","search"],x=["hit","search"],j=["hit","search","children"],N=["hit","search"],g=["hit","search"],p=["hit","search"],Z=["hit"],b=["hit"],y=function(e){var t=(0,h.lr)(),s=(0,d.Z)(t,2),r=s[0],l=s[1],u=e.name,o=e.value,v=e.children,f=(0,n.Z)(e,m);return(0,i.createElement)("button",(0,a.Z)((0,a.Z)({},f),{},{className:(0,c.UT)(["btn-link",r.has(u)&&"bg-red-100",null===e||void 0===e?void 0:e.className]),key:u,onClick:function(){r.has(u)?r.delete(u):o&&r.set(u,o),l(r)}}),v||"".concat(r.has(u)?"[x] ".concat(u):u," x"))},k=function(e){var t,s=e.hit,n=null===s||void 0===s||null===(t=s.session_data)||void 0===t?void 0:t.img;return n?(0,v.jsx)(u.Ei.Square,{src:"".concat(n),className:"rounded"}):null},w=function(e){var t=e.hit,s=(0,n.Z)(e,f);return t.created?(0,v.jsx)("span",{className:null===s||void 0===s?void 0:s.className,title:"Date created",children:new Date(null===t||void 0===t?void 0:t.created).format({dateStyle:"medium",timeStyle:"medium"})}):null},S=function(e){var t=e.hit,s=e.search,a=(0,n.Z)(e,_),i=t.referrer;if(!i)return null;var r="Referrer: ".concat(i);return s?(0,v.jsx)(y,{name:"__ref",value:i,className:null===a||void 0===a?void 0:a.className,title:r,children:(0,c.bI)(i)}):(0,v.jsx)("span",{className:null===a||void 0===a?void 0:a.className,title:r,children:i})},H=function(e){var t=e.hit,s=e.search,a=(0,n.Z)(e,x),i=t.user_agent;if(!i)return null;var r="user agent: ".concat(i);return s?(0,v.jsx)(y,{name:"__ua",value:i,className:null===a||void 0===a?void 0:a.className,title:r,children:(0,c.bI)(i,0,45)}):(0,v.jsx)("span",{className:null===a||void 0===a?void 0:a.className,title:r,children:i})},L=function(e){var t=e.hit,s=e.search,a=e.children,i=(0,n.Z)(e,j),r=t.url;if(!r)return null;var l="url: ".concat(r);return s?(0,v.jsx)(y,{name:"__url",value:"".concat(r),className:null===i||void 0===i?void 0:i.className,title:l,children:a||r}):(0,v.jsx)("span",{className:(0,c.UT)([null===i||void 0===i?void 0:i.className]),title:l,children:a||r})},I=function(e){var t=e.hit,s=e.search,a=(0,n.Z)(e,N),i=t.path;if(!i)return null;var r="path: ".concat(i);return s?(0,v.jsx)(y,{name:"__path",value:"".concat(i),className:null===a||void 0===a?void 0:a.className,title:r,children:i}):(0,v.jsx)("span",{className:(0,c.UT)([null===a||void 0===a?void 0:a.className]),title:r,children:i})},T=function(e){var t=e.hit,s=e.search,a=(0,n.Z)(e,g),i=t.response_status;if(!i)return null;var r="response status",l=(0,c.UT)([i>299?"text-danger":"text-success","bg-white",null===a||void 0===a?void 0:a.className]);return s?(0,v.jsx)(y,{name:"__status",value:"".concat(i),className:l,title:r,children:i}):(0,v.jsx)("span",{className:l,title:r,children:i})},C=function(e){var t=e.hit,s=e.search,a=(0,n.Z)(e,p),i=t.ip,r=t.session_data,l=void 0===r?{}:r,c=t.customer_data,u=void 0===c?{}:c,o=l||{},d=o.username,h=o._cus,m=null!==u&&void 0!==u&&u.first_name?"".concat(null===u||void 0===u?void 0:u.first_name," ").concat(null===u||void 0===u?void 0:u.last_name):null;d&&(d="@".concat(d));var f=m||h||d||i,_="user: ".concat(f);return s?(0,v.jsx)(y,{name:"__ip",value:i,className:null===a||void 0===a?void 0:a.className,title:_,children:f}):(0,v.jsx)("span",{className:null===a||void 0===a?void 0:a.className,title:_,children:f})},U=function(e){var t=e.hit,s=(0,n.Z)(e,Z),a=((null===t||void 0===t?void 0:t.session_data)||{})._cart;return a?(0,v.jsx)("a",{href:"/staff/sales/cart/".concat(a,"/"),className:null===s||void 0===s?void 0:s.className,target:"_blank",children:"view cart"}):null},q=function(e){var t=e.hit,s=((0,n.Z)(e,b),t.parsed_data),a=void 0===s?{}:s,i=["path","url","sdt","atc"];return(0,v.jsx)(v.Fragment,{children:Object.entries(a).map((function(e){var t=(0,d.Z)(e,2),s=t[0],n=t[1],a=void 0===n?"":n;return s&&a?i.includes(s)?null:(0,v.jsxs)("span",{className:"text-sm text-muted me-1 bg-blue-50 rounded",title:a,children:[s,": ",(0,c.bI)(a)]},(0,c.Vj)()):null}))})},E=s(1187),R=["hit"],V=[{label:"Views",link:{to:"."}},{label:"Bots",link:{to:"./?__bot=1"}},{label:"Errors",link:{to:"./?__err=1"}}];function A(){(0,l.jr)("Hits - Analytics");var e=u.Zv.useView(),t=(0,o.j)({__public:"1"}),s=t.res;if(t.loading)return(0,v.jsx)(u.gb,{});var n=new c.HM(s);return n.isSuccess?(0,v.jsx)(u.Zv,{context:e,children:(0,v.jsx)(r.ZP.View,{title:(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(E.f9,{navLinks:V})}),footer:(0,v.jsx)(u.tl,(0,a.Z)((0,a.Z)({},n.data),{},{component:r.ZP.Link,to:!0})),children:(0,v.jsx)(u.Zv.List,{className:"text-sm",itemCN:"border-1 rounded p-1 mb-1",items:n.items,renderItem:function(e){var t=e.data;return(0,v.jsx)(D,{hit:t})}})})}):null}var D=function(e){var t=e.hit,s=(0,n.Z)(e,R);return(0,v.jsxs)("div",{className:(0,c.UT)(["d-flex",null===s||void 0===s?void 0:s.className]),children:[(0,v.jsx)("div",{style:{width:48,minWidth:48},children:(0,v.jsx)(k,{hit:t})}),(0,v.jsxs)("div",{className:"d-grid ms-1",children:[(0,v.jsxs)("div",{className:"text-ellipsis",children:[(0,v.jsx)(C,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(U,{hit:t,className:"me-1 bg-green-100"})," | ",(0,v.jsx)(w,{time:!0,hit:t,className:"me-1"})]}),(0,v.jsxs)("div",{className:"text-ellipsis",children:[(0,v.jsx)(T,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(I,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(L,{search:!0,hit:t,className:"bg-white color-blue-400",children:" \xab url \xbb "}),(0,v.jsxs)("div",{className:"text-muted",title:t.user_agent,children:[(0,v.jsx)(H,{search:!0,hit:t,className:"me-1"}),(0,v.jsx)(S,{search:!0,hit:t})]})]}),(0,v.jsx)("div",{className:"",children:(0,v.jsx)(q,{hit:t})})]})]})}},8597:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var n=s(6113),a=s(7497),i=s(5927),r=s(9514),l=s(1187),c=s(265),u=s(3644),o=s(9009);function d(){(0,c.jr)("Analytics");var e=a.useState(),t=(0,n.Z)(e,2),s=t[0],d=t[1];a.useEffect((function(){var e=navigator;d(e.language),console.log(JSON.stringify(null===e||void 0===e?void 0:e.language))}),[]);var h=(0,u.useHitListRequest)().res;return new i.HM(h).isSuccess?(0,o.jsxs)(r.Z,{mainCN:"no-bg p-0",children:[(0,o.jsx)("div",{className:"mt-3",children:"summary"}),(0,o.jsx)(l.wX,{title:"Last 100 hits",children:"list"}),(0,o.jsx)("pre",{children:s&&JSON.stringify(s)})]}):null}}}]);
//# sourceMappingURL=597.ce70ef37.chunk.js.map