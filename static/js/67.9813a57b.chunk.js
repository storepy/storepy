"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[67],{2290:function(e,n,r){r.d(n,{Cz:function(){return Z},K7:function(){return y},RC:function(){return N},Wl:function(){return b}});var t=r(8519),i=r(8312),s=r(2411),a=r(5603),l=r(2145),c=r(2379),o=r(138),u=r(8136),d=["children"],m=["label","multiple","accept"],x=["onUpload","onSuccess","onSuccessMulti","onError","onErrorMulti"],h=["instance","accept"],v=["field","onUpload","onSuccess","onError"],f=["children"],p=["instance","label"],j=["onSuccess","onError"],g="image/*",b=s.forwardRef((function(e,n){var r=e.children,a=(0,i.Z)(e,d),l=s.useRef(null),h=(0,o.pB)(),v=a.label,f=a.multiple,p=a.accept,j=void 0===p?g:p,b=(0,i.Z)(a,m),Z=b.onUpload,N=b.onSuccess,y=b.onSuccessMulti,S=b.onError,_=b.onErrorMulti,P=(0,i.Z)(b,x);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.zx,(0,t.Z)((0,t.Z)({className:"miq-img-create-btn"},P),{},{onClick:function(){var e;return null===l||void 0===l||null===(e=l.current)||void 0===e?void 0:e.click()},ref:n,children:r||v||"Upload image".concat(f?"s":"")})),(0,u.jsx)(c.S2,{accept:j,multiple:f,onChange:f?function(e){if(Z)return Z(e);var n=e.target.files;if(n){var r=[],t=[];Array.from(n).splice(0,10).forEach((function(e,n){r.push(h.create(e).catch((function(e){return t.push(e)})))})),t&&_&&_(t),Promise.all(r).then((function(e){if(y)return y(e)}))}}:function(e){if(Z)return Z(e);var n=e.target.files;if(n){var r=Array.from(n)[0];return h.create(r).then((function(e){return null===N||void 0===N?void 0:N(e)})).catch((function(e){return null===S||void 0===S?void 0:S(e)}))}},ref:function(e){return l.current=e}})]})})),Z=s.forwardRef((function(e,n){var r=s.useRef(null),a=e.instance,l=e.accept,o=void 0===l?g:l,d=(0,i.Z)(e,h),m=d.field,x=void 0===m?"src":m,f=d.onUpload,p=d.onSuccess,j=d.onError,b=(0,i.Z)(d,v);if("picture"===x)return(0,u.jsx)("div",{className:"miq-img-update-btn",children:e.children});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.zx,(0,t.Z)((0,t.Z)({className:"miq-img-update-btn"},b),{},{onClick:function(){var e;return null===r||void 0===r||null===(e=r.current)||void 0===e?void 0:e.click()},ref:n})),(0,u.jsx)(c.S2,{accept:o,onChange:function(e){if("picture"===x)return null;if(f)return f(e);var n=e.target.files;if(n){var r=Array.from(n)[0];return a.update(r,void 0,x).then((function(e){return null===p||void 0===p?void 0:p(e)})).catch((function(e){return null===j||void 0===j?void 0:j(e)}))}},ref:function(e){return r.current=e}})]})})),N=s.forwardRef((function(e,n){var r=e.children,s=(0,i.Z)(e,f),a=s.instance,o=s.label,d=(0,i.Z)(s,p),m=d.onSuccess,x=d.onError,h=(0,i.Z)(d,j);return(0,u.jsx)(c.zx,(0,t.Z)((0,t.Z)({},h),{},{onClick:function(){return a.destroy().then((function(e){return null===m||void 0===m?void 0:m(e)})).catch((function(e){return null===x||void 0===x?void 0:x(e)}))},className:(0,l.UT)(["miq-img-delete-btn",s.className]),ref:n,children:r||o||"Delete Image"}))})),y=s.forwardRef((function(e,n){return(0,u.jsxs)(a.ZP.Select,(0,t.Z)((0,t.Z)({name:"view"},e),{},{ref:n,children:[(0,u.jsx)(a.ZP.Option,{value:"src",label:"Desktop"}),(0,u.jsx)(a.ZP.Option,{value:"mobile",label:"Mobile"}),(0,u.jsx)(a.ZP.Option,{value:"thumb",label:"Thumbnail"}),(0,u.jsx)(a.ZP.Option,{value:"square",label:"Square"}),(0,u.jsx)(a.ZP.Option,{value:"picture",label:"Picture"})]}))}))},1096:function(e,n,r){r.d(n,{qH:function(){return _e},pB:function(){return j.pB},CD:function(){return ke.Wl},RC:function(){return ke.RC},Cz:function(){return ke.Cz},K7:function(){return ke.K7},eR:function(){return te.eR},x5:function(){return te.x5},ZP:function(){return we},ko:function(){return de},jB:function(){return ue}});var t=r(8519),i=r(8312),s=r(2411),a=r(6520),l=r(9002),c=r(2145),o=r(2379),u=r(8136),d=["label","text"],m=s.lazy((function(){return r.e(515).then(r.bind(r,7515))})),x=s.lazy((function(){return r.e(26).then(r.bind(r,5026))})),h=s.lazy((function(){return r.e(362).then(r.bind(r,3362))}));function v(){return(0,u.jsxs)(a.Z5,{children:[(0,u.jsx)(a.AW,{path:"pages/",element:(0,u.jsx)(h,{})}),(0,u.jsx)(a.AW,{path:"general/",element:(0,u.jsx)(m,{})}),(0,u.jsx)(a.AW,{path:"index/",element:(0,u.jsx)(x,{})}),(0,u.jsx)(a.AW,{path:"/",element:(0,u.jsx)(we.View,{title:"Settings",back:"/staff/",requiredPerms:["core.view_sitesetting"],children:(0,u.jsxs)("div",{className:"d-grid grid-sm-3 grid-md-4",children:[(0,u.jsx)(f,{to:"general/",label:"General",text:"Site settings and branding"}),(0,u.jsx)(f,{to:"index/",label:"Index",text:"Homepage settings"}),(0,u.jsx)(f,{to:"pages/",label:"Pages",text:"Site pages settings"})]})})})]})}var f=function(e){var n=e.label,r=e.text,s=(0,i.Z)(e,d);return(0,u.jsxs)(we.Link,(0,t.Z)((0,t.Z)({},s),{},{className:"d-block",children:[(0,u.jsx)("span",{className:"text-md",children:n}),(0,u.jsx)("p",{className:"text-muted text-sm pb-3",children:r})]}))},p=r(5603),j=r(138);function g(){return(0,u.jsx)(a.Z5,{children:(0,u.jsx)(a.AW,{path:"/",element:(0,u.jsx)(b,{})})})}var b=function(){var e=s.useContext(l.h2),n=e.user,r=e.updateUser,t=e.apps,i=n.employee,a={first_name:n.first_name,last_name:n.last_name,gender:n.gender};i&&(a.position=i.position);var c=(0,p.cI)(a);if(!n)return null;var o=(0,j.mO)(n);return(0,u.jsx)(we.View,{title:"Account",children:(0,u.jsxs)(p.ZP,{context:c,onSubmit:function(e){return e.preventDefault(),o.update(c.values).then((function(e){var n=e.data;return r(n)})).catch((function(e){return c.handleError(e)}))},children:[(0,u.jsxs)("div",{className:"d-grid grid-md-4 gap-2",children:[(0,u.jsxs)(we.Section,{title:"Profile information",text:"Update your profile information.",className:"span-md-3",footer:(0,u.jsx)(p.ZP.Submit,{value:"Save"}),children:[(0,u.jsx)(p.iF,{required:!0,label:"First name",error:c.errors.first_name,placeholder:"First name",className:"span-md-3",fieldCN:"d-grid grid-md-5"}),(0,u.jsx)(p.c_,{required:!0,label:"Last name",error:c.errors.last_name,placeholder:"Last name",className:"span-md-3",fieldCN:"d-grid grid-md-5"}),(0,u.jsx)(p.ZP.Field,{label:"Gender",className:"d-grid grid-md-5",children:(0,u.jsxs)(p.ZP.Select,{required:!0,name:"gender",nullValue:{label:"Select gender"},className:"span-md-3",children:[(0,u.jsx)("option",{value:"OTHER",children:"Other"}),(0,u.jsx)("option",{value:"MALE",children:"Male"}),(0,u.jsx)("option",{value:"FEMALE",children:"Female"})]})}),Object.keys(t).includes("miq_hrm")&&(0,u.jsx)(p.ZP.Field,{label:"Role",error:c.errors.position,className:"d-grid grid-md-5 mb-1",children:(0,u.jsx)(p.ZP.Text,{required:!0,name:"position",placeholder:"Role",className:"span-md-3",minLength:2})})]}),(0,u.jsx)(we.Section,{title:"Avatar",text:"Update your profile picture. Images must be .png, .jpg or .gif format.",className:"avatar-section"})]}),(0,u.jsx)(we.Section,{title:"Email",text:"Please contact support to change your email.",children:(0,u.jsx)("p",{className:"text-muted text-sm",children:n.email})}),(0,u.jsx)(we.Section,{title:"Password",text:"Please contact support to change your password. Password must be at least 6 characters long."})]})})},Z=["className","fallback"],N=["links","sidebarCN","children","mainCN","mobileNavCN"],y=function(e){return(0,u.jsxs)("a",{href:"/staff/".concat((0,c.Xs)(e.href)),className:"miq-staff-nav-link",children:[null===e||void 0===e?void 0:e.icon,(0,u.jsx)("span",{className:"label",children:e.label})]})},S=function(e){var n=s.useContext(l.h2);if(!n)return null;var r=e.className,d=e.fallback,m=void 0===d?(0,u.jsx)(o.gb,{}):d,x=(0,i.Z)(e,Z);if(!n.isLoaded)return m;var h=n.user,f=n.site;if(!h||!h.is_staff)return m;var p=x.links,j=x.sidebarCN,b=(x.children,x.mainCN),S=x.mobileNavCN,P=(0,i.Z)(x,N),k=p.filter((function(e){return e.href&&e})),C=k.filter((function(e){return e.mobile&&e})),w=p.filter((function(e){return e.element&&e}));return(0,u.jsxs)(o.IE,(0,t.Z)((0,t.Z)({},P),{},{className:(0,c.UT)([r,_]),children:[(0,u.jsxs)("nav",{className:(0,c.UT)(["".concat(_,"-sidebar"),j]),children:[(0,u.jsx)("header",{className:"".concat(_,"-sidebar-header"),children:(0,u.jsx)("div",{className:"text-md text-ellipsis p-1",children:f.name})}),(0,u.jsxs)("section",{className:"".concat(_,"-sidebar-body"),children:[k&&(0,u.jsx)("div",{className:"".concat(_,"-sidebar-body-content"),children:k.map((function(e,n){return(0,s.createElement)(y,(0,t.Z)((0,t.Z)({},e),{},{key:n}))}))}),(0,u.jsxs)("div",{className:"".concat(_,"-sidebar-body-footer"),children:[(0,u.jsx)(y,{href:"account/",label:h.first_name,icon:(0,u.jsx)(o.PJ.Fc,{})}),(0,u.jsx)(y,{href:"settings/",label:"Settings",icon:(0,u.jsx)(o.PJ.XV,{})})]})]})]}),(0,u.jsx)("div",{className:(0,c.UT)(["".concat(_,"-main"),b]),role:"main",children:(0,u.jsx)("div",{className:"miq-container-fluid",children:(0,u.jsxs)(a.Z5,{children:[w.map((function(e,n){return(0,u.jsx)(a.AW,{path:"".concat((0,c.Xs)(e.href),"/*"),element:e.element},n)})),(0,u.jsx)(a.AW,{path:"account/*",element:(0,u.jsx)(g,{})}),(0,u.jsx)(a.AW,{path:"settings/*",element:(0,u.jsx)(v,{})})]})})}),C&&(0,u.jsx)("nav",{className:(0,c.UT)(["".concat(_,"-mobile-nav"),S]),children:C.map((function(e,n){return(0,s.createElement)(y,(0,t.Z)((0,t.Z)({},e),{},{key:n}))}))})]}))},_="miq-staff-layout",P=["requiredPerms","fallback"],k=Array.isArray;function C(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var a=r.requiredPerms,o=r.fallback,d=(0,i.Z)(r,P),m=s.useContext(l.h2),x=m.user,h=m.perms;return!x||!x.is_staff||a&&!w(h.perms,a)?o||n.fallback||null:(0,u.jsx)(e,(0,t.Z)((0,t.Z)({},d),{},{className:(0,c.UT)([n.className,null===d||void 0===d?void 0:d.className])}))}}var w=function(e,n){return!(!k(e)||!k(n))&&e.filter((function(e){return n.includes(e)})).length===n.length},q=C((function(e){return(0,u.jsx)(o.G7,(0,t.Z)((0,t.Z)({},e),{},{className:(0,c.UT)(["miq-staff-view",e.className]),mainCN:"miq-staff-view-main",footerCN:"miq-staff-view-footer"}))})),F=r(1408),T=C(F.OL,{className:"miq-staff-nav-link"}),E=C(F.rU,{className:"miq-staff-link"}),z=C(o.zx,{className:"miq-staff-btn"}),A=C(o.vz),D=["dt","showWeekDay","short"],I=["dt","endDate","renderDay"],O=["render"],L=["short"],W=function(e){var n=e.dt,r=void 0===n?new Date:n,a=e.showWeekDay,l=void 0===a||a,o=e.short,d=(0,i.Z)(e,D),m=r.getMonthWeeks();return(0,u.jsxs)("div",{className:"miq-month",children:[l&&(0,u.jsx)(H,{short:o}),(0,u.jsx)("div",{id:"Weeks",className:"miq-month-weeks",children:m.map((function(e){return(0,s.createElement)(U,(0,t.Z)((0,t.Z)({},d),{},{dt:e[0],showWeekDay:!1,key:(0,c.Vj)()}))}))})]})},U=function(e){var n=e.dt,r=void 0===n?new Date:n,a=e.endDate,l=e.renderDay,o=(0,i.Z)(e,I),d=r.getWeekDates();return a&&(d=d.filter((function(e){return e<=a}))),(0,u.jsx)("div",{className:"miq-week",id:"Week",children:(0,u.jsx)("div",{id:"Dates",className:"miq-week-dates d-grid grid-md-7",children:d.map((function(e){return(0,s.createElement)(R,(0,t.Z)((0,t.Z)({},o),{},{dt:e,render:l,key:(0,c.Vj)()}))}))})})},R=function(e){var n=e.render,r=(0,i.Z)(e,O);if(n)return n(r);var t=r.dt,s=r.short,a=r.showWeekDay,l=void 0===a||a;return(0,u.jsxs)("div",{className:(0,c.UT)(["miq-day",e.className]),children:[l&&(0,u.jsx)(V,{dt:t,short:s}),(0,u.jsx)(M,{dt:t})]})},V=function(e){var n=e.dt,r=e.short,t=B.find((function(e){return e.index===n.getDay()}));return(0,u.jsx)("div",{className:"miq-weekday",children:r?null===t||void 0===t?void 0:t.short:null===t||void 0===t?void 0:t.long})},H=function(e){var n=e.short;(0,i.Z)(e,L);return(0,u.jsx)("div",{className:"miq-weekdays d-grid grid-md-7",children:B.map((function(e){return(0,u.jsx)("div",{className:"miq-weekday",children:n?null===e||void 0===e?void 0:e.short:null===e||void 0===e?void 0:e.long},e.index)}))})},M=function(e){var n,r=e.dt,t=e.className;return(0,u.jsx)("div",{className:(0,c.UT)(["miq-day-date-num",r.isToday()&&"today",t]),children:null===r||void 0===r||null===(n=r.getDate)||void 0===n?void 0:n.call(r)})},B=[{short:"Sun",long:"Sunday"},{short:"Mon",long:"Monday"},{short:"Tue",long:"Tuesday"},{short:"Wed",long:"Wednesday"},{short:"Thu",long:"Thursday"},{short:"Fri",long:"Friday"},{short:"Sat",long:"Saturday"}].map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{index:n})})),J=["onDateClick"];var G=function(e){var n=e.dt,r=e.activeDt,t=e.onClick,i=n.isToday(),s=n.isSameDay(r);return(0,u.jsx)("div",{className:(0,c.UT)(["miq-day miq-datepicker-day"]),children:(0,u.jsx)(o.zx,{onClick:function(){if(t)return t(n)},className:(0,c.UT)(["miq-datepicker-btn",i&&"today",s&&"active"]),children:(0,u.jsx)(M,{dt:n})})})},K=["children","dt"],X=["children","dt"];function Q(e){var n=(null===e||void 0===e?void 0:e.currentDate)||new Date;return Object.assign({},e,{currentDate:n})}Q.DatePicker=function(e){var n=e.onDateClick,r=(0,i.Z)(e,J).dt;return(0,u.jsx)("div",{className:(0,c.UT)(["miq-datepicker",e.className]),children:(0,u.jsx)(W,(0,t.Z)((0,t.Z)({},e),{},{short:!0,dt:r,renderDay:function(e){return(0,u.jsx)(G,(0,t.Z)((0,t.Z)({},e),{},{onClick:n}))},endDate:r.getMonthLastDt()}))})},Q.Week=U,Q.WeekDay=V,Q.WeekDays=H,Q.Day=R,Q.DateNum=M,Q.YearNum=function(e){var n=e.dt;return(0,u.jsx)("div",{className:"miq-year-num",children:n.getFullYear()})},Q.PrevWeekButton=function(e){var n=e.children,r=e.dt,s=(0,i.Z)(e,K);return(0,u.jsx)(o.zx,(0,t.Z)((0,t.Z)({},s),{},{onClick:function(){return null===s||void 0===s?void 0:s.onClick(r.subDays(7))},children:n}))},Q.NextWeekButton=function(e){var n=e.children,r=e.dt,s=(0,i.Z)(e,X);return(0,u.jsx)(o.zx,(0,t.Z)((0,t.Z)({},s),{},{onClick:function(){return null===s||void 0===s?void 0:s.onClick(r.addDays(7))},children:n}))};var Y=r(6009),$=r(1135),ee=r(7411),ne=r(2518),re=r(2485),te=r(4636),ie=function(e){(0,ne.Z)(r,e);var n=(0,re.Z)(r);function r(){return(0,$.Z)(this,r),n.apply(this,arguments)}return(0,ee.Z)(r,[{key:"deleteSlugs",value:function(e){return this.post("".concat(this._endpoint,"batch/"),{slugs:e,action:"destroy"})}},{key:"getSummary",value:function(){return this.get("".concat(this._endpoint,"summary/"))}}]),r}(te.x5),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,te.eR)(e,"hits",ie)},ae=function(e){(0,ne.Z)(r,e);var n=(0,re.Z)(r);function r(){return(0,$.Z)(this,r),n.apply(this,arguments)}return(0,ee.Z)(r)}(te.x5),le=(te.x5,r(9062)),ce=r(2134),oe=function(){var e=(0,F.lr)(),n=(0,Y.Z)(e,1)[0].get("summary");return(0,ce.QT)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,te.eR)(e,"campaigns",ae)}({}).list({params:{summary:n}})}),{refreshDeps:[n]})},ue=function(e){var n=(0,F.lr)(),r=(0,Y.Z)(n,1)[0].get("q"),t={q:r};return e&&(t.path=e),(0,ce.QT)((function(){return se({}).list({params:t})}),{refreshDeps:[r]})},de=function(e){var n={};return e.forEach((function(e){var r=e.path;Object.keys(n).includes(r)||(n[r]=[]),n[r]=[].concat((0,le.Z)(n[r]),[e])})),n},me=function(e){var n={};return e.forEach((function(e){var r=e.ip;r&&(Object.keys(n).includes(r)||(n[r]=[]),n[r]=[].concat((0,le.Z)(n[r]),[e]))})),n},xe=["instance"],he=["slugs"],ve=function(e){var n=e.title,r=void 0===n?"Summary":n;return(0,u.jsx)(A,{title:r,requiredPerms:["analytics.view_hit"],children:"Here goes a summary"})},fe=function(e){var n=e.item,r=s.useState(!1),t=(0,Y.Z)(r,2),i=t[0],a=t[1];if(i)return null;var l=se(n),o=l.url,d=l.referrer,m=l.response_status,x=l.created;return(0,u.jsxs)("div",{className:"hit-list-item d-grid grid-md-5 text-sm py-1",children:[(0,u.jsxs)("div",{className:"span-md-2",children:[(0,u.jsx)("a",{href:o,target:"_blank",title:o,children:n.path}),(0,u.jsx)("div",{className:"text-muted",title:"session key",children:n.session}),(0,u.jsx)("span",{className:(0,c.UT)([m>299?"text-danger":"text-success"]),title:"response status",children:m}),(0,u.jsx)("span",{title:"Date created",children:" / ".concat(new Date(x).formatDateToStr()," | ").concat(new Date(x).formatTime())}),n.debug&&(0,u.jsx)("span",{children:" / Debug"})]}),(0,u.jsx)("div",{className:"",title:"Referrer: ".concat(d),children:(0,c.bI)(d||"")}),(0,u.jsx)("div",{className:"",title:"User agent: ".concat(n.user_agent),children:(0,c.bI)((null===n||void 0===n?void 0:n.user_agent)||"")}),(0,u.jsx)("div",{className:"",children:(0,u.jsx)(je,{instance:l,onDelete:function(){return a(!0)}})})]})},pe=function(e){var n=e.items;return(0,u.jsx)("div",{className:"hit-list",children:Object.entries(me(n)).map((function(e){var n,r,t,i,s=(0,Y.Z)(e,2),a=s[0],l=s[1].reverse(),c=Boolean(l.filter((function(e){return function(e){var n=e.referrer,r=void 0===n?"":n,t=e.user_agent,i=void 0===t?"":t;return!(!r||!i)&&(r=r.toLowerCase(),i=i.toLowerCase(),r.includes("facebook")||r.includes("fb")||i.includes("facebook")||i.includes("fb"))}(e)})).length),d=l.find((function(e){return function(e){var n=e.referrer,r=e.user_agent;return!(!n||!r)&&(n=n.toLowerCase(),r=r.toLowerCase(),n.includes("instagram")||n.includes("ig")||r.includes("instagram")||r.includes("ig"))}(e)})),m=l.find((function(e){return function(e){var n=e.user_agent,r=e.path;return!n||(n=n.toLowerCase(),r.toLowerCase().includes("robot")||n.includes("bot")||n.includes("robot")||n.includes("ahrefsbot"))}(e)})),x=null===(n=l[0])||void 0===n||null===(r=n.source_id)||void 0===r||null===(t=r.match(/-(\w+)___/gm))||void 0===t||null===(i=t[0])||void 0===i?void 0:i.slice(1,-3);return(0,u.jsx)(A,{border:!0,title:(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsxs)("span",{className:"d-flex",children:[m&&(0,u.jsx)(o.PJ.H_,{className:"me-1 text-muted",width:20,height:20}),d&&(0,u.jsx)(o.PJ.mr,{className:"me-1"}),c&&(0,u.jsx)(o.PJ.s1,{className:"text-primary me-1"})]}),(0,u.jsx)("span",{className:"text-sm fw-bold",children:x||a})]}),actions:(0,u.jsx)("div",{className:"",children:(0,u.jsx)(ge,{slugs:l.map((function(e){return null===e||void 0===e?void 0:e.slug})),onDelete:function(){}})}),className:"mb-1",bodyCN:"p-0",children:l.sort((function(e,n){return new Date(e.created)>new Date(n.created)?-1:1})).map((function(e){return(0,u.jsx)(fe,{item:e},e.slug)}))},a)}))})},je=function(e){var n=e.instance,r=(0,i.Z)(e,xe),t=r.label,s=void 0===t?"":t,a=r.onDelete,l=function(){n.destroy().then((function(e){null===a||void 0===a||a(e.data)})).catch((function(e){console.log(e)}))};return(0,u.jsxs)(o.pu,{renderHeader:function(){return(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(o.PJ.x_,{}),(0,u.jsx)("span",{className:"ms-1",children:"Please confirm"})]})},renderFooter:function(e){var n=e.setOpen;return(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,u.jsx)(o.zx,{onClick:function(){return n(!1)},children:"Annuler"}),(0,u.jsx)(o.zx,{onClick:l,className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,u.jsxs)("div",{className:"p-3",children:[(0,u.jsxs)("div",{children:["You're about to delete this hit: ","".concat(n.slug)]}),(0,u.jsx)("div",{children:"You cannot undo this action"})]})},className:(0,c.UT)(["btn-danger-3"]),children:[(0,u.jsx)(o.PJ.rF,{}),s&&(0,u.jsx)("span",{className:"label",children:s})]})},ge=function(e){var n=e.slugs,r=(0,i.Z)(e,he),t=r.label,s=void 0===t?"":t,a=r.onDelete;return(0,u.jsxs)(o.pu,{renderHeader:function(){return(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)(o.PJ.x_,{}),(0,u.jsx)("span",{className:"ms-1",children:"Please confirm"})]})},renderFooter:function(e){var r=e.setOpen;return(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,u.jsx)(o.zx,{onClick:function(){return r(!1)},children:"Annuler"}),(0,u.jsx)(o.zx,{onClick:function(){return function(e){se({}).deleteSlugs(n).then((function(n){null===a||void 0===a||a(n.data),e(!1)})).catch((function(e){console.log(e)}))}(r)},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,u.jsxs)("div",{className:"p-3",children:[(0,u.jsxs)("div",{children:["You're about to delete ","".concat(n.length," hits.")]}),(0,u.jsx)("div",{children:"You cannot undo this action"})]})},className:(0,c.UT)(["btn-danger-3"]),title:"Delete group",children:[(0,u.jsx)(o.PJ.rF,{}),s&&(0,u.jsx)("span",{className:"label",children:s})]})};function be(){var e=(0,F.lr)(),n=((0,Y.Z)(e,1)[0],oe().res),r=new c.HM(n);return r.isSuccess?(0,u.jsx)(q,{title:"Campaigns",text:"".concat(r.data.count," items"),children:(0,u.jsx)(o.iA,{className:"w-100",items:r.items,header:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.iA.Th,{}),(0,u.jsx)(o.iA.Th,{children:"Value"}),(0,u.jsx)(o.iA.Th,{children:"Count"})]}),renderItem:function(e){return(0,u.jsxs)(o.iA.Tr,{children:[(0,u.jsx)(o.iA.Td,{children:e.key}),(0,u.jsx)(o.iA.Td,{children:e.value}),(0,u.jsx)(o.iA.Td,{children:e.count})]},(0,c.Vj)())}})}):null}var Ze=function(){return(0,u.jsx)(a.Z5,{children:(0,u.jsx)(a.AW,{path:"/",element:(0,u.jsx)(q,{title:"Search"})})})},Ne=function(){return(0,u.jsx)(a.Z5,{children:(0,u.jsx)(a.AW,{path:"/",element:(0,u.jsx)(be,{})})})},ye=function(){var e=ue().res,n=new c.HM(e);return n.isSuccess?(0,u.jsxs)(q,{title:"Hits",children:[(0,u.jsx)(ve,{}),(0,u.jsx)(A,{title:"Last 100 hits",children:(0,u.jsx)(pe,{items:n.items})})]}):null},Se=["className"];function _e(){return(0,u.jsx)(q,{title:"Analytics",back:"/staff/",actions:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Pe,{to:"/staff/analytics/",className:"me-1",children:"Hits"}),(0,u.jsx)(Pe,{to:"/staff/analytics/search/",className:"me-1",children:"Search"}),(0,u.jsx)(Pe,{to:"/staff/analytics/campaigns/",className:"",children:"Campaigns"})]}),children:(0,u.jsxs)(a.Z5,{children:[(0,u.jsx)(a.AW,{path:"/search/*",element:(0,u.jsx)(Ze,{})}),(0,u.jsx)(a.AW,{path:"/campaigns/*",element:(0,u.jsx)(Ne,{})}),(0,u.jsx)(a.AW,{path:"/",element:(0,u.jsx)(ye,{})})]})})}var Pe=function(e){var n=e.className,r=(0,i.Z)(e,Se);return(0,u.jsx)(F.OL,(0,t.Z)({className:function(e){var r=e.isActive;return(0,c.UT)(["btn","".concat(n),r?"btn-primary":"btn-primary-3"])}},r))},ke=r(2290),Ce=function(e){return Object.assign({},e)};Ce.Layout=S,Ce.View=q,Ce.Section=A,Ce.Button=z,Ce.Link=E,Ce.NavLink=T,Ce.Img=j.pB;var we=Ce},138:function(e,n,r){r.d(n,{pB:function(){return f},mO:function(){return h}});var t=r(8519),i=r(2061);function s(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=(0,i.Z)(e)););return e}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,n,r){var t=s(e,n);if(t){var i=Object.getOwnPropertyDescriptor(t,n);return i.get?i.get.call(arguments.length<3?e:r):i.value}},a.apply(this,arguments)}var l=r(7411),c=r(1135),o=r(2518),u=r(2485),d=r(2379),m=r(4636),x=function(e){(0,o.Z)(r,e);var n=(0,u.Z)(r);function r(){return(0,c.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r)}(m.x5),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.eR)(e,"account/",x)},v=function(e){(0,o.Z)(r,e);var n=(0,u.Z)(r);function r(){return(0,c.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"createFromUrl",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a((0,i.Z)(r.prototype),"create",this).call(this,{src:e,alt_text:n})}},{key:"create",value:function(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.name.length>499)return Promise.reject("Filename too long");var l=new FormData;return l.append("src",e,e.name),n&&l.append("alt_text",n),a((0,i.Z)(r.prototype),"create",this).call(this,l,(0,t.Z)((0,t.Z)({},s),{},{headers:{"content-type":"multipart/form-data"}}))}},{key:"updateMobile",value:function(e){return this.update(e,void 0,"mobile")}},{key:"updateSquare",value:function(e){return this.update(e,void 0,"square")}},{key:"updateThumb",value:function(e){e.name;return this.update(e,void 0,"thumb")}},{key:"updateValues",value:function(e){return a((0,i.Z)(r.prototype),"update",this).call(this,e)}},{key:"update",value:function(e,n,t){if(e.name.length>499)return Promise.reject("Filename too long");var s=new FormData;switch(t||(t="src"),t){case"mobile":s.append("src_mobile",e,e.name);break;case"thumb":s.append("thumb",e,e.name);break;case"square":s.append("thumb_sq",e,e.name);break;default:s.append("src",e,e.name)}return n&&s.append("alt_text",n),a((0,i.Z)(r.prototype),"update",this).call(this,s,{headers:{"content-type":"multipart/form-data"}})}}]),r}(m.x5),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.eR)(e,"staffimages",v)};f.HorizontalGallery=d.Ei.HorizontalGallery,f.VerticalGallery=d.Ei.VerticalGallery,f.Mobile=d.Ei.Mobile,f.Thumb=d.Ei.Thumb,f.Square=d.Ei.Square,f.Picture=d.Ei.Picture,f.Image=d.Ei.Image},4636:function(e,n,r){r.d(n,{eR:function(){return h},x5:function(){return x}});var t=r(7411),i=r(1135),s=r(6690),a=r(2518),l=r(2485),c=r(1714),o=r.n(c),u=r(2145);o().defaults.xsrfCookieName="csrftoken",o().defaults.xsrfHeaderName="X-CSRFTOKEN",o().defaults.headers.post["Content-Type"]="application/json";var d="".concat(u.yK).concat("/api/v1/"),m=o().create({baseURL:d,timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}}),x=function(e){(0,a.Z)(r,e);var n=(0,l.Z)(r);function r(e,t){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return(0,i.Z)(this,r),(a=n.call(this,e,t,l)).data=e,Object.assign((0,s.Z)(a),e),a}return(0,t.Z)(r)}(u.Id);function h(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,t=new r(e,n);return t}},8067:function(e,n,r){r.d(n,{l:function(){return k},Z:function(){return H}});var t=r(2411),i=r(6520),s=r(6009),a=r(1096),l=r(8519),c=r(8312),o=r(5603),u=r(1135),d=r(7411),m=r(2518),x=r(2485),h=function(e){(0,m.Z)(r,e);var n=(0,x.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,d.Z)(r,[{key:"find",value:function(e){return this.list({params:{q:e}})}}]),r}(a.x5),v=function(e){(0,m.Z)(r,e);var n=(0,x.Z)(r);function r(){return(0,u.Z)(this,r),n.apply(this,arguments)}return(0,d.Z)(r,[{key:"addItem",value:function(e,n,r){return this.post("".concat(this._path,"item/").concat(e,"/"),{size:n,qty:r})}},{key:"updateItem",value:function(e,n){return this.post("".concat(this._path,"item/").concat(e,"/"),(0,l.Z)({},n),{timeout:5e3})}},{key:"destroyItem",value:function(e){return this.delete("".concat(this._path,"item/").concat(e,"/"),{timeout:5e3})}}]),r}(a.x5),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.eR)(e,"carts",v)},p=r(2145),j=r(8136),g=["label","text","error","fieldCN"],b=["onCustomerSelect","allowSuggestions"],Z=["label","text","error","fieldCN"],N=function(e){var n=e.customers,r=e.onItemClick;return(0,j.jsx)("div",{className:"mt-1 border-1 rounded bg-white",children:n.map((function(e){return(0,j.jsxs)("div",{className:"d-flex justify-content-between p-1 border-bottom",onClick:function(){return r(e)},children:[(0,j.jsx)("div",{className:"fw-bold",children:"".concat(e.first_name," ").concat(e.last_name)}),(0,j.jsx)("div",{className:"text-muted text-sm",children:e.phone})]},null===e||void 0===e?void 0:e.slug)}))})},y=function(e){var n=e.label,r=void 0===n?"Nom":n,i=e.text,u=e.error,d=e.fieldCN,m=(0,c.Z)(e,g),x=t.useState([]),v=(0,s.Z)(x,2),f=v[0],Z=v[1],y=m.onCustomerSelect,S=m.allowSuggestions,_=(0,c.Z)(m,b);return(0,j.jsx)("div",{className:"",children:(0,j.jsx)(o.ZP.Field,{label:r,error:u,text:i,className:d,children:(0,j.jsxs)("div",{className:"span-md-3",children:[(0,j.jsx)(o.ZP.Text,(0,l.Z)((0,l.Z)({required:!0,name:"last_name"},_),{},{maxLength:99,minLength:2,onDebounce:function(e){var n=e.value;!S||!n||n.length<3||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.eR)(e,"customers",h)}().find(n).then((function(e){var n=new p.HM(e).items;n.length>0?Z(n):Z([])})).catch((function(e){}))}})),S&&Boolean(f.length)&&(0,j.jsx)(N,{customers:f,onItemClick:function(e){null===y||void 0===y||y(e)}})]})})})},S=function(e){return(0,j.jsx)(o.iF,(0,l.Z)({required:!0},e))},_=function(e){return(0,j.jsx)(o.s8,(0,l.Z)({},e))},P=function(e){var n=e.label,r=void 0===n?"Num\xe9ro de t\xe9l\xe9phone":n,t=e.text,i=e.error,s=e.fieldCN,a=(0,c.Z)(e,Z);return(0,j.jsx)(o.ZP.Field,{label:r,error:i,text:t,className:s,children:(0,j.jsx)(o.ZP.Phone,(0,l.Z)({required:!0,name:"phone"},a))})},k={LName:y,FName:S,Email:_,Phone:P},C=["children","instance","onSuccess","onError","onCustomerSelect"],w=function(e){var n=e.children,r=e.instance,t=(e.onSuccess,e.onError,e.onCustomerSelect),i=(0,c.Z)(e,C),s=i.fields,a=(0,o.cI)(q(null===r||void 0===r?void 0:r.export(),s)),u=a.errors,d={className:"span-md-3",fieldCN:"d-grid grid-md-5"};return(0,j.jsxs)(o.ZP,(0,l.Z)((0,l.Z)({},i),{},{context:a,className:"customer-form",children:[(0,j.jsxs)("div",{className:"base-fields",children:[(null===s||void 0===s?void 0:s.includes("last_name"))&&(0,j.jsx)(y,(0,l.Z)((0,l.Z)({allowSuggestions:!0,error:u.last_name},d),{},{onCustomerSelect:t,className:""})),(null===s||void 0===s?void 0:s.includes("first_name"))&&(0,j.jsx)(S,(0,l.Z)({error:u.first_name},d)),(null===s||void 0===s?void 0:s.includes("phone"))&&(0,j.jsx)(P,(0,l.Z)({error:u.phone},d)),(null===s||void 0===s?void 0:s.includes("email"))&&(0,j.jsx)(_,(0,l.Z)({error:u.email},d))]}),n]}))},q=function(e,n){e||(e={first_name:"",last_name:"",email:"",phone:""});var r={};return null===n||void 0===n||n.forEach((function(n){r[n]=e[n]})),r},F=r(2379),T=["data"],E=function(e){var n=e.data;(0,c.Z)(e,T);if(!n||!n.slug)return null;var r=n.first_name,t=n.last_name,i=n.email,s=n.phone;return(0,j.jsxs)("div",{className:"customer-card",children:[(0,j.jsx)("div",{className:"fw-bold",children:"".concat(r," ").concat(t)}),(0,j.jsx)("div",{className:"",children:s}),(0,j.jsx)("div",{className:"text-muted text-sm",children:i})]})};function z(){var e=(0,i.s0)(),n=t.useState(),r=(0,s.Z)(n,2),l=r[0],c=r[1];return(0,j.jsx)(a.ZP.View,{title:"Ajouter une commande",children:(0,j.jsx)("div",{className:"d-flex justify-content-center my-3",children:(0,j.jsx)("div",{className:"w-md-65",children:(0,j.jsx)(a.ZP.Section,{title:"Client",text:"Selectionez ou ajoutez un noubeau client",headerCN:"mb-4",children:l&&l.slug?(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)(E,{data:l}),(0,j.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[(0,j.jsx)(F.zx,{className:"btn btn-round",onClick:function(){return c(void 0)},children:(0,j.jsx)(F.PJ.Xd,{})}),(0,j.jsx)(F.zx,{onClick:function(){!function(n){f().create({customer:n.slug}).then((function(n){var r=n.data;return e("".concat(r.slug,"/"))})).catch((function(e){console.log(e)}))}(l)},className:"btn btn-primary-3",children:"Continuer \xbb"})]})]}):(0,j.jsx)(w,{fields:["first_name","last_name","phone","email"],onSuccess:function(e){e.data},onCustomerSelect:c,children:(0,j.jsx)("div",{className:"d-flex justify-content-center my-4",children:(0,j.jsx)(F.zx,{type:"submit",className:"btn btn-md btn-primary fw-bold",children:"Continuer \xbb"})})})})})})})}var A=r(1408),D=r(2134),I=r(4113),O=["res","setRes","loading"],L=["item","onItemClick"];function W(){var e=(0,A.lr)(),n=((0,s.Z)(e,1)[0],(0,i.UO)().cartSlug),r=((0,o.cI)({q:""}),(0,I._P)(void 0,{published:"include",atc:1}).res),t=(0,D.QT)((function(){return f({slug:n}).retrieve()}),{refreshDeps:[n],onError:function(e){e.response}}),l=t.res,u=t.setRes,d=t.loading,m=((0,c.Z)(t,O),new p.HM(l));if(!m.isSuccess)return null;if(d)return(0,j.jsx)(F.gb,{});var x=f(m.data),h=new p.HM(r).items||[];return console.log(m.data),(0,j.jsx)(a.ZP.View,{title:"Modifier une commande",className:"",children:(0,j.jsxs)("div",{className:"d-grid grid-md-6 gap-2",children:[(0,j.jsx)("div",{className:"span-md-3",children:(0,j.jsx)(a.ZP.Section,{title:"Ajouter des produits",header:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(I.ir,{})}),children:h.filter((function(e){return!x.data.products.includes(e.slug)})).map((function(e){return(0,j.jsx)("div",{className:"",children:(0,j.jsx)(U,{item:e,onItemClick:function(e,n,r){return x.addItem(e.slug,n,r).then((function(e){return u(e),e}))}})},e.slug)}))})}),(0,j.jsx)("div",{className:"span-md-3",children:(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)(a.ZP.Section,{border:!0,title:"Client",actions:(0,j.jsx)(j.Fragment,{children:"Modifier"}),children:(0,j.jsx)(E,{data:x.customer_data})}),(0,j.jsxs)(a.ZP.Section,{border:!0,title:"Panier",actions:x.items.length,footer:(0,j.jsx)(j.Fragment,{children:"Confirmer"}),children:[x.items.map((function(e){var n=e.product,r=e.size,t=e.quantity;return(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("div",{className:"p",children:n.name}),(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("span",{className:"",children:r}),(0,j.jsx)("span",{className:"",children:t})]}),(0,j.jsx)("div",{className:""})]},e.slug)})),(0,j.jsxs)("div",{className:"mt-4",children:[(0,j.jsx)("div",{className:"",children:(0,j.jsx)("span",{className:"",children:"Subtotal"})}),(0,j.jsx)("div",{className:"",children:(0,j.jsx)("span",{className:"",children:"Total"})})]})]})]})})]})})}var U=function(e){var n,r=e.item,t=e.onItemClick,i=((0,c.Z)(e,L),(0,o.cI)({quantity:1,size:""}));if(null===r||void 0===r||!r.slug)return null;var s=r.sizes,u=void 0===s?[]:s,d=(r.is_oos,r.category_data,r.cover_data),m=r.name;r.size_count;return(0,j.jsx)(o.ZP,{context:i,onSubmit:function(e){e.preventDefault(),t(r,i.values.size,i.values.quantity).catch((function(e){i.handleError(e)}))},children:(0,j.jsx)(a.ZP.Section,{border:!0,header:(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)("div",{style:{minWidth:34,maxWidth:50},className:"me-1",children:(0,j.jsx)(a.ZP.Img.Thumb,(0,l.Z)((0,l.Z)({src:"src"},d),{},{className:"rounded"}))}),(0,j.jsxs)("div",{className:"flex-1",title:m,children:[(0,j.jsx)("div",{className:"text-ellipsis text-sm",children:(0,j.jsx)("span",{className:"me-1 fw-bold",children:(0,p.bI)(m,0,45)})}),(0,j.jsxs)("div",{className:"d-flex flex-column flex-md-ro justify-content-between",children:[(0,j.jsxs)("div",{className:"d-grid grid-md-2 gap-1 flex-1",children:[(0,j.jsx)(I.D8,{required:!0,sizes:u.filter((function(e){return e.quantity>0})),error:i.errors.size}),(0,j.jsx)(I.PI,{max:(null===(n=u.find((function(e){return e.slug===i.values.size})))||void 0===n?void 0:n.quantity)||0,min:1})]}),(0,j.jsx)("div",{className:"text-right",children:(0,j.jsx)(o.ZP.Submit,{className:"btn btn-primary-2 btn-md fw-bold",children:"Ajouter"})})]})]})]}),actions:(0,j.jsx)(I._S,(0,l.Z)((0,l.Z)({},r),{},{className:"d-flex flex-wrap"})),className:"mb-1"})})},R=["res","setRes","loading"];function V(){var e,n=(0,D.QT)((function(){return f().list()})),r=n.res,t=(n.setRes,n.loading,(0,c.Z)(n,R),new p.HM(r));return(0,j.jsx)(a.ZP.View,{title:"Sales",actions:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(a.ZP.Link,{to:"cart/",className:"btn btn-primary",children:"Ajouter une commande"})}),children:null===(e=t.items)||void 0===e?void 0:e.map((function(e){var n=e||{},r=n.customer,t=n.items,i=void 0===t?[]:t;return(0,j.jsx)(F.vz,{children:(0,j.jsxs)(A.rU,{to:"cart/".concat(e.slug,"/"),children:[(0,j.jsx)(E,{data:r}),i.map((function(e){var n;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{children:null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.name})})}))]})},e.slug)}))})}function H(){return(0,j.jsxs)(i.Z5,{children:[(0,j.jsx)(i.AW,{path:"cart/:cartSlug/",element:(0,j.jsx)(W,{})}),(0,j.jsx)(i.AW,{path:"cart/",element:(0,j.jsx)(z,{})}),(0,j.jsx)(i.AW,{path:"/",element:(0,j.jsx)(V,{})})]})}},8430:function(e,n,r){r.d(n,{D8:function(){return y},PI:function(){return N},T9:function(){return g},dh:function(){return f}});var t=r(8519),i=r(8312),s=(r(2411),r(5603)),a=r(2379),l=r(8136),c=["data","productInstance"],o=["productInstance"],u=["label","text","error"],d=["label","text","error"],m=["label","text","error"],x=["label","text","error","sizes"],h=["data","productInstance"],v=["onSuccess","onError"],f=function(e){var n=e.data,r=e.productInstance,t=(0,i.Z)(e,c),a=(0,s.cI)({name:n.name||"",code:n.code||"",quantity:n.quantity||0});if(null===n||void 0===n||!n.slug||null===r||void 0===r||!r.slug)return null;var o=t.onSuccess,u=t.onError;return(0,l.jsx)(s.ZP,{context:a,onSubmit:function(e){e.preventDefault(),r.patchSize(n.slug,a.values).then((function(e){return null===o||void 0===o?void 0:o(e)})).catch((function(e){var n;return a.handleError(e),null===t||void 0===t||null===(n=t.onError)||void 0===n?void 0:n.call(t,e)}))},children:(0,l.jsxs)("div",{className:"d-grid grid-5 gap-1",children:[(0,l.jsx)(b,{error:a.errors.name}),(0,l.jsx)(Z,{error:a.errors.code}),(0,l.jsx)(N,{error:a.errors.quantity}),(0,l.jsxs)("div",{className:"span-md-2",children:[(0,l.jsx)(s.ZP.Submit,{value:"Save",className:"btn-primary-2 me-2"}),(0,l.jsx)(S,{productInstance:r,data:n,onSuccess:o,onError:u})]})]})})},p={xs:{name:"Extra-small",code:"XS"},s:{name:"Small",code:"S"},m:{name:"Medium",code:"M"},l:{name:"Large",code:"L"},xl:{name:"Extra-large",code:"XL"}},j={name:"",code:"",quantity:1},g=function(e){var n=e.productInstance,r=(0,i.Z)(e,o),c=(0,s.cI)(j);return null!==n&&void 0!==n&&n.slug?(0,l.jsxs)(s.ZP,{context:c,onSubmit:function(e){e.preventDefault(),n.postSize(c.values).then((function(e){var n;return c.setValues(j),null===r||void 0===r||null===(n=r.onSuccess)||void 0===n?void 0:n.call(r,e)})).catch((function(e){var n;return c.handleError(e),null===r||void 0===r||null===(n=r.onError)||void 0===n?void 0:n.call(r,e)}))},children:[(0,l.jsxs)("div",{className:"d-flex my-2",children:[(0,l.jsx)(a.zx,{onClick:function(){return c.setValues((0,t.Z)((0,t.Z)({},c.values),{},{name:"One-size",code:"ONESIZE"}))},className:"size-select-btn me-1",children:"One/size"}),Object.keys(p).map((function(e){var n=p[e];return(0,l.jsx)(a.zx,{onClick:function(){return c.setValues((0,t.Z)((0,t.Z)({},c.values),n))},className:"size-select-btn me-1",children:e},e)}))]}),(0,l.jsxs)("div",{className:"d-grid grid-5 gap-1",children:[(0,l.jsx)(b,{error:c.errors.name}),(0,l.jsx)(Z,{error:c.errors.code}),(0,l.jsx)(N,{error:c.errors.quantity}),(0,l.jsx)("div",{className:"span-md-2",children:(0,l.jsx)(s.ZP.Submit,{value:"Save",className:"btn-primary-2 me-2"})})]})]}):null},b=function(e){var n=e.label,r=e.text,a=e.error,c=(0,i.Z)(e,u);return(0,l.jsx)(s.ZP.Field,{label:n,text:r,error:a,children:(0,l.jsx)(s.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Entrez le nom de la taille ..."},c),{},{required:!0,name:"name",maxLength:20,minLength:2}))})},Z=function(e){var n=e.label,r=e.text,a=e.error,c=(0,i.Z)(e,d);return(0,l.jsx)(s.ZP.Field,{label:n,text:r,error:a,children:(0,l.jsx)(s.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Entrez le code de la taille ..."},c),{},{required:!0,name:"code",maxLength:10}))})},N=function(e){var n=e.label,r=e.text,a=e.error,c=(0,i.Z)(e,m);return(0,l.jsx)(s.ZP.Field,{label:n,text:r,error:a,children:(0,l.jsx)(s.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Entrez la quantit\xe9 ..."},c),{},{required:!0,type:"number",name:"quantity",min:0}))})},y=function(e){var n=e.label,r=e.text,a=e.error,c=e.sizes,o=(0,i.Z)(e,x);return(0,l.jsx)(s.ZP.Field,{label:n,text:r,error:a,children:(0,l.jsx)(s.ZP.Select,(0,t.Z)((0,t.Z)({},o),{},{required:!0,name:"size",nullValue:{label:"S\xe9lectionnez une taille ..."},children:null===c||void 0===c?void 0:c.map((function(e){var n;return(0,l.jsx)(s.ZP.Option,{label:null===(n=e.code)||void 0===n?void 0:n.toUpperCase(),value:e.slug},e.slug)}))}))})},S=function(e){var n=e.data,r=e.productInstance,s=(0,i.Z)(e,h);if(null===n||void 0===n||!n.slug||null===r||void 0===r||!r.slug)return null;var c=s.onSuccess,o=s.onError,u=(0,i.Z)(s,v);return(0,l.jsx)(a.pu,(0,t.Z)((0,t.Z)({},u),{},{renderHeader:function(){return(0,l.jsx)("div",{children:"Supprimer une taille"})},renderFooter:function(e){var t=e.setOpen;return(0,l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,l.jsx)(a.zx,{onClick:function(){return t(!1)},children:"Annuler"}),(0,l.jsx)(a.zx,{onClick:function(){return r.deleteSize(n.slug).then((function(e){return t(!1),null===c||void 0===c?void 0:c(e)})).catch((function(e){return null===o||void 0===o?void 0:o(e)}))},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,l.jsxs)("div",{className:"p-3",children:["Are you sure you want to delete this size:",(0,l.jsx)("div",{className:"fw-bold",children:n.name})]})},className:"size-delete-button btn-danger-3",children:(0,l.jsx)(a.PJ.rF,{})}))}},421:function(e,n,r){r.d(n,{A5:function(){return N},K1:function(){return S},n9:function(){return b},sq:function(){return Z},wP:function(){return y}});var t=r(6009),i=r(8519),s=r(9062),a=r(8312),l=r(2411),c=r(1408),o=r(6520),u=r(2145),d=r(2379),m=r(1096),x=r(3992),h=r(6574),v=r(3793),f=r(8136),p=["productInstance","onSuccess","onError"],j=["item"],g=["data"],b=function(e){var n=e.productInstance,r=e.onSuccess,t=e.onError,l=(0,a.Z)(e,p);return(0,f.jsx)(m.CD,(0,i.Z)((0,i.Z)({className:"btn-primary-3"},l),{},{multiple:!0,onSuccessMulti:function(e){var i=e.map((function(e){var n=e.data;return null===n||void 0===n?void 0:n.slug})).filter((function(e){var r;return!(null!==(r=n.images)&&void 0!==r&&r.includes(e))}));return n.update({images:[].concat((0,s.Z)(n.images),(0,s.Z)(i))}).then((function(e){return null===r||void 0===r?void 0:r(e)})).catch((function(e){return null===t||void 0===t?void 0:t(e)}))}}))},Z=function(e){var n=e.instance,r=e.onSuccess,t=e.onError,i=e.label;return(0,f.jsxs)(d.pu,{renderHeader:function(){return(0,f.jsxs)("div",{children:["Supprimer '",n.name,"'"]})},renderFooter:function(e){var i=e.setOpen;return(0,f.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,f.jsx)(d.zx,{onClick:function(){return i(!1)},children:"Annuler"}),(0,f.jsx)(d.zx,{onClick:function(){return function(e){n.destroy().then((function(t){null===e||void 0===e||e(!1),null===r||void 0===r||r(t),x.u.destroy({slug:n.slug})})).catch((function(e){return null===t||void 0===t?void 0:t(e)}))}(i)},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,f.jsx)("div",{className:"p-3",children:"Are you sure you want to delete this"})},className:(0,u.UT)(["product-delete-button btn-danger-3",e.className]),children:[(0,f.jsx)(d.PJ.rF,{}),i&&(0,f.jsx)("span",{className:"label",children:i})]})},N=function(e){var n,r=e.item,s=(0,a.Z)(e,j),c=l.useState(!1),o=(0,t.Z)(c,2),u=o[0],x=o[1];if(null===r||void 0===r||!r.slug)return null;var p=s.params,g=s.orderInstance,b=s.stages,Z=void 0===b?[]:b,N=(0,v.Z)(r),y="".concat(N.slug,"/").concat("".concat(p)?"?".concat(p):""),S=N.supplier_item,_=void 0===S?{cost:0}:S,P=N.stage,k=null===Z||void 0===Z?void 0:Z.find((function(e){return e.value===P}));return(0,f.jsx)(d.vz,{border:!0,title:(0,f.jsxs)("div",{className:"d-flex align-itemscenter",onClick:function(){return x(!u)},children:[(0,f.jsx)("div",{style:{width:48},children:(0,f.jsx)(m.ZP.Img.Thumb,(0,i.Z)((0,i.Z)({src:"src"},N.cover_data),{},{className:"rounded"}))}),(0,f.jsxs)("div",{className:"ms-1 d-grid grid-md-3",children:[(0,f.jsxs)("div",{className:"span-md-2",children:[r.is_oos&&(0,f.jsx)("span",{className:"text-sm text-danger",children:"Out of stock"}),(0,f.jsxs)("div",{className:"text-ellipsis text-sm",children:[(0,f.jsx)("span",{className:"me-1 fw-bold",children:r.name_truncated}),(0,f.jsx)(h.TK,{show:r.is_published||!1})]}),(0,f.jsxs)("div",{className:"d-flex text-sm",children:[(0,f.jsx)(h._S,(0,i.Z)((0,i.Z)({},N.export()),{},{className:"d-flex flex-wrap"})),(0,f.jsx)("div",{className:"text-muted px-1",children:"|"}),_&&(null===_||void 0===_?void 0:_.cost)&&(0,f.jsx)("div",{className:"text-muted",children:"".concat(null===_||void 0===_?void 0:_.cost," ").concat((null===g||void 0===g?void 0:g.currency)||"USD")})]})]}),(0,f.jsxs)("div",{className:"text-sm",children:[(0,f.jsx)("div",{children:(0,f.jsxs)("span",{className:"",children:[(null===N||void 0===N||null===(n=N.category_data)||void 0===n?void 0:n.name)||"' - '",_&&(0,f.jsx)("span",{className:"text-muted",children:" | ".concat(_.category)})]})}),(0,f.jsx)("span",{children:"Sizes: ".concat(N.size_count)}),k&&(0,f.jsx)("span",{className:"text-muted",children:" - ".concat(k.label)}),_&&(0,f.jsx)("a",{className:"ms-1",href:_.url,target:"_blank",rel:"noopener noreferrer",children:"\u2197\ufe0f"})]})]})]}),actions:(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsx)(m.ZP.Link,{to:"./".concat(y),className:"btn btn-square btn-primary-3",children:(0,f.jsx)(d.PJ.ws,{})})}),className:"mb-1",children:u&&(0,f.jsx)("div",{className:""})})},y=function(e){var n,r=e.data,t=((0,a.Z)(e,g),(0,v.Z)(r));return(0,f.jsxs)("div",{className:"p-card-list-item p-1 mb-1",children:[(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("div",{className:"p-name text-ellipsis",children:t.name_truncated}),(0,f.jsx)("div",{className:"ms-1",children:(0,f.jsx)(h.TK,{show:t.is_published})})]}),(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(m.pB.Square,(0,i.Z)({},null===t||void 0===t?void 0:t.cover_data)),(0,f.jsxs)("div",{className:"p-info ps-1",children:[(0,f.jsx)(h._S,(0,i.Z)((0,i.Z)({},t.export()),{},{className:"d-flex flex-wrap"})),(0,f.jsx)("div",{className:"p-category",children:null===(n=t.category_data)||void 0===n?void 0:n.name})]})]})]})},S=function(e){var n=e.items,r=e.itempath,i=(0,c.lr)(),s=(0,t.Z)(i,1)[0],a=(0,o.UO)().prodSlug;return(0,f.jsx)("div",{className:"p-card-list-items",children:n.map((function(e){var n="".concat(r).concat(e.slug,"/?").concat(s);return(0,f.jsx)(c.OL,{to:n,className:(0,u.UT)([a===e.slug&&"active"]),children:(0,f.jsx)(y,{data:e})},e.slug)}))})}},3335:function(e,n,r){r.d(n,{Kl:function(){return E},HG:function(){return z},ir:function(){return A},iB:function(){return F},Eh:function(){return T}});var t=r(6009),i=r(8519),s=r(8312),a=r(2411),l=r(5603),c=r(2145),o=r(3992),u=r(3793),d=r(1408),m=r(2379),x=r(7825),h=r(8136),v=["label","text","error","categories"],f=["label","text","error"],p=["label","text","error"],j=["label","text","error"],g=["label","text","error"],b=["label","text","error"],Z=["label","text","error"],N=["label","text","error","required","stages"],y=["label","text","error"],S=["instance","categories","orderSlug"],_=["children"],P=["instance","fields","onSuccess","onError"],k=["children"],C=["categories"],w=["categories"],q=["children"],F=function(e){var n=e.instance,r=e.categories,t=e.orderSlug,a=(0,s.Z)(e,S),c=(0,l.cI)({name:n.name||"",category:n.category||"",description:n.description||"",retail_price:(null===n||void 0===n?void 0:n.retail_price)||0,is_pre_sale:n.is_pre_sale||!1,is_pre_sale_text:n.is_pre_sale_text||""}),o=c.errors,u=e.fields,d=void 0===u?["name","category","description","retail_price","is_pre_sale","is_pre_sale_text"]:u;return(0,h.jsxs)(T,(0,i.Z)((0,i.Z)({},a),{},{context:c,instance:n,fields:d,children:[(0,h.jsx)(z.NameField,{error:o.name}),(0,h.jsx)(z.DescriptionField,{error:o.description}),(0,h.jsxs)("div",{className:"d-grid grid-md-3 gap-2",children:[r&&(0,h.jsx)(z.CategoryField,{categories:r,error:o.category}),(0,h.jsx)(z.RetailPriceField,{error:o.retail_price})]}),(0,h.jsx)(z.PresaleCheckboxField,{label:"En pr\xe9-vente",error:o.is_pre_sale}),c.values.is_pre_sale&&(0,h.jsx)(z.PresaleTextField,{label:"Pre-sale text",placeholder:"Explain ...",error:o.is_pre_sale_text}),(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,h.jsx)("div",{children:t&&(null===n||void 0===n?void 0:n.slug)&&(0,h.jsx)(m.zx,{onClick:function(){(0,x.SupplierOrder)({slug:t}).destroyItem(n.slug)},children:"Remove from order"})}),(0,h.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3 btn-md"})]})]}))};function T(e){var n=e.children,r=(0,s.Z)(e,_),t=r.instance,a=void 0===t?(0,c.q9)("StaffProduct instance"):t,l=r.fields,u=void 0===l?(0,c.q9)("fields instance"):l,d=r.onSuccess,m=r.onError,x=(0,s.Z)(r,P),v=x.context;return(0,h.jsx)(z,(0,i.Z)((0,i.Z)({},x),{},{onSubmit:function(e){var n;e.preventDefault(),null===r||void 0===r||null===(n=r.onWillSubmit)||void 0===n||n.call(r);var t={};return u.forEach((function(e){var n=v.values[e];null!=n&&("is_pre_sale_dt"!=e||n)&&(t[e]=n)})),a.update(t).then((function(e){var n=e.data;null===d||void 0===d||d(n),o.u.update(n)})).catch((function(e){return m?m(e):v.handleError(e)}))},children:n}))}var E=function(e){var n=(0,l.cI)({name:"",retail_price:"",description:""}),r=n.errors;return(0,h.jsxs)(z,{context:n,onSubmit:function(r){r.preventDefault(),(0,u.Z)().create(n.values).then((function(n){var r;return null===e||void 0===e||null===(r=e.onSuccess)||void 0===r?void 0:r.call(e,n)})).catch((function(e){return n.handleError(e)}))},children:[(0,h.jsx)(z.NameField,{label:"Nom du produit",error:r.name}),(0,h.jsx)(z.RetailPriceField,{required:!1,label:"Prix du produit",error:r.retail_price}),(0,h.jsx)(z.DescriptionField,{label:"Description du produit",error:r.description}),(0,h.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]})},z=function(e){return(0,h.jsx)(l.ZP,(0,i.Z)({},e))};z.NameField=function(e){return(0,h.jsx)(l.wd,(0,i.Z)({placeholder:"Entrez un titre clair et concis ..."},e))},z.DescriptionField=function(e){return(0,h.jsx)(l.F$,(0,i.Z)({placeholder:"D\xe9crivez les caract\xe9ristiques et les avantages ..."},e))},z.CategoryField=function(e){var n,r=e.label,t=e.text,c=e.error,o=e.categories,u=(0,s.Z)(e,v);return(0,h.jsx)(l.ZP.Field,{label:r,text:t,error:c,children:(0,h.jsx)(l.ZP.Select,(0,i.Z)((0,i.Z)({},u),{},{required:!0,name:"category",nullValue:{label:"S\xe9lectionnez une cat\xe9gorie ..."},children:null===o||void 0===o||null===(n=o.items)||void 0===n?void 0:n.map((function(e){return(0,a.createElement)(l.ZP.Option,(0,i.Z)((0,i.Z)({},e),{},{key:e.value}))}))}))})},z.SalePriceField=function(e){var n=e.label,r=e.text,t=e.error,a=(0,s.Z)(e,f);return(0,h.jsx)(l.ZP.Field,{label:n,text:r,error:t,children:(0,h.jsx)(l.ZP.Text,(0,i.Z)((0,i.Z)({"aria-describedby":"sale_price_label",min:"0",step:"0.01",required:!0,placeholder:"Prix r\xe9duit"},a),{},{type:"number",name:"sale_price"}))})},z.OnSaleCheckboxField=function(e){var n=e.label,r=e.text,t=e.error,a=(0,s.Z)(e,p);return(0,h.jsx)(l.ZP.Field,{label:n,text:r,error:t,checkbox:!0,children:(0,h.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},a),{},{name:"is_on_sale"}))})},z.OosCheckboxField=function(e){var n=e.label,r=void 0===n?"En rupture de stock":n,t=e.text,a=e.error,c=(0,s.Z)(e,g);return(0,h.jsx)(l.ZP.Field,{label:r,text:t,error:a,checkbox:!0,children:(0,h.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},c),{},{name:"is_oos"}))})},z.PresaleTextField=function(e){var n=e.label,r=e.text,t=e.error,a=(0,s.Z)(e,b);return(0,h.jsx)(l.ZP.Field,{label:n,text:r,error:t,children:(0,h.jsx)(l.ZP.TextAreaX,(0,i.Z)((0,i.Z)({placeholder:""},a),{},{name:"is_pre_sale_text","aria-describedby":"is_pre_sale_text_label"}))})},z.RetailPriceField=function(e){var n=e.label,r=e.text,t=e.error,a=(0,s.Z)(e,Z);return(0,h.jsx)(l.ZP.Field,{label:n,text:r,error:t,children:(0,h.jsx)(l.ZP.Text,(0,i.Z)((0,i.Z)({required:!0,placeholder:"Prix","aria-describedby":"retail_price_label",min:"0",step:"0.01"},a),{},{type:"number",name:"retail_price"}))})},z.StageSelectField=function(e){var n,r=e.label,t=e.text,c=e.error,o=e.required,u=void 0===o||o,d=e.stages,m=(0,s.Z)(e,N);return(0,h.jsx)(l.ZP.Field,{label:r,text:t,error:c,children:(0,h.jsx)(l.ZP.Select,(0,i.Z)((0,i.Z)({required:u,name:"stage",nullValue:{label:"Select stage"}},m),{},{children:null===d||void 0===d||null===(n=d.map)||void 0===n?void 0:n.call(d,(function(e){return(0,a.createElement)(l.ZP.Option,(0,i.Z)((0,i.Z)({},e),{},{key:e.value}))}))}))})},z.PresaleCheckboxField=function(e){var n=e.label,r=e.text,t=e.error,a=(0,s.Z)(e,j);return(0,h.jsx)(l.ZP.Field,{label:n,text:r,error:t,checkbox:!0,children:(0,h.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},a),{},{name:"is_pre_sale"}))})},z.IsExplicitCheckboxField=function(e){var n=e.label,r=void 0===n?"Exclude from facebook feed":n,t=e.text,a=e.error,c=(0,s.Z)(e,y);return(0,h.jsx)(l.ZP.Field,{label:r,text:t,error:a,checkbox:!0,children:(0,h.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},c),{},{name:"is_explicit"}))})};var A=function e(n){var r=n.children,c=(0,s.Z)(n,k),o=(0,d.lr)(),u=(0,t.Z)(o,2),m=u[0],x=u[1],v=a.useState(m.get("q")||""),f=(0,t.Z)(v,2),p=f[0],j=f[1],g=c.categories,b=(0,s.Z)(c,C);return(0,h.jsx)("form",(0,i.Z)((0,i.Z)({},b),{},{action:".",method:"GET",onSubmit:function(e){e.preventDefault(),p?m.set("q",p):m.delete("q"),m.delete("page"),x(m)},children:r||(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"mb-2 d-flex",children:[(0,h.jsx)("input",{type:"text",name:"q",value:p,onChange:function(e){var n=e.target.value;j(n),!n&&m.get("q")&&m.delete("q")},className:"miq-form-input flex-1",placeholder:"Cherchez un produit par nom, categorie ou numero de serie ..."}),(0,h.jsx)(l.ZP.Submit,{value:"Search",className:"btn-primary-3 ms-1"})]}),g&&(0,h.jsx)(e.Category,{params:m,setParams:x,categories:g}),(0,h.jsx)(e.Published,{params:m,setParams:x,className:"mb-1"}),(0,h.jsx)(e.Sale,{params:m,setParams:x,className:"mb-1"}),(0,h.jsx)(e.PreSale,{params:m,setParams:x,className:"mb-1"})]})}))};A.Category=function(e){var n=e.categories,r=(0,s.Z)(e,w);return(0,h.jsxs)(D,(0,i.Z)((0,i.Z)({emptyLabel:"Categorie ..."},r),{},{name:"cat",children:[(0,h.jsx)("option",{value:"no-cat",children:"Sans cat\xe9gorie"}),n.items.map((function(e){return(0,h.jsx)("option",{value:e.value,children:e.label},e.slug)}))]}))},A.Published=function(e){return(0,h.jsxs)(D,(0,i.Z)((0,i.Z)({emptyLabel:"Tous les produits ..."},e),{},{name:"published",children:[(0,h.jsx)("option",{value:"include",children:"Produits publi\xe9s"}),(0,h.jsx)("option",{value:"pinned",children:"Produits \xe9pingl\xe9s"}),(0,h.jsx)("option",{value:"exclude",children:"Produits non publi\xe9s"}),(0,h.jsx)("option",{value:"explicit",children:"Produits exclus de Facebook"})]}))};var D=function(e){var n=e.children,r=(0,s.Z)(e,q),t=r.name,i=r.params,a=r.setParams,l=r.emptyLabel;return(0,h.jsxs)("select",{className:(0,c.UT)(["miq-select",r.className]),name:t,value:i.get(t)||"",onChange:function(e){var n=e.target.value;n?i.set(t,n):i.delete(t),i.delete("page"),a(i)},children:[l&&(0,h.jsx)("option",{value:"",children:l}),n]})};A.PreSale=function(e){return(0,h.jsx)(I,(0,i.Z)((0,i.Z)({},e),{},{name:"presale",label:"En pr\xe9-vente"}))},A.Sale=function(e){return(0,h.jsx)(I,(0,i.Z)((0,i.Z)({},e),{},{name:"sale",label:"En promo"}))};var I=function(e){var n=e.label,r=e.name,t=e.params,i=e.setParams,s=e.inputId;return(0,h.jsxs)("div",{className:(0,c.UT)(["miq-query-filter-toggle d-flex align-items-center",e.className]),children:[(0,h.jsx)("input",{type:"checkbox",className:"miq-checkbox me-1",id:s,onChange:function(e){var n=e.target.checked;n?t.set(r,"".concat(n)):t.delete(r),t.delete("page"),i(t)},checked:Boolean(t.get(r))||!1}),(0,h.jsx)("label",{htmlFor:s,children:n})]})}},9953:function(e,n,r){r.d(n,{Z:function(){return t.Z},_:function(){return i._}});var t=r(3793),i=r(5566)},3793:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(8519),i=r(1135),s=r(7411),a=r(2518),l=r(2485),c=r(1096),o=function(e){(0,a.Z)(r,e);var n=(0,l.Z)(r);function r(){return(0,i.Z)(this,r),n.apply(this,arguments)}return(0,s.Z)(r,[{key:"publish",value:function(){return this.patch("".concat(this._path,"publish/"),{is_published:!0})}},{key:"unpublish",value:function(){return this.patch("".concat(this._path,"publish/"),{is_published:!1})}},{key:"postSize",value:function(e){return this.post("".concat(this._path,"size/new/"),e)}},{key:"patchSize",value:function(e,n){return this.patch("".concat(this._path,"size/").concat(e,"/"),n)}},{key:"deleteSize",value:function(e){return this.delete("".concat(this._path,"size/").concat(e,"/"))}},{key:"postAttribute",value:function(e){return this.post("".concat(this._path,"attribute/new/"),e)}},{key:"patchAttribute",value:function(e,n){return this.patch("".concat(this._path,"attribute/").concat(e,"/"),n)}},{key:"deleteAttribute",value:function(e){return this.delete("".concat(this._path,"attribute/").concat(e,"/"))}},{key:"swapCover",value:function(e){return this.patch("".concat(this._path,"swap-cover/"),{slug:e})}}]),r}(c.x5),u=function(e){var n=e.dt_published;return n&&(n=new Date(n)),(0,c.eR)((0,t.Z)((0,t.Z)({},e),{},{dt_published:n}),"products",o)}},5566:function(e,n,r){r.d(n,{_:function(){return c}});var t=r(8519),i=r(6009),s=r(1408),a=r(2134),l=r(3793),c=function(e,n){var r=(0,s.lr)(),c=(0,i.Z)(r,1)[0],o=c.get("q"),u=c.get("cat"),d=c.get("page"),m=c.get("published"),x=c.get("presale"),h=c.get("sale"),v=(0,t.Z)({page:d,cat:u,published:m,presale:x,sale:h,q:o},n);return e&&(v.supplier_order_slug=e),(0,a.QT)((function(){return(0,l.Z)({}).list({params:v})}),{refreshDeps:[o,d,u,m,x,h,e]})}},4627:function(e,n,r){r.r(n),r.d(n,{OrderSettingUpdateView:function(){return V},default:function(){return L}});var t=r(8519),i=r(6009),s=r(8312),a=r(2411),l=r(5603),c=r(2134),o=r(1096),u=r(2145),d=r(6520),m=r(3432),x=r(2379),h=r(3335),v=r(8136),f=["instance","fields"],p=["onSuccess","onError"],j=["label","text","error"],g=["label","text","error"],b=["label","text","error"],Z=["label","text","error"],N=["label","text","error","currencies"],y=["label","text","error","suppliers"],S=["children"],_=function(e){var n=e.instance,r=e.fields,i=(0,s.Z)(e,f),a=i.onSuccess,l=i.onError,c=(0,s.Z)(i,p),o=c.context;return(0,v.jsx)(P,(0,t.Z)((0,t.Z)({},c),{},{onSubmit:function(e){e.preventDefault();var t={};return r.forEach((function(e){var n=o.values[e];null!=n&&(t[e]=n)})),n.update(t).then((function(e){return null===a||void 0===a?void 0:a(e)})).catch((function(e){var n;return l?l(e):null===o||void 0===o||null===(n=o.handleError)||void 0===n?void 0:n.call(o,e)}))}}))},P=function(e){return(0,v.jsx)(l.ZP,(0,t.Z)({},e))};P.NameField=function(e){var n=e.label,r=void 0===n?"Name":n,i=e.text,a=void 0===i?"Write a name to help remember your order.":i,c=e.error,o=(0,s.Z)(e,j);return(0,v.jsx)(l.ZP.Field,{label:r,text:a,error:c,children:(0,v.jsx)(l.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Nom",maxLength:99},o),{},{name:"name"}))})},P.OrderIDField=function(e){var n=e.label,r=void 0===n?"Order ID":n,i=e.text,a=e.error,c=(0,s.Z)(e,g);return(0,v.jsx)(l.ZP.Field,{label:r,text:i,error:a,children:(0,v.jsx)(l.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Order ID",maxLength:99},c),{},{name:"order_id"}))})},P.IsPaidField=function(e){var n=e.label,r=void 0===n?"Pay\xe9":n,i=e.text,a=e.error,c=(0,s.Z)(e,b);return(0,v.jsx)(l.ZP.Field,{label:r,text:i,error:a,checkbox:!0,children:(0,v.jsx)(l.ZP.Checkbox,(0,t.Z)((0,t.Z)({},c),{},{name:"is_paid"}))})},P.TotalCostField=function(e){var n=e.label,r=void 0===n?"Co\xfbt total":n,i=e.text,a=e.error,c=(0,s.Z)(e,Z);return(0,v.jsx)(l.ZP.Field,{label:r,text:i,error:a,children:(0,v.jsx)(l.ZP.Text,(0,t.Z)((0,t.Z)({min:"0",step:"0.01"},c),{},{required:!0,type:"number",name:"total_cost"}))})},P.CurrencyField=function(e){var n=e.label,r=e.text,i=void 0===r?"Select the supplier currency.":r,c=e.error,o=e.currencies,u=(0,s.Z)(e,N);return(0,v.jsx)(l.ZP.Field,{label:n,text:i,error:c,children:(0,v.jsx)(l.ZP.Select,(0,t.Z)((0,t.Z)({},u),{},{required:!0,name:"currency",nullValue:{label:"S\xe9lectionnez une monnaie ..."},children:null===o||void 0===o?void 0:o.map((function(e){return(0,a.createElement)(l.ZP.Option,(0,t.Z)((0,t.Z)({},e),{},{key:e.value}))}))}))})},P.SupplierField=function(e){var n=e.label,r=e.text,i=void 0===r?"Select the supplier.":r,c=e.error,o=e.suppliers,u=(0,s.Z)(e,y);return(0,v.jsx)(l.ZP.Field,{label:n,text:i,error:c,children:(0,v.jsx)(l.ZP.Select,(0,t.Z)((0,t.Z)({},u),{},{required:!0,name:"supplier",nullValue:{label:"S\xe9lectionnez le supplier ..."},children:null===o||void 0===o?void 0:o.map((function(e){return(0,a.createElement)(l.ZP.Option,(0,t.Z)((0,t.Z)({},e),{},{key:e.value}))}))}))})},P.StageSelectField=function(e){return(0,v.jsx)(h.HG.StageSelectField,(0,t.Z)({required:!1},e))};var k=function(e){e.children;var n,r=(0,s.Z)(e,S),c=r.orderInstance,o=r.onSuccess,u=r.onError,d=null===c||void 0===c||null===(n=c.supplier)||void 0===n?void 0:n.toLowerCase(),m=(0,l.cI)({supplier_name:d,url:""}),x=a.useState(!1),h=(0,i.Z)(x,2),f=h[0],p=h[1];return(0,v.jsxs)(l.ZP,{context:m,onSubmit:function(e){e.preventDefault();var n=m.values.url,r=function(e){return p(!1),m.setValue("url",""),null===o||void 0===o?void 0:o(e)},i=function(e){return m.setErrors((0,t.Z)((0,t.Z)({},m.errors),{},{url:"Something went wrong."})),p(!1),null===u||void 0===u?void 0:u(e)},s="Invalid Url: does not match supplier ".concat(c.supplier);switch(d){case"fnova":return n.includes("fashionnova")?(p(!0),c.postFnova(n).then(r).catch(i)):m.setErrors({url:s});case"plt":return n.includes("prettylittlething")?(p(!0),c.postPlt(n).then(r).catch(i)):m.setErrors({url:s});default:return n.includes(d)?(p(!0),c.postShein(n).then(r).catch(i)):m.setErrors({url:s})}},className:"supplier-product-add-form",children:[(0,v.jsx)(l.ZP.Field,{error:m.errors.url,children:(0,v.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center",children:[(0,v.jsx)(l.ZP.Text,{required:!0,autoFocus:!0,name:"url",type:"url",placeholder:"Add ".concat(d," product source url ..."),className:"me-1",disabled:f}),(0,v.jsx)("div",{className:"mt-1 mt-md-0",children:(0,v.jsx)(l.ZP.Submit,{value:"Add product",className:"btn btn-primary-3",disabled:f})})]})}),f&&(0,v.jsx)("div",{className:"my-3",children:"Getting product data. Please wait ..."})]})},C=r(9062),w=r(9953),q=r(421);function F(e){var n,r=e.orderInstance,s=e.refreshOrder,c=e.categories,u=e.stages,m=(0,d.UO)().ordSlug,f=(0,w._)(m),p=f.res,j=void 0===p?{data:{results:[]}}:p,g=f.refresh,b=a.useState([]),Z=(0,i.Z)(b,2),N=Z[0],y=Z[1],S=(0,l.cI)({category:""}),_=0!==N.length;return(0,v.jsx)(o.ZP.Section,{actions:_&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{className:"p-1",onClick:function(){return y([])},style:{cursor:"pointer"},children:"[x]"})}),footer:(0,v.jsx)(x.tl,(0,t.Z)((0,t.Z)({},j.data),{},{component:o.ZP.NavLink,to:!0})),className:"supplier-p-list",children:null!==(n=j.data)&&void 0!==n&&n.results.length?(0,v.jsxs)(v.Fragment,{children:[_&&(0,v.jsxs)("div",{className:"bg-white p-1",style:{position:"sticky",top:0,zIndex:1e3},children:[(0,v.jsx)(l.ZP,{context:S,children:(0,v.jsx)("div",{className:"d-flex",children:c&&(0,v.jsx)(h.HG.CategoryField,{categories:c,error:S.errors.category})})}),(0,v.jsx)(x.zx,{className:"btn-primary",onClick:function(){var e=S.values.category;e&&r.updateCategories(e,N).then((function(e){g(),S.setValue("category","")})).catch((function(e){}))},children:"Publier"})]}),j.data.results.map((function(e){return(0,a.createElement)(E,{orderInstance:r,categories:c,selected:N,setSelected:y,refreshOrder:s,stages:u,instance:(0,w.Z)(e),key:e.slug})}))]}):null})}var T=function(e){var n=e.instance,r=e.selected,t=e.setSelected;return(0,v.jsx)("input",{type:"checkbox",name:"selected",className:"me-2",checked:r.includes(n.slug),onChange:function(e){var i=e.target.checked;t(i?[].concat((0,C.Z)(r),[n.slug]):function(e){return e.filter((function(e){return e!==n.slug}))})}})},E=function(e){var n,r=a.useState(!1),s=(0,i.Z)(r,2),l=s[0],c=s[1],u=e.instance,d=e.categories,m=a.useState(!1),f=(0,i.Z)(m,2),p=f[0],j=f[1];if(l)return null;var g=u.supplier_item,b=u.stage,Z=e.orderInstance,N=e.stages,y=void 0===N?[]:N,S=null===y||void 0===y?void 0:y.find((function(e){return e.value===b}));return(0,v.jsx)(x.vz,{border:!0,title:(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)(T,(0,t.Z)({},e)),(0,v.jsx)("div",{style:{width:48,height:48},onClick:function(){return j(!p)},children:(0,v.jsx)(o.ZP.Img.Square,(0,t.Z)((0,t.Z)({slug:"slug",src:"src"},u.cover_data),{},{className:"rounded"}))}),(0,v.jsxs)("div",{className:"ms-1",children:[(0,v.jsx)("div",{className:"text-ellipsis",children:u.name}),(0,v.jsxs)("div",{className:"text-sm",children:[u.is_on_sale&&u.sale_price&&(0,v.jsxs)("span",{className:"",children:[u.sale_price," ","<-"," "]}),(0,v.jsx)("span",{className:"",children:u.retail_price}),(0,v.jsxs)("span",{className:"text-muted",children:[" | ",g.cost," ",Z.currency]}),(0,v.jsxs)("span",{className:"",children:[" - ",(null===(n=u.category_data)||void 0===n?void 0:n.name)||"' - '",(0,v.jsxs)("span",{className:"text-muted",children:[" | ",g.category]})]}),S&&(0,v.jsxs)("span",{className:"text-muted",children:[" - ",S.label]}),(0,v.jsx)("a",{className:"btn ms-1",href:"",target:"_blank",rel:"noopener noreferrer",children:"\u2197\ufe0f"})]})]})]}),actions:(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)(q.sq,{instance:u,onSuccess:function(){var n;c(!0),null===e||void 0===e||null===(n=e.refreshOrder)||void 0===n||n.call(e)},className:"me-2"}),(0,v.jsx)(o.ZP.Link,{to:"./".concat(u.slug,"/"),className:"btn btn-primary-3",children:(0,v.jsx)(x.PJ.ws,{})})]}),className:"suppier-p-list-item bg-white",children:p&&(0,v.jsxs)(x.j6,{className:"form-tab no-scroll-bar gap-2",children:[(0,v.jsx)(h.iB,{instance:u,categories:d,orderSlug:null===Z||void 0===Z?void 0:Z.slug}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("div",{className:"mb-1",children:"".concat(g.item_id?(0,v.jsxs)("span",{className:"",children:["Item ID: ",g.item_id]}):"")}),(0,v.jsxs)("ul",{children:[g.category&&(0,v.jsxs)("li",{className:"mb-1",children:[(0,v.jsx)("div",{className:"text-sm",children:"Supplier Category"}),(0,v.jsx)("div",{className:"text-muted",children:g.category})]}),(0,v.jsxs)("li",{className:"mb-1",children:[(0,v.jsxs)("div",{className:"text-sm",children:["FOB Cost(",Z.currency,")"]}),(0,v.jsx)("div",{className:"text-muted",children:g.cost})]}),g.url&&(0,v.jsx)("li",{className:"",children:(0,v.jsx)("a",{href:g.url,target:"_blank",className:"text-underline",rel:"noopener noreferrer",children:"View supplier product page"})})]})]})]})})},z=r(9002),A=["category__name"],D=["children","tab","active"],I={name:"",order_id:"",stage:"",currency:"USD",supplier:"",is_paid:!1,total_cost:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};return Object.keys(I).forEach((function(r){n[r]=e["".concat(r)]||I["".concat(r)]})),n};function L(){var e,n,r,t=(0,d.UO)().ordSlug,i=(0,l.cI)(O()),s=a.useContext(z.h2),h=s.suppliers,f=s.currencies,p=i.setValues,j=(0,c.QT)((function(){return(0,m.e)({slug:t}).retrieve()}),{refreshDeps:[t],onSuccess:function(e){return p(O(e.data))}}),g=j.res,b=j.loading,Z=j.setLoading,N=j.setRes,y=j.refresh,S=new u.HM(g);if(!S.isSuccess)return null;var k=(0,m.e)(S.data);return k.supplier&&k.currency?(0,v.jsx)(o.ZP.View,{title:i.values.name,back:"/staff/store/orders/",actions:(0,v.jsx)(o.ZP.NavLink,{to:"settings/",children:(0,v.jsx)(x.PJ.XV,{})}),children:(0,v.jsxs)("div",{className:"d-flex flex-column flex-xl-row",children:[(0,v.jsx)("div",{className:"w-100",children:(0,v.jsx)(o.ZP.Section,{header:(0,v.jsx)(U,{instance:k,setLoading:Z,setOrder:N,categories:null===S||void 0===S||null===(e=S.data)||void 0===e?void 0:e.categories}),children:b?(0,v.jsx)(x.gb,{icon:!0}):(0,v.jsx)(F,{orderInstance:k,categories:null===S||void 0===S||null===(n=S.data)||void 0===n?void 0:n.categories,stages:null===S||void 0===S||null===(r=S.data)||void 0===r?void 0:r.stages,refreshOrder:y})})}),(0,v.jsx)("div",{className:"min-w-35 ps-md-1",children:(0,v.jsx)(W,{loading:b,instance:k})})]})}):(0,v.jsx)(o.ZP.View,{title:"Modifier une commande",back:"/staff/store/orders/",children:(0,v.jsx)(o.ZP.Section,{className:"d-flex justify-content-center mt-4",children:(0,v.jsxs)(_,{context:i,instance:k,fields:["name","currency","supplier"],onSuccess:function(e){return N(e)},children:[(0,v.jsx)(P.NameField,{required:!0,label:"Nom",error:i.errors.currency}),(0,v.jsx)(P.SupplierField,{required:!0,label:"Supplier",suppliers:h,error:i.errors.supplier}),(0,v.jsx)(P.CurrencyField,{required:!0,label:"Supplier Currency",currencies:f,error:i.errors.currency}),(0,v.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]})})})}var W=function e(n){var r,t,i,a,l,c=n.loading,u=n.instance;return(0,v.jsxs)(o.ZP.Section,{border:!0,className:"bg-white mb-1",title:"Order Details".concat(!c&&" (".concat(null===(r=u.products)||void 0===r?void 0:r.length,")")),text:"Supplier: ".concat(u.supplier," | Currency: ").concat(u.currency),children:[(0,v.jsxs)("div",{className:"mb-2",children:["Categories",(0,v.jsx)("ul",{children:null===u||void 0===u||null===(t=u.by_categories)||void 0===t||null===(i=t.filter((function(e){return null===e||void 0===e?void 0:e.category__name})))||void 0===i?void 0:i.map((function(n){var r=n.category__name,t=(0,s.Z)(n,A);return(0,v.jsxs)(e.Li,{title:r,children:[": ",t.count]},r)}))})]}),(0,v.jsxs)("ul",{className:"mb-3",children:[(0,v.jsxs)(e.Li,{title:"Average cost: ",children:[u.avg_cost," ",u.currency]}),(0,v.jsx)(e.Li,{title:"Total cost: ",children:"".concat(u.total_cost||(null===u||void 0===u||null===(a=u.items_cost)||void 0===a?void 0:a.amountWithSymbol)," ").concat(u.currency)}),(0,v.jsx)(e.Li,{title:"Est. revenue: ",children:null===u||void 0===u||null===(l=u.items_revenue)||void 0===l?void 0:l.amount})]})]})};W.Li=function(e){var n=e.children,r=e.title;return(0,v.jsxs)("li",{children:[(0,v.jsx)("span",{className:"mr-2 text-muted",children:r}),n]})};var U=function(e){var n=e.instance,r=e.setLoading,t=e.setOrder,s=e.categories,l=a.useState("filter"),c=(0,i.Z)(l,2),u=c[0],d=c[1];return(0,v.jsx)(o.ZP.Section,{border:!0,title:(0,v.jsx)("div",{children:(0,v.jsx)(R,{tab:u,onClick:function(){return d("filter")},active:"filter"===u,children:(0,v.jsx)(x.PJ.oe,{})})}),actions:(0,v.jsx)(R,{tab:u,onClick:function(){return d("add")},active:"add"===u,children:(0,v.jsx)(x.PJ.v3,{})}),className:"bg-white mb-1",children:(0,v.jsx)("div",{className:"",style:{top:0,position:"sticky"},children:"add"===u?(0,v.jsx)(k,{orderInstance:n,onSuccess:function(e){r(),t(e)}}):(0,v.jsx)(h.ir,{categories:s})})})},R=function(e){var n=e.children,r=(e.tab,e.active),i=(0,s.Z)(e,D);return(0,v.jsx)(o.ZP.Button,(0,t.Z)((0,t.Z)({className:"btn-primary-3",style:{border:r?"1px solid var(--blue-600)":void 0}},i),{},{children:n}))},V=function(){var e=(0,d.UO)().ordSlug,n=(0,l.cI)(O()),r=n.setValues,t=(0,c.QT)((function(){return(0,m.e)({slug:e}).retrieve()}),{refreshDeps:[e],onSuccess:function(e){return r(O(e.data))}}),i=t.res,s=new u.HM(i);if(!s.isSuccess)return null;var a=(0,m.e)(s.data);return(0,v.jsx)(o.ZP.View,{title:"".concat(a.name," Order Update"),back:"/staff/store/orders/".concat(e,"/"),children:(0,v.jsx)(_,{instance:a,context:n,fields:["is_paid","order_id","total_cost","stage"],children:(0,v.jsxs)(x.vz,{border:!0,footer:(0,v.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"}),children:[(0,v.jsx)(P.IsPaidField,{error:n.errors.is_paid,className:"my-2"}),n.values.is_paid&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(P.OrderIDField,{required:n.values.is_paid,error:n.errors.order_id}),(0,v.jsx)(P.TotalCostField,{required:n.values.is_paid,error:n.errors.total_cost})]}),(0,v.jsx)(P.StageSelectField,{stages:s.data.stages})]})})})}},7825:function(e,n,r){r.r(n),r.d(n,{SupplierOrder:function(){return m.e},default:function(){return j}});var t=r(6009),i=r(8519),s=r(2411),a=r(1408),l=r(6520),c=r(1096),o=r(2134),u=r(2145),d=r(2379),m=r(3432),x=r(8136),h=function(e){var n=e.instance,r=e.onSuccess,t=e.onError,i=e.label;return(0,x.jsxs)(d.pu,{renderHeader:function(){return(0,x.jsxs)("div",{children:["Supprimer '",n.name,"'"]})},renderFooter:function(e){var i=e.setOpen;return(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsx)(d.zx,{onClick:function(){return i(!1)},children:"Annuler"}),(0,x.jsx)(d.zx,{onClick:function(){return function(e){n.destroy().then((function(n){null===e||void 0===e||e(!1),null===r||void 0===r||r(n)})).catch((function(e){return null===t||void 0===t?void 0:t(e)}))}(i)},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,x.jsx)("div",{className:"p-3",children:"Are you sure you want to delete this"})},className:(0,u.UT)(["s-order-delete-button btn-danger-3",e.className]),children:[(0,x.jsx)(d.PJ.rF,{}),i&&(0,x.jsx)("span",{className:"label",children:i})]})},v=function(e){var n=e.label,r=void 0===n?"Add order":n;return(0,x.jsx)(c.ZP.Button,{onClick:function(){(0,m.e)().create({}).then((function(n){var r;return null===e||void 0===e||null===(r=e.onSuccess)||void 0===r?void 0:r.call(e,n)})).catch((function(e){}))},className:e.className,requiredPerms:["store.add_supplierorder"],title:"Add a new order",children:r})},f=function(e){var n=e.amountWithSymbol;return(0,x.jsx)("div",{className:"miq-price",children:n})},p=function(e){var n=e.item,r=e.removeItem,t=n||{},s=t.name,a=void 0===s?"New order":s,l=t.slug,o=t.is_paid,v=t.items,p=t.items_revenue,j=t.supplier;return(0,x.jsxs)(d.iA.Tr,{children:[(0,x.jsxs)(d.iA.Td,{children:[(0,x.jsx)(c.ZP.Link,{to:"".concat(l,"/"),className:"",children:(0,x.jsx)("div",{className:(0,u.UT)(["fw-bold text-ellipsis",o&&"text-line-through"]),children:a})}),(0,x.jsx)("span",{className:"text-sm",children:n.avg_cost})]}),(0,x.jsx)(d.iA.Td,{children:null===v||void 0===v?void 0:v.length}),(0,x.jsx)(d.iA.Td,{children:j}),(0,x.jsx)(d.iA.Td,{children:(0,x.jsx)(f,(0,i.Z)({},n.total_cost_data))}),(0,x.jsx)(d.iA.Td,{children:(0,x.jsx)(f,(0,i.Z)({},p))}),(0,x.jsx)(d.iA.Td,{children:(0,x.jsx)(h,{instance:(0,m.e)(n),onSuccess:function(){return null===r||void 0===r?void 0:r({slug:l})}})})]})};function j(){var e=(0,l.s0)(),n=(0,a.lr)(),r=(0,t.Z)(n,1)[0].get("page"),h=(0,o.QT)((function(){return(0,m.e)().list({params:{page:r}})}),{refreshDeps:[r]}),f=h.res,j=h.removeItem,g=new u.HM(f);if(!g.isSuccess)return null;var b=g.items;return(0,x.jsx)(c.ZP.View,{title:"Supplier Orders",back:"/staff/store/",actions:(0,x.jsx)(v,{onSuccess:function(n){var r=n.data;return e("".concat(r.slug,"/"))},className:"btn-primary-3"}),requiredPerms:["store.view_supplierorder"],children:Boolean(b.length)?(0,x.jsx)(c.ZP.Section,{footer:(0,x.jsx)(d.tl,(0,i.Z)((0,i.Z)({},g.data),{},{component:c.ZP.Link,to:!0})),children:(0,x.jsx)(d.iA,{border:!0,items:b,header:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.iA.Th,{}),(0,x.jsx)(d.iA.Th,{children:"Items"}),(0,x.jsx)(d.iA.Th,{children:"Supplier"}),(0,x.jsx)(d.iA.Th,{children:"Total Cost"}),(0,x.jsx)(d.iA.Th,{children:"Est. Revenue"}),(0,x.jsx)(d.iA.Th,{})]}),renderItem:function(e){return(0,s.createElement)(p,{item:e,removeItem:j,key:e.slug})},className:"w-100"})}):(0,x.jsx)("div",{className:"p-4",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"mb-4 text-md",children:"Add a supplier order to get started."}),(0,x.jsx)(v,{onSuccess:function(n){var r=n.data;return e("".concat(r.slug,"/"))},label:"Add an order",className:"btn-md btn-primary fw-bold"})]})})})}},3432:function(e,n,r){r.d(n,{e:function(){return d}});var t=r(8519),i=r(1135),s=r(7411),a=r(2518),l=r(2485),c=r(1096),o=1e4,u=function(e){(0,a.Z)(r,e);var n=(0,l.Z)(r);function r(){return(0,i.Z)(this,r),n.apply(this,arguments)}return(0,s.Z)(r,[{key:"updateCategories",value:function(e,n){return this.post("".concat(this._path,"batch/"),{slugs:n,category:e},{timeout:o})}},{key:"postFnova",value:function(e){return this.post("".concat(this._path,"fnova/"),{url:e},{timeout:o})}},{key:"postPlt",value:function(e){return this.post("".concat(this._path,"plt/"),{url:e},{timeout:o})}},{key:"postShein",value:function(e){return this.post("".concat(this._path,"shein/"),{url:e},{timeout:o})}},{key:"destroyItem",value:function(e){return this.delete("".concat(this._path,"item/").concat(e,"/"),{timeout:o})}},{key:"updateItem",value:function(e,n){return this.post("".concat(this._path,"item/").concat(e,"/"),(0,t.Z)({},n),{timeout:o})}}]),r}(c.x5),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.eR)(e,"supplierorders",u)}},6574:function(e,n,r){r.d(n,{_S:function(){return v},H5:function(){return m},TK:function(){return f},Ko:function(){return x}});var t=r(8519),i=r(8312),s=(r(2411),r(2379)),a=r(2145),l=r(8136),c=["instance","onClick","onSuccess","onError"],o=["instance","onClick","onSuccess","onError"],u=["retail_price_data","is_on_sale","sale_price_data"],d=["show"],m=function(e){var n=e.instance,r=(e.onClick,e.onSuccess),a=e.onError,o=(0,i.Z)(e,c);return(0,l.jsx)(s.zx,(0,t.Z)((0,t.Z)({onClick:function(){return n.is_published?null:n.publish().then((function(e){return null===r||void 0===r?void 0:r(e)})).catch((function(e){return null===a||void 0===a?void 0:a(e)}))},className:"btn-primary btn-md"},o),{},{disabled:n.is_published}))},x=function(e){var n=e.instance,r=(e.onClick,e.onSuccess),a=e.onError,c=(0,i.Z)(e,o);return(0,l.jsx)(s.zx,(0,t.Z)((0,t.Z)({className:"btn-danger btn-md",onClick:function(){return n.is_published?n.unpublish().then((function(e){return null===r||void 0===r?void 0:r(e)})).catch((function(e){return null===a||void 0===a?void 0:a(e)})):null}},c),{},{disabled:!n.is_published}))},h=function(e){var n=e.amountWithSymbol,r=e.className,t=e.sale,i=e.lineThrough;return(0,l.jsx)("div",{className:(0,a.UT)(["miq-price-display",t&&"text-danger",i&&"text-line-through",r]),children:n})},v=function(e){var n=e.retail_price_data,r=e.is_on_sale,s=e.sale_price_data,c=(0,i.Z)(e,u);if(!n)return null;var o=r&&null!=(null===s||void 0===s?void 0:s.amountWithSymbol);return(0,l.jsxs)("div",{className:(0,a.UT)(["miq-product-price-display",c.className]),style:c.style,children:[o&&(0,l.jsx)(h,(0,t.Z)((0,t.Z)({sale:!0},s),{},{className:"miq-sale-price me-1"})),(0,l.jsx)(h,(0,t.Z)((0,t.Z)({},n),{},{lineThrough:o,className:"miq-retail-price"}))]})},f=function(e){var n=e.show,r=(0,i.Z)(e,d);return n?(0,l.jsx)(s.PJ.fU,(0,t.Z)((0,t.Z)({},r),{},{className:"published-icon"})):null};new s.SD},3992:function(e,n,r){r.d(n,{U:function(){return x},u:function(){return m}});var t=r(8312),i=r(1135),s=r(7411),a=r(2518),l=r(2485),c=r(2411),o=r(2578),u=["prefix"],d=function(e){(0,a.Z)(r,e);var n=(0,l.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];var c=a.prefix,o=void 0===c?"":c,d=(0,t.Z)(a,u);return(e=n.call(this,d)).prefix=void 0,e.prefix=o,e}return(0,s.Z)(r,[{key:"create",value:function(e){this.emit("".concat(this.prefix,"-create"),e)}},{key:"retrieve",value:function(e){this.emit("".concat(this.prefix,"-retrieve"),e)}},{key:"list",value:function(e){this.emit("".concat(this.prefix,"-list"),e)}},{key:"update",value:function(e){this.emit("".concat(this.prefix,"-update"),e)}},{key:"destroy",value:function(e){this.emit("".concat(this.prefix,"-destroy"),e)}}]),r}(r.n(o)()),m=new d;function x(e,n){c.useEffect((function(){m.on("-create",(function(r){var t;n&&!n(r)||null===(t=e.onCreate)||void 0===t||t.call(e,r)})),m.on("-update",(function(r){var t;n&&!n(r)||null===(t=e.onUpdate)||void 0===t||t.call(e,r)})),m.on("-destroy",(function(r){var t;n&&!n(r)||null===(t=e.onDestroy)||void 0===t||t.call(e,r)}))}),[])}},4113:function(e,n,r){r.d(n,{ir:function(){return u.ir},_S:function(){return d._S},PI:function(){return m.PI},D8:function(){return m.D8},ZP:function(){return Z},_P:function(){return o._}});var t,i=r(2411),s=r(6520),a=r(9002),l=r(4627),c=r(8136);!function(e){e.SHEIN="SHEIN",e.PLT="PLT",e.FNOVA="FNOVA"}(t||(t={}));var o=r(5566),u=r(3335),d=(r(421),r(6574)),m=r(8430),x=i.lazy((function(){return r.e(494).then(r.bind(r,8494))})),h=i.lazy((function(){return Promise.resolve().then(r.bind(r,7825))})),v=i.lazy((function(){return r.e(170).then(r.bind(r,2170))})),f=i.lazy((function(){return Promise.resolve().then(r.bind(r,4627))})),p=i.lazy((function(){return r.e(397).then(r.bind(r,7397))})),j=i.lazy((function(){return r.e(615).then(r.bind(r,3615))})),g=i.lazy((function(){return r.e(298).then(r.bind(r,7298))})),b=i.lazy((function(){return r.e(426).then(r.bind(r,1426))}));function Z(){return i.useContext(a.h2).shopy_settings?(0,c.jsxs)(s.Z5,{children:[(0,c.jsx)(s.AW,{path:"orders/*",element:(0,c.jsxs)(s.Z5,{children:[(0,c.jsx)(s.AW,{path:":ordSlug/:prodSlug/",element:(0,c.jsx)(v,{})}),(0,c.jsx)(s.AW,{path:":ordSlug/settings/",element:(0,c.jsx)(l.OrderSettingUpdateView,{})}),(0,c.jsx)(s.AW,{path:":ordSlug/",element:(0,c.jsx)(f,{})}),(0,c.jsx)(s.AW,{path:"/*",element:(0,c.jsx)(h,{})})]})}),(0,c.jsx)(s.AW,{path:"products/*",element:(0,c.jsx)(s.Z5,{children:(0,c.jsx)(s.AW,{path:"/*",element:(0,c.jsx)(g,{})})})}),(0,c.jsx)(s.AW,{path:"categories/*",element:(0,c.jsxs)(s.Z5,{children:[(0,c.jsx)(s.AW,{path:":catSlug/",element:(0,c.jsx)(j,{})}),(0,c.jsx)(s.AW,{index:!0,element:(0,c.jsx)(p,{})})]})}),(0,c.jsx)(s.AW,{path:"settings/",element:(0,c.jsx)(b,{})}),(0,c.jsx)(s.AW,{path:"/",element:(0,c.jsx)(x,{})})]}):null}}}]);
//# sourceMappingURL=67.9813a57b.chunk.js.map