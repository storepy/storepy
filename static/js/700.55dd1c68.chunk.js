"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[700],{7150:function(e,t,n){n.d(t,{a:function(){return c},y:function(){return o}});var i=n(3872),r=n(4384),s=(n(7406),n(5789)),a=n(2050),l=n(7457),d=["instance"],c=function(e){var t=e.instance,n=(0,r.Z)(e,d);return(0,l.jsxs)(a.pu,{renderHeader:function(){return(0,l.jsx)("div",{className:"text-md p-1",children:"Le client a t'il re\xe7u le produit?"})},renderFooter:function(e){var i=e.setOpen;return(0,l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,l.jsx)(a.zx,{onClick:function(){return i(!1)},children:"Pas encore"}),(0,l.jsx)(a.zx,{onClick:function(){return t.mark_delivered().then((function(e){var t;null===n||void 0===n||null===(t=n.onSuccess)||void 0===t||t.call(n,e)})).catch((function(e){var t;null===n||void 0===n||null===(t=n.onFailure)||void 0===t||t.call(n,e)}))},className:"btn-primary fw-bold",children:"Oui"})]})},render:function(){return(0,l.jsx)("div",{className:"p-3"})},className:"btn-primary btn-md fw-bold w-50 d-flex align-items-center justify-content-center",children:[null!==t&&void 0!==t&&t.is_delivered?(0,l.jsx)(a.PJ._D,{}):(0,l.jsx)(a.PJ.NW,{}),!(null!==n&&void 0!==n&&n.icon)&&(0,l.jsx)("span",{className:"ms-1",children:"Confirmer la livraison"})]})},o=function(e){return(0,l.jsx)(s.ZP.Link,(0,i.Z)((0,i.Z)({title:"Modifier cette commande"},e),{},{to:"/staff/sales/orders/".concat(e.instance.slug,"/"),requiredPerms:["sales.change_order"],children:e.children}))}},4034:function(e,t,n){n.d(t,{K:function(){return c}});var i=n(5561),r=n(1253),s=n(4733),a=n(2562),l=n(5789),d=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"mark_delivered",value:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.is_delivered?Promise.resolve({data:this.data}):this.post("".concat(this._path,"deliver/"),{},{timeout:5e3})}},{key:"deliveredDt",get:function(){var e;return this.formatDt(null===(e=this.data)||void 0===e?void 0:e.dt_delivered)}},{key:"updatedDt",get:function(){var e;return this.formatDt(null===(e=this.data)||void 0===e?void 0:e.updated)}},{key:"createdDt",get:function(){var e;return this.formatDt(null===(e=this.data)||void 0===e?void 0:e.created)}},{key:"formatDt",value:function(e){return e?new Date(e).toLocaleDateString(void 0,{day:"2-digit",weekday:"short",month:"short",year:"2-digit"}):null}}]),n}(l.x5),c=(0,l.QY)("orders",d)},700:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var i=n(3872),r=n(7406),s=n(9996),a=n(5789),l=n(9474),d=n(9450),c=n(810),o=n(2050),u=n(3088),v=n(2444),m=n(4034),f=n(7494),h=n(7150),x=n(7457);function j(){var e;(0,l.jr)("Place cart - Sales");var t=(0,s.UO)().orderSlug,n=r.useContext(d.h2),j=n.order_data;if(t!==(null===j||void 0===j?void 0:j.slug)||!n.isLoaded)return(0,x.jsx)(o.gb,{});var p=(0,m.K)(j||{});return(0,x.jsx)(a.ZP.View,{title:"Commande",actions:(0,x.jsx)(x.Fragment,{}),back:"/staff/sales/orders/",headerCN:"miq-container center",footer:(0,x.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:!(null!==p&&void 0!==p&&p.is_delivered)&&(0,x.jsx)(h.a,{instance:p,onSuccess:function(e){n.updateData({order_data:(0,i.Z)((0,i.Z)({},j),e.data)})}})}),children:(0,x.jsxs)(a.ZP.Section,{mainCN:"miq-container center",children:[(0,x.jsx)(a.ZP.Section,{title:"\xbb Details",mainCN:"ps-2",children:(0,x.jsxs)("ul",{children:[(0,x.jsxs)("li",{children:["Num\xe9ro de transaction: ",(0,x.jsx)("span",{className:"fw-bold",children:p.transaction_id})]}),p.is_delivered?(0,x.jsxs)("li",{className:"text-muted text-sm",children:["Livr\xe9e le ",p.deliveredDt]}):(0,x.jsxs)("li",{className:"text-muted text-sm",children:["Modifi\xe9e le ",p.updatedDt]}),(0,x.jsxs)("li",{className:"text-muted text-sm",children:["Ajout\xe9e le ",p.createdDt]})]})}),(0,x.jsx)(a.ZP.Section,{title:"\xbb Client",mainCN:"ps-2",children:(0,x.jsx)(v.CustomerCard,{data:p.customer_data})}),(0,x.jsx)(a.ZP.Section,{title:"\xbb Produits (".concat(null===p||void 0===p?void 0:p.items_count,")"),mainCN:"ps-2",footer:(0,x.jsxs)("div",{className:"",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,x.jsx)("span",{className:"",children:"Sous-total"}),(0,x.jsx)("span",{children:(0,x.jsx)(u._S,{retail_price_data:null===p||void 0===p?void 0:p.subtotal})})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,x.jsx)("span",{className:"",children:"Total"}),(0,x.jsx)("span",{className:"fw-bold",children:(0,x.jsx)(u._S,{retail_price_data:null===p||void 0===p?void 0:p.subtotal})})]})]}),children:null===(e=p.items)||void 0===e?void 0:e.map((function(e){return(0,r.createElement)(f.n,(0,i.Z)((0,i.Z)({},e),{},{size:e.size_data,key:(0,c.Vj)()}))}))})]})})}}}]);
//# sourceMappingURL=700.55dd1c68.chunk.js.map