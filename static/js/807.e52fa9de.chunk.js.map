{"version":3,"file":"static/js/807.e52fa9de.chunk.js","mappings":"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","sources":["../../../../shopy/shopy-salejs/src/cart/components.tsx","../../../../shopy/shopy-salejs/src/cart/utils.ts","../../../../shopy/shopy-salejs/src/cart/views.List.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport Staff from '@miq/staffjs';\nimport { truncateStr } from '@miq/utiljs';\nimport { ProductPriceDisplay, TProduct, TProductSize } from '@shopy/storejs';\n\nexport const ItemProductCard = ({ product, size }: { product: TProduct; size: TProductSize }) => (\n  <div className=\"d-flex align-items-center\">\n    <ProductImage {...{ product, width: 60, height: 60 }} />\n    <div className=\"flex-1 rounded p-1 \">\n      <div className=\"fw-bold\">{truncateStr(product?.name, 0, 25)}</div>\n      <ProductPriceDisplay {...product} inline />\n      {size && (\n        <div>\n          <span className=\"me-1\">Size:</span>\n          <span className=\"text-sm\">{size?.name}</span>\n        </div>\n      )}\n    </div>\n  </div>\n);\n\nexport const ProductImage = ({\n  product,\n  width,\n  height,\n  ...props\n}: {\n  product: TProduct;\n  width?: number | string;\n  height?: number | string;\n}) =>\n  product?.slug ? (\n    <div {...props} style={{ width: width, height: height }}>\n      <Staff.Img.Square slug=\"slug\" src=\"src\" {...product.cover_data} className=\"rounded\" />\n    </div>\n  ) : null;\n","import { StaffModel, StaffService } from '@miq/staffjs';\nimport { TPrice } from '@shopy/storejs';\n\nimport { TCustomer } from '../customer';\n\nconst timeout = 5000;\n\nexport type TOrderItem = object & {\n  order?: string;\n  product?: string;\n  product_data?: any;\n  name?: string;\n  price?: string;\n  size?: string;\n  was_sale?: boolean;\n  img?: string;\n  quantity?: number;\n};\n\nexport type TCart = {\n  slug?: string;\n  customer?: string;\n  customer_data?: TCustomer;\n  notes?: string;\n  is_completed?: boolean;\n\n  dt_delivery?: string;\n  items?: TOrderItem[];\n  products?: string[];\n\n  is_paid?: boolean;\n  subtotal?: TPrice;\n  total?: TPrice;\n};\n\nclass CartService extends StaffService<TCart> {\n  get canDestroy(): boolean {\n    return this?.data?.products?.length === 0;\n  }\n  addItems(values: { size: string; quantity: number; product_slug: string }[]) {\n    return this.post(`${this._path}products/`, values);\n  }\n\n  addItem(prodSlug: string, values: { size: string; quantity: number }) {\n    return this.post(`${this._path}product/${prodSlug}/`, values);\n  }\n\n  updateItem(prodSlug: string, values: Record<string, any>) {\n    return this.post(`${this._path}item/${prodSlug}/`, { ...values }, { timeout });\n  }\n\n  destroyItem(itemSlug: string) {\n    return this.delete(`${this._path}item/${itemSlug}/`, { timeout });\n  }\n}\n\nexport const Cart = (data: TCart = {}) => {\n  return StaffModel<TCart, CartService>(data, 'carts', CartService);\n};\n\nexport type TCartInstance = ReturnType<typeof Cart>;\n","import * as React from 'react';\n\nimport Staff from '@miq/staffjs';\nimport { useDocumentTitle, useRequest } from '@miq/hookjs';\nimport { Response, uuid } from '@miq/utiljs';\nimport { ProductPriceDisplay } from '@shopy/storejs';\nimport { Card, HorizontalScrollGridLayout, Loading } from '@miq/componentjs';\n\nimport { Cart, TCart } from './utils';\n\nimport { ProductImage } from './components';\nimport { CartDeleteButton, CartUpdateLink } from './buttons';\n\nexport default function CartListView() {\n  useDocumentTitle('Carts - Sales');\n  const { res, loading, refresh, ...request } = useRequest(() => Cart().list());\n\n  if (loading) return <Loading />;\n\n  const r = new Response<TCart>(res);\n  if (!r.isSuccess) return null;\n\n  return (\n    <Staff.View className=\"sales-index-view\">\n      {r.items?.map((i) => {\n        const { customer_data = {}, items = [] } = i || {};\n        const cart = Cart(i);\n\n        return (\n          <Card\n            // border\n            style={{ marginBottom: 12 }}\n            actions={<CartDeleteButton instance={cart} onSuccess={() => refresh()} />}\n            title={<div className=\"\">{`${customer_data?.first_name} ${customer_data?.last_name}`}</div>}\n            text={new Date(cart?.created).toLocaleDateString(undefined, {\n              day: '2-digit',\n              weekday: 'short',\n              month: 'short',\n              year: '2-digit',\n            })}\n            footer={\n              i.products.length > 0 && (\n                <div className=\"fw-bold\">\n                  <ProductPriceDisplay retail_price_data={i?.total || i?.subtotal} />\n                </div>\n              )\n            }\n            key={i.slug}\n            className=\"mb-1\"\n          >\n            <CartUpdateLink instance={cart}>\n              {items.length > 0 && (\n                <HorizontalScrollGridLayout className=\"cart-items-preview\" style={{ marginBottom: 0 }}>\n                  {items.map((i) => {\n                    return (\n                      <div key={uuid()}>\n                        <ProductImage product={i.product} {...{ width: 48, height: 48 }} />\n                      </div>\n                    );\n                  })}\n                </HorizontalScrollGridLayout>\n              )}\n            </CartUpdateLink>\n          </Card>\n        );\n      })}\n    </Staff.View>\n  );\n}\n"],"names":["ItemProductCard","product","size","className","ProductImage","width","height","truncateStr","name","inline","props","slug","style","src","cover_data","CartService","this","data","products","length","values","post","_path","prodSlug","timeout","itemSlug","delete","StaffService","Cart","StaffModel","CartListView","useDocumentTitle","useRequest","list","res","loading","refresh","r","Response","isSuccess","items","map","i","customer_data","cart","marginBottom","actions","instance","onSuccess","title","first_name","last_name","text","Date","created","toLocaleDateString","undefined","day","weekday","month","year","footer","retail_price_data","total","subtotal","uuid"],"sourceRoot":""}