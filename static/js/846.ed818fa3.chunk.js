"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[846],{7494:function(e,t,n){n.d(t,{n:function(){return o},q:function(){return u}});var i=n(4384),s=n(3872),a=(n(7406),n(5789)),r=n(810),l=n(3088),c=n(7457),d=["product","width","height"],o=function(e){var t=e.product,n=e.size;return(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)(u,{product:t,width:60,height:60}),(0,c.jsxs)("div",{className:"flex-1 rounded p-1 ",children:[(0,c.jsx)("div",{className:"fw-bold",children:(0,r.bI)(null===t||void 0===t?void 0:t.name,0,25)}),(0,c.jsx)(l._S,(0,s.Z)((0,s.Z)({},t),{},{inline:!0})),n&&(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"me-1",children:"Size:"}),(0,c.jsx)("span",{className:"text-sm",children:null===n||void 0===n?void 0:n.name})]})]})]})},u=function(e){var t=e.product,n=e.width,r=e.height,l=(0,i.Z)(e,d);return null!==t&&void 0!==t&&t.slug||t.meta_slug?(0,c.jsx)("div",(0,s.Z)((0,s.Z)({},l),{},{style:{width:n,height:r},children:(0,c.jsx)(a.ZP.Img.Square,(0,s.Z)((0,s.Z)({slug:"slug",src:"src"},t.cover_data),{},{className:"rounded"}))})):null}},474:function(e,t,n){n.d(t,{A:function(){return u}});var i=n(3872),s=n(5561),a=n(1253),r=n(4733),l=n(2562),c=n(5789),d=5e3,o=function(e){(0,r.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"createdDt",get:function(){var e;return null!==(e=this.data)&&void 0!==e&&e.created?new Date(this.data.created).toLocaleDateString(void 0,{day:"2-digit",weekday:"short",month:"short",year:"2-digit"}):null}},{key:"canDestroy",get:function(){var e,t;return 0===(null===this||void 0===this||null===(e=this.data)||void 0===e||null===(t=e.products)||void 0===t?void 0:t.length)}},{key:"place",value:function(){return this.post("".concat(this._path,"place/"),{},{timeout:d})}},{key:"addItems",value:function(e){return this.post("".concat(this._path,"products/"),e)}},{key:"addItem",value:function(e,t){return this.post("".concat(this._path,"product/").concat(e,"/"),t)}},{key:"updateItem",value:function(e,t){return this.post("".concat(this._path,"item/").concat(e,"/"),(0,i.Z)({},t),{timeout:d})}},{key:"destroyItem",value:function(e){return this.delete("".concat(this._path,"item/").concat(e,"/"),{timeout:d})}}]),n}(c.x5),u=(0,c.QY)("carts",o)},7846:function(e,t,n){n.r(t),n.d(t,{ProductAddForm:function(){return Z},default:function(){return y}});var i=n(4384),s=n(3872),a=n(7406),r=n(3041),l=n(8427),c=n(5789),d=n(9474),o=n(2050),u=n(9576),h=n(810),m=n(3088),v=n(474),x=n(7494),f=n(7532),j=n(2444),p=n(9450),g=n(7457),b=["item","onItemClick"],N=a.lazy((function(){return n.e(221).then(n.bind(n,8221))}));function y(){var e,t,n,i;(0,d.jr)("Place cart - Sales");var u=(0,r.UO)().cartSlug,b=a.useContext(p.h2),y=b.cart,Z=b.reload;if(a.useEffect((function(){Z()}),[u]),u!==(null===y||void 0===y?void 0:y.slug)||!b.isLoaded)return(0,g.jsx)(o.gb,{});var _=(0,v.A)(y||{});return null!==_&&void 0!==_&&_.is_placed?(0,g.jsx)(N,{cart:_}):(0,g.jsx)(c.ZP.View,{title:"Panier",actions:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(l.rU,{to:"/staff/sales/carts/".concat(null===_||void 0===_?void 0:_.slug,"/items/"),className:"btn-primary-3 btn-round",title:"Ajouter des produits",children:(0,g.jsx)(o.PJ.HB,{})})}),back:"/staff/sales/carts",headerCN:"miq-container center",children:(0,g.jsxs)("div",{className:"miq-container center",children:[(0,g.jsx)(c.ZP.Section,{border:!0,title:"Panier (".concat(null===_||void 0===_||null===(e=_.products)||void 0===e?void 0:e.length," produits)"),footer:(0,g.jsxs)("div",{className:"",children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsx)("span",{className:"",children:"Subtotal"}),(0,g.jsx)("span",{children:(0,g.jsx)(m._S,{retail_price_data:null===_||void 0===_?void 0:_.subtotal})})]}),(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsx)("span",{className:"",children:"Total"}),(0,g.jsx)("span",{className:"fw-bold",children:(0,g.jsx)(m._S,{retail_price_data:null===_||void 0===_?void 0:_.subtotal})})]})]}),children:_&&(null===_||void 0===_||null===(t=_.items)||void 0===t?void 0:t.length)>0?(0,g.jsx)(g.Fragment,{children:null===(n=_.items)||void 0===n?void 0:n.map((function(e){return(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsx)(x.n,(0,s.Z)((0,s.Z)({},e),{},{size:e.size_data})),(0,g.jsx)("div",{children:(0,g.jsx)(f.uf,{cartInstance:_,itemSlug:null===e||void 0===e?void 0:e.slug,onSuccess:function(e){b.updateData({cart:e.data})}})})]},(0,h.Vj)())}))}):(0,g.jsx)(g.Fragment,{children:"Ajouter"})}),(0,g.jsx)(c.ZP.Section,{border:!0,title:"Client",children:(0,g.jsx)(j.CustomerCard,{data:_.customer_data})}),(0,g.jsx)("div",{className:"text-center",children:(0,g.jsx)(o.zx,{onClick:function(){_.place().then((function(e){b.updateData({cart:e.data})})).catch((function(e){return console.log(e)}))},disabled:(null===_||void 0===_||null===(i=_.products)||void 0===i?void 0:i.length)<=0,className:"btn-primary btn-md fw-bold w-50",children:"Confirmer"})})]})})}var Z=function(e){var t,n=e.item,a=e.onItemClick,r=((0,i.Z)(e,b),(0,u.cI)({quantity:1,size:""}));if(null===n||void 0===n||!n.slug)return null;var l=n.sizes,d=void 0===l?[]:l,o=(n.is_oos,n.cover_data),v=n.name;n.size_count;return(0,g.jsx)(u.ZP,{context:r,onSubmit:function(e){e.preventDefault(),a(n,r.values.size,r.values.quantity).catch((function(e){r.handleError(e)}))},children:(0,g.jsx)(c.ZP.Section,{border:!0,header:(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)("div",{style:{minWidth:34,maxWidth:50},className:"me-1",children:(0,g.jsx)(c.ZP.Img.Thumb,(0,s.Z)((0,s.Z)({src:"src"},o),{},{className:"rounded"}))}),(0,g.jsxs)("div",{className:"flex-1",title:v,children:[(0,g.jsx)("div",{className:"text-ellipsis text-sm",children:(0,g.jsx)("span",{className:"me-1 fw-bold",children:(0,h.bI)(v,0,45)})}),(0,g.jsxs)("div",{className:"d-flex flex-column flex-md-ro justify-content-between",children:[(0,g.jsxs)("div",{className:"d-grid grid-md-2 gap-1 flex-1",children:[(0,g.jsx)(m.D8,{required:!0,sizes:d.filter((function(e){return e.quantity>0})),error:r.errors.size}),(0,g.jsx)(m.PI,{max:(null===(t=d.find((function(e){return e.slug===r.values.size})))||void 0===t?void 0:t.quantity)||0,min:1})]}),(0,g.jsx)("div",{className:"text-right",children:(0,g.jsx)(u.ZP.Submit,{className:"btn btn-primary-2 btn-md fw-bold",children:"Ajouter"})})]})]})]}),actions:(0,g.jsx)(m._S,(0,s.Z)((0,s.Z)({},n),{},{className:"d-flex flex-wrap"})),className:"mb-1"})})}}}]);
//# sourceMappingURL=846.ed818fa3.chunk.js.map