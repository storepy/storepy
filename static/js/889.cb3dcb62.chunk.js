"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[889],{7494:function(t,e,n){n.d(e,{n:function(){return l},q:function(){return o}});var i=n(4384),r=n(3872),s=(n(7406),n(5789)),c=n(810),a=n(3088),d=n(7457),u=["product","width","height"],l=function(t){var e=t.product,n=t.size;return(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)(o,{product:e,width:60,height:60}),(0,d.jsxs)("div",{className:"flex-1 rounded p-1 ",children:[(0,d.jsx)("div",{className:"fw-bold",children:(0,c.bI)(null===e||void 0===e?void 0:e.name,0,25)}),(0,d.jsx)(a._S,(0,r.Z)((0,r.Z)({},e),{},{inline:!0})),n&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"me-1",children:"Size:"}),(0,d.jsx)("span",{className:"text-sm",children:null===n||void 0===n?void 0:n.name})]})]})]})},o=function(t){var e=t.product,n=t.width,c=t.height,a=(0,i.Z)(t,u);return null!==e&&void 0!==e&&e.slug||e.meta_slug?(0,d.jsx)("div",(0,r.Z)((0,r.Z)({},a),{},{style:{width:n,height:c},children:(0,d.jsx)(s.ZP.Img.Square,(0,r.Z)((0,r.Z)({slug:"slug",src:"src"},e.cover_data),{},{className:"rounded"}))})):null}},474:function(t,e,n){n.d(e,{A:function(){return o}});var i=n(3872),r=n(5561),s=n(1253),c=n(4733),a=n(2562),d=n(5789),u=5e3,l=function(t){(0,c.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"createdDt",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.created?new Date(this.data.created).toLocaleDateString(void 0,{day:"2-digit",weekday:"short",month:"short",year:"2-digit"}):null}},{key:"canDestroy",get:function(){var t,e;return 0===(null===this||void 0===this||null===(t=this.data)||void 0===t||null===(e=t.products)||void 0===e?void 0:e.length)}},{key:"place",value:function(){return this.post("".concat(this._path,"place/"),{},{timeout:u})}},{key:"addItems",value:function(t){return this.post("".concat(this._path,"products/"),t)}},{key:"addItem",value:function(t,e){return this.post("".concat(this._path,"product/").concat(t,"/"),e)}},{key:"updateItem",value:function(t,e){return this.post("".concat(this._path,"item/").concat(t,"/"),(0,i.Z)({},e),{timeout:u})}},{key:"destroyItem",value:function(t){return this.delete("".concat(this._path,"item/").concat(t,"/"),{timeout:u})}}]),n}(d.x5),o=(0,d.QY)("carts",l)},6889:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});var i=n(4384),r=n(3872),s=n(5880),c=n(2551),a=n(7406),d=n(3041),u=n(5789),l=n(9474),o=n(2050),h=n(810),v=n(3088),m=n(474),f=n(7494),p=n(7532),x=n(9450),j=n(7457),g=["cart"];function y(){var t;(0,l.jr)("Add items to cart - Sales");var e=(0,d.UO)().cartSlug,n=a.useContext(x.h2),i=n.cart,p=n.products,g=void 0===p?[]:p,y=n.reload;a.useEffect((function(){y()}),[e]);var Z=a.useState([]),w=(0,c.Z)(Z,2),k=w[0],b=w[1];if(e!==(null===i||void 0===i?void 0:i.slug)||!n.isLoaded)return(0,j.jsx)(o.gb,{});var _=(0,m.A)(i||{}),z=(null===_||void 0===_||null===(t=_.items)||void 0===t?void 0:t.map((function(t){return t.size})))||[];return(0,j.jsx)(o.cv,{style:{zIndex:1e4},className:"bg-white p-4 rounded",header:(0,j.jsx)(N,{cart:_,selected:k}),footer:(0,j.jsx)("div",{className:"miq-container center",children:(0,j.jsx)("div",{className:"d-flex justify-content-center bg-white p-2",children:(0,j.jsx)("div",{children:(0,j.jsx)(o.zx,{disabled:0===k.length,onClick:function(){return function(){var t=k.map((function(t){return{product_slug:t.meta_slug,size:t.sizeSlug,quantity:1}}));0!==t.length&&_.addItems(t).then((function(t){b([]),n.updateData({cart:t.data})})).catch((function(t){}))}()},className:"btn-primary fw-bold",children:"Ajouter"})})})}),children:(0,j.jsx)(u.ZP.Section,{header:(0,j.jsx)(v.ir,{fields:[]}),className:"miq-container center px-1",children:g.map((function(t){var e=t.sizes;return(void 0===e?[]:e).filter((function(t){return t.quantity>=1})).filter((function(t){return!z.includes(t.slug)})).map((function(e){var n=k.find((function(t){return t.sizeSlug===(null===e||void 0===e?void 0:e.slug)})),i=Boolean(n);return(0,j.jsxs)("div",{className:"d-flex align-items-center mb-1 border-1 rounded",style:{padding:6},onClick:function(){b(i?function(t){return t.filter((function(t){return t.sizeSlug!=(null===e||void 0===e?void 0:e.slug)}))}:[(0,r.Z)((0,r.Z)({},t),{},{sizeSlug:e.slug})].concat((0,s.Z)(k)))},children:[(0,j.jsx)("div",{className:"flex-1",children:(0,j.jsx)(f.n,{product:t,size:e})}),(0,j.jsx)("div",{style:{minWidth:24,marginLeft:3,marginRight:6},children:(0,j.jsx)("input",{type:"checkbox",name:"selected",className:"me-2",checked:i,onChange:function(){}})})]},(0,h.Vj)())}))}))})})}var N=function(t){var e,n=t.cart,r=(0,i.Z)(t,g).selected,s=void 0===r?[]:r;return(0,j.jsxs)("div",{className:"cart-add-item-view-header miq-container center px-1 pt-2",children:[(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)("div",{className:"me-1",children:(0,j.jsx)(o.QJ,{to:(0,p.Sm)(n),title:"Annuler",prefix:"miq-staff",children:"\xab"})}),(0,j.jsx)(o.M$,{title:(0,j.jsx)("span",{className:"fw-bold mt-2",children:"Ajouter des produits"}),text:"Tap on a product to add to the cart/ Cliquez sur un produit pour l'ajouter au panier"})]}),(0,j.jsxs)(o.j6,{className:"cart-items-preview",style:{minHeight:48,paddingBottom:0},children:[null===n||void 0===n||null===(e=n.items)||void 0===e?void 0:e.map((function(t){return console.log(t.product),(0,j.jsx)("div",{children:(0,j.jsx)(f.q,{product:t.product,width:48,height:48})},(0,h.Vj)())})),s.map((function(t){return(0,j.jsx)("div",{children:(0,j.jsx)(f.q,{product:t,width:48,height:48})},(0,h.Vj)())}))]})]})}}}]);
//# sourceMappingURL=889.cb3dcb62.chunk.js.map