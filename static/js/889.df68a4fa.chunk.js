"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[889],{474:function(t,e,n){n.d(e,{A:function(){return l}});var i=n(3872),r=n(5561),s=n(1253),a=n(4733),c=n(2562),d=n(5789),u=5e3,o=function(t){(0,a.Z)(n,t);var e=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"createdDt",get:function(){var t;return null!==(t=this.data)&&void 0!==t&&t.created?new Date(this.data.created).toLocaleDateString(void 0,{day:"2-digit",weekday:"short",month:"short",year:"2-digit"}):null}},{key:"canDestroy",get:function(){var t,e;return 0===(null===this||void 0===this||null===(t=this.data)||void 0===t||null===(e=t.products)||void 0===e?void 0:e.length)}},{key:"mark_paid",value:function(){return this.post("".concat(this._path,"pay/"),{},{timeout:u})}},{key:"place",value:function(){return this.post("".concat(this._path,"place/"),{},{timeout:u})}},{key:"addItems",value:function(t){return this.post("".concat(this._path,"products/"),t)}},{key:"addItem",value:function(t,e){return this.post("".concat(this._path,"product/").concat(t,"/"),e)}},{key:"updateItem",value:function(t,e){return this.post("".concat(this._path,"item/").concat(t,"/"),(0,i.Z)({},e),{timeout:u})}},{key:"destroyItem",value:function(t){return this.delete("".concat(this._path,"item/").concat(t,"/"),{timeout:u})}}]),n}(d.x5),l=(0,d.QY)("carts",o)},6889:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var i=n(4384),r=n(3872),s=n(5880),a=n(2551),c=n(7406),d=n(8427),u=n(3041),o=n(5789),l=n(9474),h=n(2050),m=n(810),p=n(3088),v=n(474),f=n(7494),x=n(7532),j=n(9450),g=n(7457),y=["cart"];function k(){var t;(0,l.jr)("Add items to cart - Sales");var e=c.useContext(j.h2),n=e.cart,i=e.products,x=void 0===i?[]:i,y=e.reload,k=(0,d.lr)(),_=(0,a.Z)(k,1)[0],b=(0,u.UO)().cartSlug;c.useEffect((function(){y({params:_})}),[b,_]);var z=c.useState([]),Z=(0,a.Z)(z,2),w=Z[0],S=Z[1];if(console.log(x.length),b!==(null===n||void 0===n?void 0:n.slug)||!e.isLoaded)return(0,g.jsx)(h.gb,{});var q=(0,v.A)(n||{}),A=(null===q||void 0===q||null===(t=q.items)||void 0===t?void 0:t.map((function(t){return t.size})))||[];return(0,g.jsx)(h.cv,{style:{zIndex:1e4},className:"bg-white p-4 rounded",header:(0,g.jsx)(N,{cart:q,selected:w}),footer:(0,g.jsx)("div",{className:"miq-container center",children:(0,g.jsx)("div",{className:"d-flex justify-content-center bg-white p-2",children:(0,g.jsx)("div",{children:(0,g.jsx)(h.zx,{disabled:0===w.length,onClick:function(){return function(){var t=w.map((function(t){return{product_slug:t.meta_slug,size:t.sizeSlug,quantity:1}}));0!==t.length&&q.addItems(t).then((function(t){S([]),e.updateData({cart:t.data})})).catch((function(t){}))}()},className:"btn-primary btn-md fw-bold",children:"Ajouter"})})})}),children:(0,g.jsx)(o.ZP.Section,{header:(0,g.jsx)("div",{className:"p-2",children:(0,g.jsx)(p.ir,{fields:[]})}),className:"miq-container center px-1",children:x.length>0?(0,g.jsx)(g.Fragment,{children:x.map((function(t){var e=t.sizes;return(void 0===e?[]:e).filter((function(t){return t.quantity>=1})).filter((function(t){return!A.includes(t.slug)})).map((function(e){var n=w.find((function(t){return t.sizeSlug===(null===e||void 0===e?void 0:e.slug)})),i=Boolean(n);return(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 border-1 rounded",style:{padding:6},onClick:function(){S(i?function(t){return t.filter((function(t){return t.sizeSlug!=(null===e||void 0===e?void 0:e.slug)}))}:[(0,r.Z)((0,r.Z)({},t),{},{sizeSlug:e.slug})].concat((0,s.Z)(w)))},children:[(0,g.jsx)("div",{className:"flex-1",children:(0,g.jsx)(f.n,{product:t,size:e})}),(0,g.jsx)("div",{style:{minWidth:24,marginLeft:3,marginRight:6},children:(0,g.jsx)("input",{type:"checkbox",name:"selected",className:"me-2",checked:i,onChange:function(){}})})]},(0,m.Vj)())}))}))}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"text-md",children:"Aucun produit trouv\xe9"}),(0,g.jsx)("div",{className:"text-muted",children:"Re-\xe9ssayez votre recherche avec des mots-cl\xe9s plus pr\xe9cis."})]})})})})}var N=function(t){var e,n=t.cart,r=(0,i.Z)(t,y).selected,s=void 0===r?[]:r;return(0,g.jsxs)("div",{className:"cart-add-item-view-header miq-container center px-1 pt-2",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsx)("div",{className:"me-1",children:(0,g.jsx)(h.QJ,{to:(0,x.Sm)(n),title:"Annuler",prefix:"miq-staff",children:"\xab"})}),(0,g.jsx)(h.M$,{title:(0,g.jsx)("span",{className:"mt-2",children:"Ajouter des produits au panier"}),text:"Tap on a product to add to the cart/ Cliquez sur un produit pour l'ajouter au panier"})]}),(0,g.jsxs)(h.j6,{className:"cart-items-preview",style:{minHeight:48,paddingBottom:0},children:[null===n||void 0===n||null===(e=n.items)||void 0===e?void 0:e.map((function(t){return(0,g.jsx)("div",{children:(0,g.jsx)(f.q,{product:t.product,width:48,height:48})},(0,m.Vj)())})),s.map((function(t){return(0,g.jsx)("div",{children:(0,g.jsx)(f.q,{product:t,width:48,height:48})},(0,m.Vj)())}))]})]})}}}]);
//# sourceMappingURL=889.df68a4fa.chunk.js.map