{"version":3,"file":"static/js/900.c96ce467.chunk.js","mappings":"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","sources":["../../../../shopy/shopy-shopjs/src/components.tsx","../../../../shopy/shopy-shopjs/src/forms.tsx","../../../../shopy/shopy-shopjs/src/services.ts","../../../../shopy/shopy-shopjs/src/Views.tsx","shop/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport './components.scss';\n\nimport { getCN } from '@miq/utiljs';\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Img, HorizontalGalleryProps } from '@miq/componentjs';\n\nimport { PriceDataType, TAttribute } from './types';\n\nexport type ProductPriceProps = {\n  retail_price: PriceDataType;\n  sale_price?: PriceDataType;\n  is_on_sale?: boolean;\n};\n\nexport const ProductPrice: React.FC<ProductPriceProps> = (props) => {\n  const { is_on_sale, retail_price, sale_price } = props;\n  const isSale = is_on_sale && sale_price?.amountWithSymbol != null;\n\n  return (\n    <div className={getCN(['p-price', isSale && 'sale'])}>\n      {isSale && <div className=\"p-price-sale text-danger me-1\">{sale_price.amountWithSymbol}</div>}\n      <div className={getCN(['p-price-retail', isSale && 'text-line-through'])}>{retail_price.amountWithSymbol}</div>\n    </div>\n  );\n};\n\nexport interface ProductGridProps extends React.ComponentPropsWithoutRef<'div'> {}\n\nexport type CategoryLinksProps = {\n  showCover?: boolean | string;\n};\n\nexport const CategoryLinks = (props: CategoryLinksProps) => {\n  const { categories } = React.useContext(SharedDataCtx);\n\n  if (!categories) return null;\n\n  return (\n    <div className=\"p-category-links pb-2\">\n      {categories?.map((cat) => {\n        return (\n          <div className=\"item w-25 w-md-15\" key={cat.meta_slug}>\n            <a href={cat.url} className=\"\" title={cat.name}>\n              {props.showCover && cat?.cover && (\n                <Img.Picture {...cat.cover} src_mobile={cat?.cover?.thumb_sq || cat?.cover?.src_mobile} />\n              )}\n              <div className=\"info\">{cat.name_truncated}</div>\n            </a>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport type ProductImagesHorizontalGalleryProps = HorizontalGalleryProps & {};\n\nexport const ProductImagesHorizontalGallery = (props: ProductImagesHorizontalGalleryProps) => {\n  return <Img.HorizontalGallery {...props} className={getCN(['p-imgs-hgallery', props.className])} />;\n};\n\nexport const Video = ({ src }: { src: string }) => {\n  src = 'https://cdn.accentuate.io/6648217338049/1633654669010/170T_812B_ERB_V2.mp4?v=0';\n\n  return (\n    <video\n      className=\"intrinsic__item lazy entered loaded\"\n      data-src={src}\n      poster=\"\"\n      autoPlay={true}\n      playsInline={false}\n      muted={true}\n      loop={true}\n      data-ll-status=\"loaded\"\n      src={src}\n      width=\"100%\"\n    >\n      <source data-src={src} type=\"video/mp4\" src={src} />\n    </video>\n  );\n};\n\nexport const ProductAttributeList = ({ attributes }: { attributes: TAttribute[] }) => {\n  if (!attributes) return null;\n\n  return (\n    <ul className=\"product-attr-list\">\n      {attributes?.map((attr) => {\n        return (\n          <li className=\"attr\" key={attr.name}>\n            <span className=\"attr-label\">{attr.name} : </span>\n            <span className=\"attr-value\">{attr.value}</span>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n","import * as React from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport './forms.scss';\n\nimport { getCN } from '@miq/utiljs';\nimport { Button } from '@miq/componentjs';\nimport Form, { Inputs, useForm } from '@miq/formjs';\nimport { CustomerFields, TCart, TCustomer, TOrderItem } from '@shopy/orderjs';\nimport { SizeQuantityField, SizeSelectField } from '@shopy/storejs';\n\nimport { patchOrderItem, postCustomer, postOrderItem } from './services';\nimport { ProductType } from './types';\n\nexport const CartForm = ({ product, cart, ...props }: { product: ProductType; cart?: TCart }) => {\n  const { sizes } = product || {};\n\n  console.log(sizes);\n\n  const form = useForm<TCart>({});\n  return <Form context={form}></Form>;\n};\n\nexport const OrderItemForm = ({\n  product,\n  cart,\n  fields,\n  onSuccess,\n  children,\n  ...props\n}: {\n  product: ProductType;\n  onSuccess: (p: TCart) => void;\n  fields: string[];\n  cart?: TCart;\n  children?: React.ReactNode;\n}) => {\n  let { sizes = [], meta_slug: productSlug } = product || {};\n  const { products = [], items = [] } = cart || {};\n\n  const item = items.find((i: TOrderItem) => i?.product?.meta_slug === productSlug);\n  // console.log(cart, items, item);\n\n  console.log(item);\n\n  const form = useForm<TOrderItem>({\n    quantity: 1,\n    size: item ? item.size : '',\n\n    //# customer\n    first_name: '',\n    last_name: '',\n    email: '',\n    phone: '',\n  });\n\n  const { errors, values } = form;\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (!values.size) {\n      form.setError('size', 'Veuillez choisir votre taille');\n      return;\n    }\n\n    const fd: any = { quantity: values.quantity, size: values.size };\n\n    if (item && item.slug) {\n      patchOrderItem(item.slug!, fd).then(({ data }) => {\n        onSuccess?.(data);\n      });\n    } else {\n      fd['customer'] = form.values;\n      postOrderItem(productSlug!, fd).then(({ data }) => {\n        onSuccess?.(data);\n      });\n    }\n  };\n\n  sizes = sizes?.filter((i) => i.quantity > 0);\n\n  return (\n    <Form context={form} onSubmit={handleSubmit} className=\"order-item-form\">\n      <>\n        {fields.includes('size') && <SizeSelectField required label=\"Taille\" error={errors.size} sizes={sizes} />}\n\n        {fields.includes('quantity') && (\n          <SizeQuantityField\n            error={errors.quantity}\n            max={sizes.find((i) => i.slug === form.values.size)?.quantity || 0}\n            min={1}\n          />\n        )}\n      </>\n\n      {!Boolean(cart?.customer) && form.values.size && (\n        <div className=\"\">\n          <CustomerFields.LName error={errors.lastst_name} />\n          <CustomerFields.FName error={errors.first_name} />\n          <CustomerFields.Phone error={errors.phone} />\n          <CustomerFields.Email error={errors.email} />\n        </div>\n      )}\n\n      {children}\n    </Form>\n  );\n};\n\nexport const CustomerForm = ({ onCancel }: { onCancel?: (p?: any) => void }) => {\n  const form = useForm<TCustomer>({ first_name: 'john', last_name: 'mickowi', email: '', phone: '32443443343' });\n  const sharedProps = {};\n  const { errors } = form;\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    postCustomer(form.values)\n      .then(({ data }) => {\n        console.log(data);\n      })\n      .catch((err) => {\n        form.setErrors(err);\n      });\n  };\n\n  return (\n    <Form context={form} onSubmit={handleSubmit}>\n      <CustomerFields.LName error={errors.lastst_name} {...sharedProps} />\n      <CustomerFields.FName error={errors.first_name} {...sharedProps} />\n      <CustomerFields.Phone error={errors.phone} {...sharedProps} />\n      <CustomerFields.Email error={errors.email} {...sharedProps} />\n\n      <div className=\"d-flex justify-content-between\">\n        <div>{onCancel && <Button onClick={onCancel}>Annuler</Button>}</div>\n        <Form.Submit value={'Envoyer message >>'} />\n      </div>\n    </Form>\n  );\n};\n\nexport const ProductSearchForm = (props: { className?: string }) => {\n  const [search, setSearch] = useSearchParams();\n\n  return (\n    <form {...props} className={getCN(['p-search-form', props.className])}>\n      <Inputs.SearchInput\n        // required\n        value={search.get('q') || ''}\n        onChange={(e) => {\n          setSearch({ q: e.target.value });\n        }}\n        placeholder=\"Cherchez un produit ...\"\n      />\n    </form>\n  );\n};\n","import { HTTP } from '@miq/utiljs';\n\nexport const patchOrderItem = (itemSlug: string, values: { size: string; quantity: number }) => {\n  return HTTP.post(`api/order/item/${itemSlug}/`, { ...values, redirect: true });\n};\n\nexport const postOrderItem = (productSlug: string, values: { size: string; quantity: number }) => {\n  return HTTP.post(`api/order/cart/${productSlug}/`, { ...values, redirect: true });\n};\n\nexport const postCustomer = (\n  values: { first_name: string; last_name: string; phone: string; email?: string },\n  cartSlug?: string\n) => {\n  return HTTP.post('api/order/customer/', { ...values, cartSlug });\n};\n","import * as React from 'react';\n\nimport { getCN } from '@miq/utiljs';\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { ProductType, ShopyClientProductDetailSharedDataState } from './types';\nimport { Icons, IPaginationProps, IViewProps, Pagination, View } from '@miq/componentjs';\nimport { ProductAttributeList, ProductGridProps, ProductImagesHorizontalGallery, ProductPrice } from './components';\nimport { OrderItemForm } from './forms';\nimport Form from '@miq/formjs';\nimport { TCart } from '@shopy/orderjs';\n\nimport './views.scss';\nimport { useNavigate } from 'react-router-dom';\n\nexport interface IProductDetailViewProps extends IViewProps {\n  product: ProductType;\n  header?: React.ReactNode;\n  images?: React.ReactNode;\n  body?: React.ReactNode;\n  footer?: React.ReactNode;\n  readonly clsPrefix?: string;\n}\n\nexport const ProductDetailView = ({ product, ...props }: IProductDetailViewProps) => {\n  const ctx = React.useContext(SharedDataCtx);\n  const navigate = useNavigate();\n  const { whatsapp_number, cart, updateKey } = ctx as ShopyClientProductDetailSharedDataState & {\n    cart?: any;\n  };\n\n  const { clsPrefix = 'miq-shop-product-detail-view', images, children, body, ...rest } = props;\n  const { is_oos, is_pre_sale, is_pre_sale_text } = product;\n\n  const successPath = `./?r=1&source=site&medium=shopbtn&campaign=web`;\n\n  const handleSuccess = (p: TCart) => {\n    updateKey('cart', p);\n    window.location.href = successPath;\n    // navigate(successPath);\n    // if (msg_link) navigate(msg_link, {});\n  };\n\n  return (\n    <View {...rest} className={getCN([clsPrefix, props.className])}>\n      <div className={`${clsPrefix}-grid d-grid grid-md-12`}>\n        {/* media */}\n        <div className={`${clsPrefix}-grid-media span-md-8`}>{images}</div>\n        {/* product */}\n        <div className={`${clsPrefix}-grid-product span-md-4 p-1`}>\n          {is_oos && (\n            <div className=\"my-2\">\n              <span className=\"bg-red-100 px-1 rounded\">En rupture de stock</span>\n            </div>\n          )}\n\n          <>\n            <h1 className=\"p-name fw-lighter\">{product.name}</h1>\n          </>\n\n          <>\n            <ProductPrice {...product} retail_price={product.retail_price!} />\n          </>\n\n          <>\n            {/* <div className=\"mb-3\"><ProductPreSaleDate product={product} /></div> */}\n            {is_pre_sale && is_pre_sale_text && <div className=\"p-presale-text mb-3\">{is_pre_sale_text}</div>}\n          </>\n\n          <div className=\"text-muted\">\n            <p className=\"\">Pour commander, choisissez votre taille et envoyez-nous un message sur whatsapp.</p>\n\n            <p className=\"mb-2\">Nous livrons sur Cotonou 🇧🇯 et alentours.</p>\n          </div>\n\n          <OrderItemForm product={product} cart={cart} fields={['size']} onSuccess={(d: TCart) => handleSuccess(d)}>\n            <Form.Submit className=\"w-submit btn btn-md\">\n              <Icons.Whatsapp />\n              <span className=\"ms-1\">Envoyer message</span>\n            </Form.Submit>\n          </OrderItemForm>\n\n          {/* <Add2CartButton product={product} cart={cart} /> */}\n\n          {whatsapp_number && (\n            <div className=\"mb-3 text-center\">\n              {/* <a\n                href={successPath}\n                className=\"d-block btn btn-md btn-primary px-2 fw-bold\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Acheter\n              </a> */}\n            </div>\n          )}\n\n          {product.description && <div className=\"p-description mb-3\">{product.description}</div>}\n\n          <ul className=\"p-extra my-3\">\n            {product?.has_attributes && (\n              <>\n                <li className=\"p-extra-title mb-1 fw-bold\">Détails</li>\n                <li className=\"p-extra-content\">\n                  <ProductAttributeList attributes={product.attributes || []} />\n                </li>\n              </>\n            )}\n\n            <li className=\"p-extra-title my-1 fw-bold\">Livraison</li>\n            <li className=\"p-extra-content\">\n              <p className=\"mb-1\">\n                Livraison standard gratuite sur Cotonou pour toutes commandes de 50000 CFA et plus.\n              </p>\n              <div className=\"text-sm text-muted\">\n                *Le délai de traitement de la livraison standard pour cet article est estimé à 1 à 5 jours ouvrables.\n              </div>\n              {/* <a href=\".\" className=\"text-underline\">\n                  Consultez notre page Livraison\n                </a> */}\n            </li>\n          </ul>\n\n          {body}\n        </div>\n\n        {children}\n\n        <>\n          <ProductDetailView.HorizontalGallery />\n          <ProductImagesHorizontalGallery />\n        </>\n      </div>\n    </View>\n  );\n};\n\nProductDetailView.HorizontalGallery = ProductImagesHorizontalGallery;\n\nexport interface IProductGridViewProps extends Omit<IViewProps, 'footer'> {\n  items: any[];\n  viewCN?: string;\n  renderItem: (i: any) => JSX.Element | null;\n  pagination?: IPaginationProps;\n}\n\nexport const ProductGridView = (props: IProductGridViewProps) => {\n  const { viewCN, pagination, className, children, items, renderItem, ...rest } = props;\n\n  return (\n    <View {...rest} className={viewCN} footer={pagination && <Pagination {...pagination} />}>\n      <ProductGridView.Grid>{children || items.map((i) => renderItem(i))}</ProductGridView.Grid>\n    </View>\n  );\n};\n\nProductGridView.Grid = ({\n  className = 'grid-2 grid-md-3 grid-lg-4 grid-xl-6 gap-2',\n  children,\n}: ProductGridProps & { children: React.ReactNode; className?: string }) => (\n  <div className={getCN([className, 'miq-product-grid d-grid'])}>{children}</div>\n);\n\nexport interface IProductListViewProps {}\n\nexport const ProductListView: React.FC<IProductListViewProps> = (props) => {\n  return <View {...props} />;\n};\n","import * as React from 'react';\nimport { Routes, Route, useSearchParams } from 'react-router-dom';\n\nimport './shop.scss';\n\nimport {\n  CategoryLinks,\n  ProductPrice,\n  ProductSearchForm,\n  ProductType,\n  ShopyClientProductDetailSharedDataState,\n  ShopyClientProductListSharedDataState,\n  Views,\n} from '@shopy/shopjs';\nimport { SharedDataCtx } from '@miq/contextjs';\nimport { Img, View, BreadCrumbs, Pagination } from '@miq/componentjs';\n\nimport { truncateStr } from '@miq/utiljs';\n// import { useViewport } from '@miq/hookjs';\n\nconst ShopProductDetailView = () => {\n  const ctx = React.useContext(SharedDataCtx);\n  // const { isMDDown } = useViewport();\n\n  const { product, similar, breadcrumbs } = ctx as ShopyClientProductDetailSharedDataState;\n\n  const { cover, images } = product;\n  const pImages = [cover!, ...images!];\n\n  return (\n    <>\n      <Views.ProductDetailView\n        product={product}\n        header={<BreadCrumbs items={breadcrumbs} className=\"my-3 px-2\" />}\n        images={\n          <div className=\"p-images mb-2\" style={{ position: 'sticky', top: 0 }}>\n            <Views.ProductDetailView.HorizontalGallery images={pImages} mobileOnly={false} />\n          </div>\n        }\n        body={\n          <div className=\"p-details p-1\">\n            {/* <div className=\"mb-3\">\n              <div className=\"text-md\">Porter avec</div>\n            </div> */}\n          </div>\n        }\n        footer={\n          <>\n            {similar && (\n              <div className=\"p-2\">\n                <p className=\"text-md mb-2\">Vous aimerez peut-être</p>\n\n                <Views.ProductGridView.Grid>\n                  {similar.map((i) => (\n                    <ProductGridItem item={i} key={i.meta_slug} />\n                  ))}\n                </Views.ProductGridView.Grid>\n              </div>\n            )}\n          </>\n        }\n        className=\"product-detail-view\"\n      />\n    </>\n  );\n};\n\nconst ShopProductGridView = () => {\n  const [params] = useSearchParams();\n\n  const ctx = React.useContext(SharedDataCtx) as ShopyClientProductListSharedDataState & { pagination: any };\n\n  const { object_list = [], page_label, breadcrumbs, pagination } = ctx;\n\n  const q = params.get('q');\n\n  return (\n    <View\n      className=\"p-listview p-1 pb-4\"\n      header={\n        <header className=\"p-listview-header\">\n          <div className=\"miq-container center\">\n            <div className=\"mb-3\">\n              <ProductSearchForm />\n            </div>\n          </div>\n\n          <BreadCrumbs items={breadcrumbs} className=\"mb-2\" />\n\n          {!q && <CategoryLinks showCover />}\n        </header>\n      }\n    >\n      <Views.ProductGridView\n        title={page_label}\n        viewCN=\"miq-container-lg\"\n        items={object_list}\n        renderItem={(i) => <ProductGridItem showName item={i} key={i.meta_slug} />}\n      />\n\n      <div className=\"mt-3\">{pagination && <Pagination {...pagination} />}</div>\n    </View>\n  );\n};\n\nconst ProductGridItem = ({ item, showName, ...props }: { item: ProductType; showName?: boolean }) => {\n  const { url, cover, name, is_oos } = item;\n\n  return (\n    <a href={`${url}`}>\n      <div>\n        <Img.Picture {...cover} className=\"rounded\" />\n\n        <div className=\"product-grid-info\">\n          {is_oos && <span className=\"bg-red-100 px-1 rounded\">En rupture de stock</span>}\n          <ProductPrice {...item} />\n          {showName && <div className=\"product-grid-name\">{truncateStr(name)}</div>}\n        </div>\n      </div>\n    </a>\n  );\n};\n\nexport default function ShopPublicRoutes() {\n  return (\n    <Routes>\n      <Route path=\":catMetaSlug/:prodMetaSlug/\" element={<ShopProductDetailView />} />\n      <Route path=\":catMetaSlug/\" element={<ShopProductGridView />} />\n      <Route index element={<ShopProductGridView />} />\n    </Routes>\n  );\n}\n"],"names":["ProductPrice","props","is_on_sale","retail_price","sale_price","isSale","amountWithSymbol","className","getCN","CategoryLinks","categories","React","SharedDataCtx","map","cat","href","url","title","name","showCover","cover","src_mobile","thumb_sq","name_truncated","meta_slug","ProductImagesHorizontalGallery","ProductAttributeList","attributes","attr","value","OrderItemForm","product","cart","fields","onSuccess","children","sizes","productSlug","products","items","item","find","i","console","log","form","useForm","quantity","size","first_name","last_name","email","phone","errors","values","filter","context","onSubmit","e","preventDefault","fd","slug","itemSlug","HTTP","redirect","patchOrderItem","then","data","postOrderItem","setError","includes","required","label","error","max","min","Boolean","customer","lastst_name","ProductSearchForm","useSearchParams","search","setSearch","get","onChange","q","target","placeholder","ProductDetailView","ctx","useNavigate","whatsapp_number","updateKey","clsPrefix","images","body","rest","is_oos","is_pre_sale","is_pre_sale_text","d","window","location","description","has_attributes","HorizontalGallery","ProductGridView","viewCN","pagination","renderItem","footer","Grid","ShopProductDetailView","similar","breadcrumbs","pImages","header","style","position","top","mobileOnly","ProductGridItem","ShopProductGridView","params","object_list","page_label","showName","truncateStr","ShopPublicRoutes","path","element","index"],"sourceRoot":""}